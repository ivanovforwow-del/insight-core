module.exports=[540120,(a,b,c)=>{b.exports=a.g},730397,(a,b,c)=>{var d=Array.prototype.slice;b.exports=function(a,b){for(("length"in a)||(a=[a]),a=d.call(a);a.length;){var c=a.shift(),e=b(c);if(e)return e;c.childNodes&&c.childNodes.length&&(a=d.call(c.childNodes).concat(a))}}},113634,(a,b,c)=>{function d(a,b){if(!(this instanceof d))return new d(a,b);this.data=a,this.nodeValue=a,this.length=a.length,this.ownerDocument=b||null}b.exports=d,d.prototype.nodeType=8,d.prototype.nodeName="#comment",d.prototype.toString=function(){return"[object Comment]"}},628465,(a,b,c)=>{function d(a,b){if(!(this instanceof d))return new d(a);this.data=a||"",this.length=this.data.length,this.ownerDocument=b||null}b.exports=d,d.prototype.type="DOMTextNode",d.prototype.nodeType=3,d.prototype.nodeName="#text",d.prototype.toString=function(){return this.data},d.prototype.replaceData=function(a,b,c){var d=this.data,e=d.substring(0,a),f=d.substring(a+b,d.length);this.data=e+c+f,this.length=this.data.length}},46802,(a,b,c)=>{b.exports=function(a){var b=this,c=a.type;a.target||(a.target=b),b.listeners||(b.listeners={});var d=b.listeners[c];if(d)return d.forEach(function(c){a.currentTarget=b,"function"==typeof c?c(a):c.handleEvent(a)});b.parentNode&&b.parentNode.dispatchEvent(a)}},446517,(a,b,c)=>{b.exports=function(a,b){this.listeners||(this.listeners={}),this.listeners[a]||(this.listeners[a]=[]),-1===this.listeners[a].indexOf(b)&&this.listeners[a].push(b)}},891798,(a,b,c)=>{b.exports=function(a,b){if(this.listeners&&this.listeners[a]){var c=this.listeners[a],d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},982216,(a,b,c)=>{b.exports=function a(b){switch(b.nodeType){case 3:return f(b.data);case 8:return"<!--"+b.data+"-->";default:var c,g,h;return g=[],h=(c=b).tagName,"http://www.w3.org/1999/xhtml"===c.namespaceURI&&(h=h.toLowerCase()),g.push("<"+h+function(a){var b=[];for(var c in a)(function(a,b){var c=typeof a[b];return"style"===b&&Object.keys(a.style).length>0||a.hasOwnProperty(b)&&("string"===c||"boolean"===c||"number"===c)&&"nodeName"!==b&&"className"!==b&&"tagName"!==b&&"textContent"!==b&&"innerText"!==b&&"namespaceURI"!==b&&"innerHTML"!==b})(a,c)&&b.push({name:c,value:a[c]});for(var d in a._attributes)for(var f in a._attributes[d]){var g=a._attributes[d][f],h=(g.prefix?g.prefix+":":"")+f;b.push({name:h,value:g.value})}return a.className&&b.push({name:"class",value:a.className}),b.length?e(b):""}(c)+function(a){var b=a.dataset,c=[];for(var d in b)c.push({name:"data-"+d,value:b[d]});return c.length?e(c):""}(c)),d.indexOf(h)>-1?g.push(" />"):(g.push(">"),c.childNodes.length?g.push.apply(g,c.childNodes.map(a)):c.textContent||c.innerText?g.push(f(c.textContent||c.innerText)):c.innerHTML&&g.push(c.innerHTML),g.push("</"+h+">")),g.join("")}};var d=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function e(a){var b=[];return a.forEach(function(a){var c=a.name,d=a.value;"style"===c&&(d=function(a){if("string"==typeof a)return a;var b="";return Object.keys(a).forEach(function(c){var d=a[c];c=c.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),b+=c+":"+d+";"}),b}(d)),b.push(c+'="'+f(d).replace(/"/g,"&quot;")+'"')}),b.length?" "+b.join(" "):""}function f(a){var b="";return"string"==typeof a?b=a:a&&(b=a.toString()),b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},859016,(a,b,c)=>{var d=a.r(730397),e=a.r(46802),f=a.r(446517),g=a.r(891798),h=a.r(982216),i="http://www.w3.org/1999/xhtml";function j(a,b,c){if(!(this instanceof j))return new j(a);var d=void 0===c?i:c||null;this.tagName=d===i?String(a).toUpperCase():a,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=b||null,this.namespaceURI=d,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}b.exports=j,j.prototype.type="DOMElement",j.prototype.nodeType=1,j.prototype.appendChild=function(a){return a.parentNode&&a.parentNode.removeChild(a),this.childNodes.push(a),a.parentNode=this,a},j.prototype.replaceChild=function(a,b){a.parentNode&&a.parentNode.removeChild(a);var c=this.childNodes.indexOf(b);return b.parentNode=null,this.childNodes[c]=a,a.parentNode=this,b},j.prototype.removeChild=function(a){var b=this.childNodes.indexOf(a);return this.childNodes.splice(b,1),a.parentNode=null,a},j.prototype.insertBefore=function(a,b){a.parentNode&&a.parentNode.removeChild(a);var c=null==b?-1:this.childNodes.indexOf(b);return c>-1?this.childNodes.splice(c,0,a):this.childNodes.push(a),a.parentNode=this,a},j.prototype.setAttributeNS=function(a,b,c){var d=null,e=b,f=b.indexOf(":");f>-1&&(d=b.substr(0,f),e=b.substr(f+1)),"INPUT"===this.tagName&&"type"===b?this.type=c:(this._attributes[a]||(this._attributes[a]={}))[e]={value:c,prefix:d}},j.prototype.getAttributeNS=function(a,b){var c=this._attributes[a],d=c&&c[b]&&c[b].value;return"INPUT"===this.tagName&&"type"===b?this.type:"string"!=typeof d?null:d},j.prototype.removeAttributeNS=function(a,b){if(Object.prototype.hasOwnProperty.call(this._attributes,a)){var c=this._attributes[a];c&&Object.prototype.hasOwnProperty.call(c,b)&&delete c[b]}},j.prototype.hasAttributeNS=function(a,b){var c=this._attributes[a];return!!c&&b in c},j.prototype.setAttribute=function(a,b){return this.setAttributeNS(null,a,b)},j.prototype.getAttribute=function(a){return this.getAttributeNS(null,a)},j.prototype.removeAttribute=function(a){return this.removeAttributeNS(null,a)},j.prototype.hasAttribute=function(a){return this.hasAttributeNS(null,a)},j.prototype.removeEventListener=g,j.prototype.addEventListener=f,j.prototype.dispatchEvent=e,j.prototype.focus=function(){},j.prototype.toString=function(){return h(this)},j.prototype.getElementsByClassName=function(a){var b=a.split(" "),c=[];return d(this,function(a){if(1===a.nodeType){var d=(a.className||"").split(" ");b.every(function(a){return -1!==d.indexOf(a)})&&c.push(a)}}),c},j.prototype.getElementsByTagName=function(a){a=a.toLowerCase();var b=[];return d(this.childNodes,function(c){1===c.nodeType&&("*"===a||c.tagName.toLowerCase()===a)&&b.push(c)}),b},j.prototype.contains=function(a){return d(this,function(b){return a===b})||!1}},821811,(a,b,c)=>{var d=a.r(859016);function e(a){if(!(this instanceof e))return new e;this.childNodes=[],this.parentNode=null,this.ownerDocument=a||null}b.exports=e,e.prototype.type="DocumentFragment",e.prototype.nodeType=11,e.prototype.nodeName="#document-fragment",e.prototype.appendChild=d.prototype.appendChild,e.prototype.replaceChild=d.prototype.replaceChild,e.prototype.removeChild=d.prototype.removeChild,e.prototype.toString=function(){return this.childNodes.map(function(a){return String(a)}).join("")}},526936,(a,b,c)=>{function d(a){}b.exports=d,d.prototype.initEvent=function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c},d.prototype.preventDefault=function(){}},497666,(a,b,c)=>{var d=a.r(730397),e=a.r(113634),f=a.r(628465),g=a.r(859016),h=a.r(821811),i=a.r(526936),j=a.r(46802),k=a.r(446517),l=a.r(891798);function m(){if(!(this instanceof m))return new m;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}b.exports=m;var n=m.prototype;n.createTextNode=function(a){return new f(a,this)},n.createElementNS=function(a,b){return new g(b,this,null===a?null:String(a))},n.createElement=function(a){return new g(a,this)},n.createDocumentFragment=function(){return new h(this)},n.createEvent=function(a){return new i(a)},n.createComment=function(a){return new e(a,this)},n.getElementById=function(a){return a=String(a),d(this.childNodes,function(b){if(String(b.id)===a)return b})||null},n.getElementsByClassName=g.prototype.getElementsByClassName,n.getElementsByTagName=g.prototype.getElementsByTagName,n.contains=g.prototype.contains,n.removeEventListener=l,n.addEventListener=k,n.dispatchEvent=j},671649,(a,b,c)=>{b.exports=new(a.r(497666))},672497,(a,b,c)=>{var d,e=a.g,f=a.r(671649);"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"])||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f),b.exports=d},577518,(a,b,c)=>{function d(){return b.exports=d=Object.assign.bind(),b.exports.__esModule=!0,b.exports.default=b.exports,d.apply(null,arguments)}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},407976,(a,b,c)=>{b.exports=function(a){if(!a)return!1;var b=d.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b};var d=Object.prototype.toString},384769,(a,b,c)=>{"use strict";function d(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}b.exports=function(){function a(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var b=a.prototype;return b.getIsEnabled=function(){return this.enabled_},b.enable=function(){this.enabled_=!0},b.disable=function(){this.enabled_=!1},b.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},b.addInterceptor=function(a,b){this.typeToInterceptorsMap_.has(a)||this.typeToInterceptorsMap_.set(a,new Set);var c=this.typeToInterceptorsMap_.get(a);return!c.has(b)&&(c.add(b),!0)},b.removeInterceptor=function(a,b){var c=this.typeToInterceptorsMap_.get(a);return!!(c&&c.has(b))&&(c.delete(b),!0)},b.clearInterceptorsByType=function(a){return!!this.typeToInterceptorsMap_.get(a)&&(this.typeToInterceptorsMap_.delete(a),this.typeToInterceptorsMap_.set(a,new Set),!0)},b.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},b.getForType=function(a){return this.typeToInterceptorsMap_.get(a)||new Set},b.execute=function(a,b){for(var c,e=this.getForType(a),f=function(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=function(a,b){if(a){if("string"==typeof a)return d(a,void 0);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return d(a,void 0)}}(a))){c&&(a=c);var e=0;return function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(c=f()).done;){var g=c.value;try{b=g(b)}catch(a){}}return b},a}()},74868,(a,b,c)=>{"use strict";var d=function(){function a(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var b=a.prototype;return b.getIsEnabled=function(){return this.enabled_},b.enable=function(){this.enabled_=!0},b.disable=function(){this.enabled_=!1},b.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},b.getMaxAttempts=function(){return this.maxAttempts_},b.setMaxAttempts=function(a){this.maxAttempts_=a},b.getDelayFactor=function(){return this.delayFactor_},b.setDelayFactor=function(a){this.delayFactor_=a},b.getFuzzFactor=function(){return this.fuzzFactor_},b.setFuzzFactor=function(a){this.fuzzFactor_=a},b.getInitialDelay=function(){return this.initialDelay_},b.setInitialDelay=function(a){this.initialDelay_=a},b.createRetry=function(a){var b=void 0===a?{}:a,c=b.maxAttempts,d=b.delayFactor,f=b.fuzzFactor,g=b.initialDelay;return new e({maxAttempts:c||this.maxAttempts_,delayFactor:d||this.delayFactor_,fuzzFactor:f||this.fuzzFactor_,initialDelay:g||this.initialDelay_})},a}(),e=function(){function a(a){this.maxAttempts_=a.maxAttempts,this.delayFactor_=a.delayFactor,this.fuzzFactor_=a.fuzzFactor,this.currentDelay_=a.initialDelay,this.currentAttempt_=1}var b=a.prototype;return b.moveToNextAttempt=function(){this.currentAttempt_++;var a=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+a},b.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},b.getCurrentDelay=function(){return this.currentDelay_},b.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},b.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},b.getCurrentFuzzedDelay=function(){var a=this.getCurrentMinPossibleDelay();return a+Math.random()*(this.getCurrentMaxPossibleDelay()-a)},a}();b.exports=d},437302,(a,b,c)=>{"use strict";var d=a.r(540120);b.exports=function(a,b){return void 0===b&&(b=!1),function(c,e,f){if(c)return void a(c);if(e.statusCode>=400&&e.statusCode<=599){var g=f;if(b)if(d.TextDecoder){var h,i=(void 0===(h=e.headers&&e.headers["content-type"])&&(h=""),h.toLowerCase().split(";").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return"charset"===d.trim()?e.trim():a},"utf-8"));try{g=new TextDecoder(i).decode(f)}catch(a){}}else g=String.fromCharCode.apply(null,new Uint8Array(f));a({cause:g});return}a(null,f)}}},255682,(a,b,c)=>{"use strict";var d=a.r(540120),e=a.r(577518),f=a.r(407976),g=a.r(384769),h=a.r(74868);k.httpHandler=a.r(437302),k.requestInterceptorsStorage=new g,k.responseInterceptorsStorage=new g,k.retryManager=new h;var i=function(a){var b={};return a&&a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();void 0===b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b};function j(a,b,c){var d=a;return f(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=e({},b,{uri:a}),d.callback=c,d}function k(a,b,c){return l(b=j(a,b,c))}function l(a){if(void 0===a.callback)throw Error("callback argument missing");if(a.requestType&&k.requestInterceptorsStorage.getIsEnabled()){var b,c,d,e={uri:a.uri||a.url,headers:a.headers||{},body:a.body,metadata:a.metadata||{},retry:a.retry,timeout:a.timeout},f=k.requestInterceptorsStorage.execute(a.requestType,e);a.uri=f.uri,a.headers=f.headers,a.body=f.body,a.metadata=f.metadata,a.retry=f.retry,a.timeout=f.timeout}var g=!1,h=function(b,c,d){g||(g=!0,a.callback(b,c,d))};function j(b){if(clearTimeout(d),clearTimeout(a.retryTimeout),b instanceof Error||(b=Error(""+(b||"Unknown XMLHttpRequest Error"))),b.statusCode=0,!c&&k.retryManager.getIsEnabled()&&a.retry&&a.retry.shouldRetry()){a.retryTimeout=setTimeout(function(){a.retry.moveToNextAttempt(),a.xhr=n,l(a)},a.retry.getCurrentFuzzedDelay());return}if(a.requestType&&k.responseInterceptorsStorage.getIsEnabled()){var e={headers:u.headers||{},body:u.body,responseUrl:n.responseURL,responseType:n.responseType},f=k.responseInterceptorsStorage.execute(a.requestType,e);u.body=f.body,u.headers=f.headers}return h(b,u)}function m(){if(!c){clearTimeout(d),clearTimeout(a.retryTimeout);var b=a.useXDR&&void 0===n.status?200:1223===n.status?204:n.status,e=u,f=null;if(0!==b?(e={body:function(){var a=void 0;if(a=n.response?n.response:n.responseText||function(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(a){}return null}(n),t)try{a=JSON.parse(a)}catch(a){}return a}(),statusCode:b,method:p,headers:{},url:o,rawRequest:n},n.getAllResponseHeaders&&(e.headers=i(n.getAllResponseHeaders()))):f=Error("Internal XMLHttpRequest Error"),a.requestType&&k.responseInterceptorsStorage.getIsEnabled()){var g={headers:e.headers||{},body:e.body,responseUrl:n.responseURL,responseType:n.responseType},j=k.responseInterceptorsStorage.execute(a.requestType,g);e.body=j.body,e.headers=j.headers}return h(f,e,e.body)}}var n=a.xhr||null;n||(n=a.cors||a.useXDR?new k.XDomainRequest:new k.XMLHttpRequest);var o=n.url=a.uri||a.url,p=n.method=a.method||"GET",q=a.body||a.data,r=n.headers=a.headers||{},s=!!a.sync,t=!1,u={body:void 0,headers:{},statusCode:0,method:p,url:o,rawRequest:n};if("json"in a&&!1!==a.json&&(t=!0,r.accept||r.Accept||(r.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(r["content-type"]||r["Content-Type"]||(r["Content-Type"]="application/json"),q=JSON.stringify(!0===a.json?q:a.json))),n.onreadystatechange=function(){4!==n.readyState||k.responseInterceptorsStorage.getIsEnabled()||setTimeout(m,0)},n.onload=m,n.onerror=j,n.onprogress=function(){},n.onabort=function(){c=!0,clearTimeout(a.retryTimeout)},n.ontimeout=j,n.open(p,o,!s,a.username,a.password),s||(n.withCredentials=!!a.withCredentials),!s&&a.timeout>0&&(d=setTimeout(function(){if(!c){c=!0,n.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",j(a)}},a.timeout)),n.setRequestHeader)for(b in r)r.hasOwnProperty(b)&&n.setRequestHeader(b,r[b]);else if(a.headers&&!function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(n.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(n),n.send(q||null),n}b.exports=k,b.exports.default=k,k.XMLHttpRequest=d.XMLHttpRequest||function(){},k.XDomainRequest="withCredentials"in new k.XMLHttpRequest?k.XMLHttpRequest:d.XDomainRequest,function(a,b){for(var c=0;c<a.length;c++)b(a[c])}(["get","put","post","patch","head","delete"],function(a){k["delete"===a?"del":a]=function(b,c,d){return(c=j(b,c,d)).method=a.toUpperCase(),l(c)}})},364136,(a,b,c)=>{var d=a.r(672497),e=Object.create||function(){function a(){}return function(b){if(1!=arguments.length)throw Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();function f(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function g(a){function b(a,b,c,d){return(0|a)*3600+(0|b)*60+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function h(){this.values=e(null)}function i(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);2===g.length&&b(g[0].trim(),g[1].trim())}}f.prototype=e(Error.prototype),f.prototype.constructor=f,f.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},h.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return!!(b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b))>=0)&&!!(b<=100)&&(this.set(a,b),!0)}};var j=d.createElement&&d.createElement("textarea"),k={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},l={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},m={v:"title",lang:"lang"},n={rt:"ruby"};function o(a,b){for(var c,d=a.document.createElement("div"),e=d,f=[];null!==(c=function(){if(!b)return null;var a,c=b.match(/^([^<]*)(<[^>]*>?)?/);return a=c[1]?c[1]:c[2],b=b.substr(a.length),a}());){if("<"===c[0]){if("/"===c[1]){f.length&&f[f.length-1]===c.substr(2).replace(">","")&&(f.pop(),e=e.parentNode);continue}var h,i,o,p,q=g(c.substr(1,c.length-2));if(q){p=a.document.createProcessingInstruction("timestamp",q),e.appendChild(p);continue}var r=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!r||!(p=function(b,c){var d=k[b];if(!d)return null;var e=a.document.createElement(d),f=m[b];return f&&c&&(e[f]=c.trim()),e}(r[1],r[3]))||(i=e,n[(o=p).localName]&&n[o.localName]!==i.localName))continue;if(r[2]){var s=r[2].split(".");s.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(l.hasOwnProperty(c)){var d=b?"background-color":"color",e=l[c];p.style[d]=e}}),p.className=s.join(" ")}f.push(r[1]),e.appendChild(p),e=p;continue}e.appendChild(a.document.createTextNode((j.innerHTML=h=c,h=j.textContent,j.textContent="",h)))}return d}var p=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function q(){}function r(a,b,c){q.call(this),this.cue=b,this.cueDiv=o(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:function(a){var b=[],c="";if(!a||!a.childNodes)return"ltr";function d(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}for(d(b,a);c=function a(b){if(!b||!b.length)return null;var c=b.pop(),e=c.textContent||c.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(b.length=0,f[0]):e}return"ruby"===c.tagName?a(b):c.childNodes?(d(b,c),a(b)):void 0}(b);)for(var e=0;e<c.length;e++)if(function(a){for(var b=0;b<p.length;b++){var c=p[b];if(a>=c[0]&&a<=c[1])return!0}return!1}(c.charCodeAt(e)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":case"line-left":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":case"line-right":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function s(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function t(){}q.prototype.applyStyles=function(a,b){for(var c in b=b||this.div,a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},q.prototype.formatStyle=function(a,b){return 0===a?0:a+b},r.prototype=e(q.prototype),r.prototype.constructor=r,s.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},s.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},s.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},s.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},s.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},s.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)},s.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},s.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;return{left:(a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a).left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c}},t.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},t.convertCueToDOMTree=function(a,b){return a&&b?o(a,b):null},t.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d,e,f=a.document.createElement("div");if(f.style.position="absolute",f.style.left="0",f.style.right="0",f.style.top="0",f.style.bottom="0",f.style.margin="1.5%",c.appendChild(f),!function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){for(var g=0;g<b.length;g++)f.appendChild(b[g].displayState);return}for(var h=[],i=s.getSimpleBoxPosition(f),j={font:Math.round(.05*i.height*100)/100+"px sans-serif"},k=0;k<b.length;k++)d=new r(a,e=b[k],j),f.appendChild(d.div),function(a,b,c,d){var e=new s(b),f=b.cue,g=function(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return -1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return -1*++d}(f),h=[];if(f.snapToLines){switch(f.vertical){case"":h=["+y","-y"],i="height";break;case"rl":h=["+x","-x"],i="width";break;case"lr":h=["-x","+x"],i="width"}var i,j=e.lineHeight,k=j*Math.round(g),l=c[i]+j,m=h[0];Math.abs(k)>l&&(k=Math.ceil(l/j)*j*(k<0?-1:1)),g<0&&(k+=""===f.vertical?c.height:c.width,h=h.reverse()),e.move(m,k)}else{var n=e.lineHeight/c.height*100;switch(f.lineAlign){case"center":g-=n/2;break;case"end":g-=n}switch(f.vertical){case"":b.applyStyles({top:b.formatStyle(g,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(g,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(g,"%")})}h=["+y","-x","+x","-y"],e=new s(b)}var o=function(a,b){for(var e,f=new s(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new s(a),g=i),a=new s(f)}return e||f}(e,h);b.move(o.toCSSCompatValues(c))}(0,d,i,h),e.displayState=d.div,h.push(s.getSimpleBoxPosition(d))},t.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},t.Parser.prototype={reportOrThrowError:function(a){if(a instanceof f)this.onparsingerror&&this.onparsingerror(a);else throw a},parse:function(a){var b=this;function c(){for(var a=b.buffer,c=0;c<a.length&&"\r"!==a[c]&&"\n"!==a[c];)++c;var d=a.substr(0,c);return"\r"===a[c]&&++c,"\n"===a[c]&&++c,b.buffer=a.substr(c),d}a&&(b.buffer+=b.decoder.decode(a,{stream:!0}));try{if("INITIAL"===b.state){if(!/\r\n|\n/.test(b.buffer))return this;var d,e=c(),j=e.match(/^WEBVTT([ \t].*)?$/);if(!j||!j[0])throw new f(f.Errors.BadSignature);b.state="HEADER"}for(var k=!1;b.buffer&&/\r\n|\n/.test(b.buffer);)switch(k?k=!1:e=c(),b.state){case"HEADER":/:/.test(e)?(d=e).match(/X-TIMESTAMP-MAP/)?i(d,function(a,c){if("X-TIMESTAMP-MAP"===a){var d;d=new h,i(c,function(a,b){switch(a){case"MPEGT":d.integer(a+"S",b);break;case"LOCA":d.set(a+"L",g(b))}},/[^\d]:/,/,/),b.ontimestampmap&&b.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}},/=/):i(d,function(a,c){if("Region"===a){var d=new h;if(i(c,function(a,b){switch(a){case"id":d.set(a,b);break;case"width":d.percent(a,b);break;case"lines":d.integer(a,b);break;case"regionanchor":case"viewportanchor":var c=b.split(",");if(2!==c.length)break;var e=new h;if(e.percent("x",c[0]),e.percent("y",c[1]),!e.has("x")||!e.has("y"))break;d.set(a+"X",e.get("x")),d.set(a+"Y",e.get("y"));break;case"scroll":d.alt(a,b,["up"])}},/=/,/\s/),d.has("id")){var e=new(b.vttjs.VTTRegion||b.window.VTTRegion);e.width=d.get("width",100),e.lines=d.get("lines",3),e.regionAnchorX=d.get("regionanchorX",0),e.regionAnchorY=d.get("regionanchorY",100),e.viewportAnchorX=d.get("viewportanchorX",0),e.viewportAnchorY=d.get("viewportanchorY",100),e.scroll=d.get("scroll",""),b.onregion&&b.onregion(e),b.regionList.push({id:d.get("id"),region:e})}}},/:/):e||(b.state="ID");continue;case"NOTE":e||(b.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){b.state="NOTE";break}if(!e)continue;b.cue=new(b.vttjs.VTTCue||b.window.VTTCue)(0,0,"");try{b.cue.align="center"}catch(a){b.cue.align="middle"}if(b.state="CUE",-1===e.indexOf("-->")){b.cue.id=e;continue}case"CUE":try{!function(a,b,c){var d=a;function e(){var b=g(a);if(null===b)throw new f(f.Errors.BadTimeStamp,"Malformed timestamp: "+d);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function j(){a=a.replace(/^\s+/,"")}if(j(),b.startTime=e(),j(),"-->"!==a.substr(0,3))throw new f(f.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+d);a=a.substr(3),j(),b.endTime=e(),j();var k=a,l=new h;i(k,function(a,b){switch(a){case"region":for(var d=c.length-1;d>=0;d--)if(c[d].id===b){l.set(a,c[d].region);break}break;case"vertical":l.alt(a,b,["rl","lr"]);break;case"line":var e=b.split(","),f=e[0];l.integer(a,f),l.percent(a,f)&&l.set("snapToLines",!1),l.alt(a,f,["auto"]),2===e.length&&l.alt("lineAlign",e[1],["start","center","end"]);break;case"position":e=b.split(","),l.percent(a,e[0]),2===e.length&&l.alt("positionAlign",e[1],["start","center","end"]);break;case"size":l.percent(a,b);break;case"align":l.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=l.get("region",null),b.vertical=l.get("vertical","");try{b.line=l.get("line","auto")}catch(a){}b.lineAlign=l.get("lineAlign","start"),b.snapToLines=l.get("snapToLines",!0),b.size=l.get("size",100);try{b.align=l.get("align","center")}catch(a){b.align=l.get("align","middle")}try{b.position=l.get("position","auto")}catch(a){b.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}(e,b.cue,b.regionList)}catch(a){b.reportOrThrowError(a),b.cue=null,b.state="BADCUE";continue}b.state="CUETEXT";continue;case"CUETEXT":var l=-1!==e.indexOf("-->");if(!e||l&&(k=!0)){b.oncue&&b.oncue(b.cue),b.cue=null,b.state="ID";continue}b.cue.text&&(b.cue.text+="\n"),b.cue.text+=e.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":e||(b.state="ID");continue}}catch(a){b.reportOrThrowError(a),"CUETEXT"===b.state&&b.cue&&b.oncue&&b.oncue(b.cue),b.cue=null,b.state="INITIAL"===b.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new f(f.Errors.BadSignature)}catch(a){this.reportOrThrowError(a)}return this.onflush&&this.onflush(),this}},b.exports=t},407398,(a,b,c)=>{var d={"":1,lr:1,rl:1},e={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function f(a){return"string"==typeof a&&!!e[a.toLowerCase()]&&a.toLowerCase()}function g(a,b,c){this.hasBeenReset=!1;var e="",g=!1,h=a,i=b,j=c,k=null,l="",m=!0,n="auto",o="start",p="auto",q="auto",r=100,s="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(a){e=""+a}},pauseOnExit:{enumerable:!0,get:function(){return g},set:function(a){g=!!a}},startTime:{enumerable:!0,get:function(){return h},set:function(a){if("number"!=typeof a)throw TypeError("Start time must be set to a number.");h=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return i},set:function(a){if("number"!=typeof a)throw TypeError("End time must be set to a number.");i=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return j},set:function(a){j=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return k},set:function(a){k=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(a){var b="string"==typeof a&&!!d[a.toLowerCase()]&&a.toLowerCase();if(!1===b)throw SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(a){m=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return n},set:function(a){if("number"!=typeof a&&"auto"!==a)throw SyntaxError("Line: an invalid number or illegal string was specified.");n=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=f(a);b?(o=b,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||a>100)throw Error("Position must be between 0 and 100.");p=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return q},set:function(a){var b=f(a);b?(q=b,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return r},set:function(a){if(a<0||a>100)throw Error("Size must be between 0 and 100.");r=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return s},set:function(a){var b=f(a);if(!b)throw SyntaxError("align: an invalid or illegal alignment string was specified.");s=b,this.hasBeenReset=!0}}}),this.displayState=void 0}g.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},b.exports=g},594248,(a,b,c)=>{var d={"":!0,up:!0};function e(a){return"number"==typeof a&&a>=0&&a<=100}b.exports=function(){var a=100,b=3,c=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!e(b))throw Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!e(a))throw Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!e(a))throw Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!e(a))throw Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!e(a))throw Error("ViewportAnchorX must be between 0 and 100.");g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b="string"==typeof a&&!!d[a.toLowerCase()]&&a.toLowerCase();!1===b?console.warn("Scroll: an invalid or illegal string was specified."):i=b}}})}},15751,(a,b,c)=>{var d=a.r(540120),e=b.exports={WebVTT:a.r(364136),VTTCue:a.r(407398),VTTRegion:a.r(594248)};d.vttjs=e,d.WebVTT=e.WebVTT;var f=e.VTTCue,g=e.VTTRegion,h=d.VTTCue,i=d.VTTRegion;e.shim=function(){d.VTTCue=f,d.VTTRegion=g},e.restore=function(){d.VTTCue=h,d.VTTRegion=i},d.VTTCue||e.shim()},919296,(a,b,c)=>{"use strict";function d(a,b){return void 0===b&&(b=Object),b&&"function"==typeof b.freeze?b.freeze(a):a}var e=d({HTML:"text/html",isHTML:function(a){return a===e.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),f=d({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===f.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});c.assign=function(a,b){if(null===a||"object"!=typeof a)throw TypeError("target is not an object");for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},c.find=function(a,b,c){if(void 0===c&&(c=Array.prototype),a&&"function"==typeof c.find)return c.find.call(a,b);for(var d=0;d<a.length;d++)if(Object.prototype.hasOwnProperty.call(a,d)){var e=a[d];if(b.call(void 0,e,d,a))return e}},c.freeze=d,c.MIME_TYPE=e,c.NAMESPACE=f},198021,(a,b,c)=>{var d=a.r(919296),e=d.find,f=d.NAMESPACE;function g(a){return""!==a}function h(a,b){return a.hasOwnProperty(b)||(a[b]=!0),a}function i(a){return a?Object.keys((a?a.split(/[\t\n\f\r ]+/).filter(g):[]).reduce(h,{})):[]}function j(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])}function k(a,b){var c=a.prototype;if(!(c instanceof b)){function d(){}d.prototype=b.prototype,j(c,d=new d),a.prototype=c=d}c.constructor!=a&&("function"!=typeof a&&console.error("unknown Class:"+a),c.constructor=a)}var l={},m=l.ELEMENT_NODE=1,n=l.ATTRIBUTE_NODE=2,o=l.TEXT_NODE=3,p=l.CDATA_SECTION_NODE=4,q=l.ENTITY_REFERENCE_NODE=5,r=l.ENTITY_NODE=6,s=l.PROCESSING_INSTRUCTION_NODE=7,t=l.COMMENT_NODE=8,u=l.DOCUMENT_NODE=9,v=l.DOCUMENT_TYPE_NODE=10,w=l.DOCUMENT_FRAGMENT_NODE=11,x=l.NOTATION_NODE=12,y={},z={};z[1]="Index size error",y.INDEX_SIZE_ERR=1,z[2]="DOMString size error",y.DOMSTRING_SIZE_ERR=2;var A=(z[3]="Hierarchy request error",y.HIERARCHY_REQUEST_ERR=3);z[4]="Wrong document",y.WRONG_DOCUMENT_ERR=4,z[5]="Invalid character",y.INVALID_CHARACTER_ERR=5,z[6]="No data allowed",y.NO_DATA_ALLOWED_ERR=6,z[7]="No modification allowed",y.NO_MODIFICATION_ALLOWED_ERR=7;var B=(z[8]="Not found",y.NOT_FOUND_ERR=8);z[9]="Not supported",y.NOT_SUPPORTED_ERR=9;var C=(z[10]="Attribute in use",y.INUSE_ATTRIBUTE_ERR=10);function D(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,z[a]),this.message=z[a],Error.captureStackTrace&&Error.captureStackTrace(this,D);return c.code=a,b&&(this.message=this.message+": "+b),c}function E(){}function F(a,b){this._node=a,this._refresh=b,G(this)}function G(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!==b){var c=a._refresh(a._node);if(aq(a,"length",c.length),!a.$$length||c.length<a.$$length)for(var d=c.length;d in a;d++)Object.prototype.hasOwnProperty.call(a,d)&&delete a[d];j(c,a),a._inc=b}}function H(){}function I(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function J(a,b,c,d){if(d?b[I(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e,g,h,i=a.ownerDocument;i&&(d&&Q(i,a,d),e=i,g=a,h=c,e&&e._inc++,h.namespaceURI===f.XMLNS&&(g._nsMap[h.prefix?h.localName:""]=h.value))}}function K(a,b,c){var d=I(b,c);if(d>=0){for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Q(f,a,c),c.ownerElement=null)}}else throw new D(B,Error(a.tagName+"@"+c))}function L(){}function M(){}function N(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function O(a,b){if(b(a))return!0;if(a=a.firstChild)do if(O(a,b))return!0;while(a=a.nextSibling)}function P(){this.ownerDocument=this}function Q(a,b,c,d){a&&a._inc++,c.namespaceURI===f.XMLNS&&delete b._nsMap[c.prefix?c.localName:""]}function R(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f,delete d[d.length]}}}function S(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,b.parentNode=null,b.previousSibling=null,b.nextSibling=null,R(a.ownerDocument,a),b}function T(a){return a&&a.nodeType===M.DOCUMENT_TYPE_NODE}function U(a){return a&&a.nodeType===M.ELEMENT_NODE}function V(a){return a&&a.nodeType===M.TEXT_NODE}function W(a,b){var c=a.childNodes||[];if(e(c,U)||T(b))return!1;var d=e(c,T);return!(b&&d&&c.indexOf(d)>c.indexOf(b))}function X(a,b){var c=a.childNodes||[];if(e(c,function(a){return U(a)&&a!==b}))return!1;var d=e(c,T);return!(b&&d&&c.indexOf(d)>c.indexOf(b))}function Y(a,b,c){var d=a.childNodes||[],f=b.childNodes||[];if(b.nodeType===M.DOCUMENT_FRAGMENT_NODE){var g=f.filter(U);if(g.length>1||e(f,V))throw new D(A,"More than one element or text in fragment");if(1===g.length&&!X(a,c))throw new D(A,"Element in fragment can not be inserted before doctype")}if(U(b)&&!X(a,c))throw new D(A,"Only one element can be added and only after doctype");if(T(b)){if(e(d,function(a){return T(a)&&a!==c}))throw new D(A,"Only one doctype is allowed");var h=e(d,U);if(c&&d.indexOf(h)<d.indexOf(c))throw new D(A,"Doctype can only be inserted before an element")}}function Z(a,b,c,d){if(!(a&&(a.nodeType===M.DOCUMENT_NODE||a.nodeType===M.DOCUMENT_FRAGMENT_NODE||a.nodeType===M.ELEMENT_NODE)))throw new D(A,"Unexpected parent node type "+a.nodeType);if(c&&c.parentNode!==a)throw new D(B,"child not in parent");if(!(b&&(U(b)||V(b)||T(b)||b.nodeType===M.DOCUMENT_FRAGMENT_NODE||b.nodeType===M.COMMENT_NODE||b.nodeType===M.PROCESSING_INSTRUCTION_NODE))||T(b)&&a.nodeType!==M.DOCUMENT_NODE)throw new D(A,"Unexpected node type "+b.nodeType+" for parent node type "+a.nodeType);a.nodeType===M.DOCUMENT_NODE&&(d||function(a,b,c){var d=a.childNodes||[],f=b.childNodes||[];if(b.nodeType===M.DOCUMENT_FRAGMENT_NODE){var g=f.filter(U);if(g.length>1||e(f,V))throw new D(A,"More than one element or text in fragment");if(1===g.length&&!W(a,c))throw new D(A,"Element in fragment can not be inserted before doctype")}if(U(b)&&!W(a,c))throw new D(A,"Only one element can be added and only after doctype");if(T(b)){if(e(d,T))throw new D(A,"Only one doctype is allowed");var h=e(d,U);if(c&&d.indexOf(h)<d.indexOf(c))throw new D(A,"Doctype can only be inserted before an element");if(!c&&h)throw new D(A,"Doctype can not be appended since element is present")}})(a,b,c);var f=b.parentNode;if(f&&f.removeChild(b),b.nodeType===w){var g=b.firstChild;if(null==g)return b;var h=b.lastChild}else g=h=b;var i=c?c.previousSibling:a.lastChild;g.previousSibling=i,h.nextSibling=c,i?i.nextSibling=g:a.firstChild=g,null==c?a.lastChild=h:c.previousSibling=h;do g.parentNode=a,$(g,a.ownerDocument||a);while(g!==h&&(g=g.nextSibling))return R(a.ownerDocument||a,a),b.nodeType==w&&(b.firstChild=b.lastChild=null),b}function $(a,b){if(a.ownerDocument!==b){if(a.ownerDocument=b,a.nodeType===m&&a.attributes)for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c);d&&(d.ownerDocument=b)}for(var e=a.firstChild;e;)$(e,b),e=e.nextSibling}}function _(){this._nsMap={}}function aa(){}function ab(){}function ac(){}function ad(){}function ae(){}function af(){}function ag(){}function ah(){}function ai(){}function aj(){}function ak(){}function al(){}function am(a,b){var c=[],d=9==this.nodeType&&this.documentElement||this,e=d.prefix,f=d.namespaceURI;if(f&&null==e){var e=d.lookupPrefix(f);if(null==e)var g=[{namespace:f,prefix:null}]}return ap(this,c,a,b,g),c.join("")}function an(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!e||"xml"===d&&e===f.XML||e===f.XMLNS)return!1;for(var g=c.length;g--;){var h=c[g];if(h.prefix===d)return h.namespace!==e}return!0}function ao(a,b,c){a.push(" ",b,'="',c.replace(/[<>&"\t\n\r]/g,N),'"')}function ap(a,b,c,d,e){if(e||(e=[]),d){if(!(a=d(a)))return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case m:var g,h=a.attributes,i=h.length,j=a.firstChild,k=a.tagName;c=f.isHTML(a.namespaceURI)||c;var l=k;if(!c&&!a.prefix&&a.namespaceURI){for(var r=0;r<h.length;r++)if("xmlns"===h.item(r).name){g=h.item(r).value;break}if(!g)for(var x=e.length-1;x>=0;x--){var y=e[x];if(""===y.prefix&&y.namespace===a.namespaceURI){g=y.namespace;break}}if(g!==a.namespaceURI)for(var x=e.length-1;x>=0;x--){var y=e[x];if(y.namespace===a.namespaceURI){y.prefix&&(l=y.prefix+":"+k);break}}}b.push("<",l);for(var z=0;z<i;z++){var A=h.item(z);"xmlns"==A.prefix?e.push({prefix:A.localName,namespace:A.value}):"xmlns"==A.nodeName&&e.push({prefix:"",namespace:A.value})}for(var z=0;z<i;z++){var A=h.item(z);if(an(A,c,e)){var B=A.prefix||"",C=A.namespaceURI;ao(b,B?"xmlns:"+B:"xmlns",C),e.push({prefix:B,namespace:C})}ap(A,b,c,d,e)}if(k===l&&an(a,c,e)){var B=a.prefix||"",C=a.namespaceURI;ao(b,B?"xmlns:"+B:"xmlns",C),e.push({prefix:B,namespace:C})}if(j||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(k)){if(b.push(">"),c&&/^script$/i.test(k))for(;j;)j.data?b.push(j.data):ap(j,b,c,d,e.slice()),j=j.nextSibling;else for(;j;)ap(j,b,c,d,e.slice()),j=j.nextSibling;b.push("</",l,">")}else b.push("/>");return;case u:case w:for(var j=a.firstChild;j;)ap(j,b,c,d,e.slice()),j=j.nextSibling;return;case n:return ao(b,a.name,a.value);case o:return b.push(a.data.replace(/[<&>]/g,N));case p:return b.push("<![CDATA[",a.data,"]]>");case t:return b.push("<!--",a.data,"-->");case v:var D=a.publicId,E=a.systemId;if(b.push("<!DOCTYPE ",a.name),D)b.push(" PUBLIC ",D),E&&"."!=E&&b.push(" ",E),b.push(">");else if(E&&"."!=E)b.push(" SYSTEM ",E,">");else{var F=a.internalSubset;F&&b.push(" [",F,"]"),b.push(">")}return;case s:return b.push("<?",a.target," ",a.data,"?>");case q:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function aq(a,b,c){a[b]=c}z[11]="Invalid state",y.INVALID_STATE_ERR=11,z[12]="Syntax error",y.SYNTAX_ERR=12,z[13]="Invalid modification",y.INVALID_MODIFICATION_ERR=13,z[14]="Invalid namespace",y.NAMESPACE_ERR=14,z[15]="Invalid access",y.INVALID_ACCESS_ERR=15,D.prototype=Error.prototype,j(y,D),E.prototype={length:0,item:function(a){return a>=0&&a<this.length?this[a]:null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)ap(this[d],c,a,b);return c.join("")},filter:function(a){return Array.prototype.filter.call(this,a)},indexOf:function(a){return Array.prototype.indexOf.call(this,a)}},F.prototype.item=function(a){return G(this),this[a]||null},k(F,E),H.prototype={length:0,item:E.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new D(C);var c=this.getNamedItem(a.nodeName);return J(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new D(C);return b=this.getNamedItemNS(a.namespaceURI,a.localName),J(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return K(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return K(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},L.prototype={hasFeature:function(a,b){return!0},createDocument:function(a,b,c){var d=new P;if(d.implementation=this,d.childNodes=new E,d.doctype=c||null,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new af;return d.name=a,d.nodeName=a,d.publicId=b||"",d.systemId=c||"",d}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Z(this,a,b)},replaceChild:function(a,b){Z(this,a,b,Y),b&&this.removeChild(b)},removeChild:function(a){return S(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return function a(b,c,d){var e=new c.constructor;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var g=c[f];"object"!=typeof g&&g!=e[f]&&(e[f]=g)}switch(c.childNodes&&(e.childNodes=new E),e.ownerDocument=b,e.nodeType){case m:var h=c.attributes,i=e.attributes=new H,j=h.length;i._ownerElement=e;for(var k=0;k<j;k++)e.setAttributeNode(a(b,h.item(k),!0));break;case n:d=!0}if(d)for(var l=c.firstChild;l;)e.appendChild(a(b,l,d)),l=l.nextSibling;return e}(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==o&&a.nodeType==o?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c){for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)&&c[d]===a)return d}b=b.nodeType==n?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&Object.prototype.hasOwnProperty.call(c,a))return c[a];b=b.nodeType==n?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}},j(l,M),j(l,M.prototype),P.prototype={nodeName:"#document",nodeType:u,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==w){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return Z(this,a,b),$(a,this),null===this.documentElement&&a.nodeType===m&&(this.documentElement=a),a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),S(this,a)},replaceChild:function(a,b){Z(this,a,b,Y),$(a,this),b&&this.removeChild(b),U(a)&&(this.documentElement=a)},importNode:function(a,b){return function a(b,c,d){var e;switch(c.nodeType){case m:(e=c.cloneNode(!1)).ownerDocument=b;case w:break;case n:d=!0}if(e||(e=c.cloneNode(!1)),e.ownerDocument=b,e.parentNode=null,d)for(var f=c.firstChild;f;)e.appendChild(a(b,f,d)),f=f.nextSibling;return e}(this,a,b)},getElementById:function(a){var b=null;return O(this.documentElement,function(c){if(c.nodeType==m&&c.getAttribute("id")==a)return b=c,!0}),b},getElementsByClassName:function(a){var b=i(a);return new F(this,function(c){var d=[];return b.length>0&&O(c.documentElement,function(e){if(e!==c&&e.nodeType===m){var f=e.getAttribute("class");if(f){var g=a===f;if(!g){var h=i(f);g=b.every(function(a){return h&&-1!==h.indexOf(a)})}g&&d.push(e)}}}),d})},createElement:function(a){var b=new _;return b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.localName=a,b.childNodes=new E,(b.attributes=new H)._ownerElement=b,b},createDocumentFragment:function(){var a=new aj;return a.ownerDocument=this,a.childNodes=new E,a},createTextNode:function(a){var b=new ac;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new ad;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new ae;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new ak;return c.ownerDocument=this,c.tagName=c.nodeName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new aa;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new ai;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new _,d=b.split(":"),e=c.attributes=new H;return c.childNodes=new E,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new aa,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},k(P,M),_.prototype={nodeType:m,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===w?this.insertBefore(a,null):(a.parentNode&&a.parentNode.removeChild(a),a.parentNode=this,a.previousSibling=this.lastChild,a.nextSibling=null,a.previousSibling?a.previousSibling.nextSibling=a:this.firstChild=a,this.lastChild=a,R(this.ownerDocument,this,a),$(a,this.ownerDocument||this),a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new F(this,function(b){var c=[];return O(b,function(d){d!==b&&d.nodeType==m&&("*"===a||d.tagName==a)&&c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new F(this,function(c){var d=[];return O(c,function(e){e!==c&&e.nodeType===m&&("*"===a||e.namespaceURI===a)&&("*"===b||e.localName==b)&&d.push(e)}),d})}},P.prototype.getElementsByTagName=_.prototype.getElementsByTagName,P.prototype.getElementsByTagNameNS=_.prototype.getElementsByTagNameNS,k(_,M),aa.prototype.nodeType=n,k(aa,M),ab.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw Error(z[A])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){c=this.data.substring(0,a)+c+this.data.substring(a+b),this.nodeValue=this.data=c,this.length=c.length}},k(ab,M),ac.prototype={nodeName:"#text",nodeType:o,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},k(ac,ab),ad.prototype={nodeName:"#comment",nodeType:t},k(ad,ab),ae.prototype={nodeName:"#cdata-section",nodeType:p},k(ae,ab),af.prototype.nodeType=v,k(af,M),ag.prototype.nodeType=x,k(ag,M),ah.prototype.nodeType=r,k(ah,M),ai.prototype.nodeType=q,k(ai,M),aj.prototype.nodeName="#document-fragment",aj.prototype.nodeType=w,k(aj,M),ak.prototype.nodeType=s,k(ak,M),al.prototype.serializeToString=function(a,b,c){return am.call(a,b,c)},M.prototype.toString=am;try{Object.defineProperty&&(Object.defineProperty(F.prototype,"length",{get:function(){return G(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return function a(b){switch(b.nodeType){case m:case w:var c=[];for(b=b.firstChild;b;)7!==b.nodeType&&8!==b.nodeType&&c.push(a(b)),b=b.nextSibling;return c.join("");default:return b.nodeValue}}(this)},set:function(a){switch(this.nodeType){case m:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),aq=function(a,b,c){a["$$"+b]=c})}catch(a){}c.DocumentType=af,c.DOMException=D,c.DOMImplementation=L,c.Element=_,c.Node=M,c.NodeList=E,c.XMLSerializer=al},242066,(a,b,c)=>{"use strict";var d=a.r(919296).freeze;c.XML_ENTITIES=d({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),c.HTML_ENTITIES=d({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"\uD835\uDD04",afr:"\uD835\uDD1E",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"\uD835\uDD38",aopf:"\uD835\uDD52",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"\uD835\uDC9C",ascr:"\uD835\uDCB6",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"\uD835\uDD05",bfr:"\uD835\uDD1F",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"\uD835\uDD39",bopf:"\uD835\uDD53",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"\uD835\uDCB7",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"\uD835\uDD20",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"\uD835\uDD54",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"\uD835\uDC9E",cscr:"\uD835\uDCB8",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"\uD835\uDD07",dfr:"\uD835\uDD21",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"\uD835\uDD3B",dopf:"\uD835\uDD55",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"\uD835\uDC9F",dscr:"\uD835\uDCB9",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"\uD835\uDD08",efr:"\uD835\uDD22",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"\uD835\uDD3C",eopf:"\uD835\uDD56",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"\uD835\uDD09",ffr:"\uD835\uDD23",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"\uD835\uDD3D",fopf:"\uD835\uDD57",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"\uD835\uDCBB",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"\uD835\uDD0A",gfr:"\uD835\uDD24",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"\uD835\uDD3E",gopf:"\uD835\uDD58",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"\uD835\uDCA2",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"\uD835\uDD25",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"\uD835\uDD59",horbar:"",HorizontalLine:"",Hscr:"",hscr:"\uD835\uDCBD",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"\uD835\uDD26",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"\uD835\uDD40",iopf:"\uD835\uDD5A",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"\uD835\uDCBE",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"\uD835\uDD0D",jfr:"\uD835\uDD27",jmath:"",Jopf:"\uD835\uDD41",jopf:"\uD835\uDD5B",Jscr:"\uD835\uDCA5",jscr:"\uD835\uDCBF",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"\uD835\uDD0E",kfr:"\uD835\uDD28",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"\uD835\uDD42",kopf:"\uD835\uDD5C",Kscr:"\uD835\uDCA6",kscr:"\uD835\uDCC0",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"\uD835\uDD0F",lfr:"\uD835\uDD29",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"\uD835\uDD43",lopf:"\uD835\uDD5D",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"\uD835\uDCC1",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"\uD835\uDD10",mfr:"\uD835\uDD2A",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"\uD835\uDD44",mopf:"\uD835\uDD5E",mp:"",Mscr:"",mscr:"\uD835\uDCC2",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"\uD835\uDD11",nfr:"\uD835\uDD2B",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"\uD835\uDD5F",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"\uD835\uDCA9",nscr:"\uD835\uDCC3",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"\uD835\uDD12",ofr:"\uD835\uDD2C",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"\uD835\uDD46",oopf:"\uD835\uDD60",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"\uD835\uDCAA",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"\uD835\uDD13",pfr:"\uD835\uDD2D",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"\uD835\uDD61",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"\uD835\uDCAB",pscr:"\uD835\uDCC5",Psi:"",psi:"",puncsp:"",Qfr:"\uD835\uDD14",qfr:"\uD835\uDD2E",qint:"",Qopf:"",qopf:"\uD835\uDD62",qprime:"",Qscr:"\uD835\uDCAC",qscr:"\uD835\uDCC6",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"\uD835\uDD2F",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"\uD835\uDD63",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"\uD835\uDCC7",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"\uD835\uDD16",sfr:"\uD835\uDD30",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"\uD835\uDD4A",sopf:"\uD835\uDD64",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"\uD835\uDCAE",sscr:"\uD835\uDCC8",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"\uD835\uDD17",tfr:"\uD835\uDD31",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"\uD835\uDD4B",topf:"\uD835\uDD65",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"\uD835\uDCAF",tscr:"\uD835\uDCC9",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"\uD835\uDD18",ufr:"\uD835\uDD32",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"\uD835\uDD4C",uopf:"\uD835\uDD66",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"\uD835\uDCB0",uscr:"\uD835\uDCCA",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"\uD835\uDD19",vfr:"\uD835\uDD33",vltri:"",vnsub:"",vnsup:"",Vopf:"\uD835\uDD4D",vopf:"\uD835\uDD67",vprop:"",vrtri:"",Vscr:"\uD835\uDCB1",vscr:"\uD835\uDCCB",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"\uD835\uDD1A",wfr:"\uD835\uDD34",Wopf:"\uD835\uDD4E",wopf:"\uD835\uDD68",wp:"",wr:"",wreath:"",Wscr:"\uD835\uDCB2",wscr:"\uD835\uDCCC",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"\uD835\uDD1B",xfr:"\uD835\uDD35",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"\uD835\uDD4F",xopf:"\uD835\uDD69",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"\uD835\uDCB3",xscr:"\uD835\uDCCD",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"\uD835\uDD1C",yfr:"\uD835\uDD36",YIcy:"",yicy:"",Yopf:"\uD835\uDD50",yopf:"\uD835\uDD6A",Yscr:"\uD835\uDCB4",yscr:"\uD835\uDCCE",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"\uD835\uDD37",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"\uD835\uDD6B",Zscr:"\uD835\uDCB5",zscr:"\uD835\uDCCF",zwj:"",zwnj:""}),c.entityMap=c.HTML_ENTITIES},747789,(a,b,c)=>{var d=a.r(919296).NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),g=RegExp("^"+e.source+f.source+"*(?::"+e.source+f.source+"*)?$");function h(a,b){this.message=a,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,h)}function i(){}function j(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function k(a,b,c){for(var e=a.tagName,f=null,g=a.length;g--;){var h=a[g],i=h.qName,j=h.value,k=i.indexOf(":");if(k>0)var m=h.prefix=i.slice(0,k),n=i.slice(k+1),o="xmlns"===m&&n;else n=i,m=null,o="xmlns"===i&&"";h.localName=n,!1!==o&&(null==f&&(f={},l(c,c={})),c[o]=f[o]=j,h.uri=d.XMLNS,b.startPrefixMapping(o,j))}for(var g=a.length;g--;){var m=(h=a[g]).prefix;m&&("xml"===m&&(h.uri=d.XML),"xmlns"!==m&&(h.uri=c[m||""]))}var k=e.indexOf(":");k>0?(m=a.prefix=e.slice(0,k),n=a.localName=e.slice(k+1)):(m=null,n=a.localName=e);var p=a.uri=c[m||""];if(b.startElement(p,n,e,a),!a.closed)return a.currentNSMap=c,a.localNSMap=f,!0;if(b.endElement(p,n,e),f)for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.endPrefixMapping(m)}function l(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])}function m(){this.attributeNames={}}h.prototype=Error(),h.prototype.name=h.name,i.prototype={parse:function(a,b,c){var e=this.domBuilder;e.startDocument(),l(b,b={}),function(a,b,c,e,f){function g(a){var b,d=a.slice(1,-1);return Object.hasOwnProperty.call(c,d)?c[d]:"#"===d.charAt(0)?(b=parseInt(d.substr(1).replace("x","0x")))>65535?String.fromCharCode(55296+((b-=65536)>>10),56320+(1023&b)):String.fromCharCode(b):(f.error("entity not found:"+a),a)}function i(b){if(b>t){var c=a.substring(t,b).replace(/&#?\w+;/g,g);q&&l(t),e.characters(c,0,b-t),t=b}}function l(b,c){for(;b>=o&&(c=p.exec(a));)o=(n=c.index)+c[0].length,q.lineNumber++;q.columnNumber=b-n+1}for(var n=0,o=0,p=/.*(?:\r\n?|\n)|.*$/g,q=e.locator,r=[{currentNSMap:b}],s={},t=0;;){try{var u=a.indexOf("<",t);if(u<0){if(!a.substr(t).match(/^\s*$/)){var v=e.doc,w=v.createTextNode(a.substr(t));v.appendChild(w),e.currentElement=w}return}switch(u>t&&i(u),a.charAt(u+1)){case"/":var x=a.indexOf(">",u+3),y=a.substring(u+2,x).replace(/[ \t\n\r]+$/g,""),z=r.pop();x<0?(y=a.substring(u+2).replace(/[\s<].*/,""),f.error("end tag name: "+y+" is not complete:"+z.tagName),x=u+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),f.error("end tag name: "+y+" maybe not complete"),x=u+1+y.length);var A=z.localNSMap,B=z.tagName==y;if(B||z.tagName&&z.tagName.toLowerCase()==y.toLowerCase()){if(e.endElement(z.uri,z.localName,y),A)for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&e.endPrefixMapping(C);B||f.fatalError("end tag name: "+y+" is not match the current start tagName:"+z.tagName)}else r.push(z);x++;break;case"?":q&&l(u),x=function(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(e)return e[0].length,c.processingInstruction(e[1],e[2]),d+2}return -1}(a,u,e);break;case"!":q&&l(u),x=function(a,b,c,d){if("-"===a.charAt(b+2)){if("-"===a.charAt(b+3)){var e=a.indexOf("-->",b+4);if(e>b)return c.comment(a,b+4,e-b-4),e+3;d.error("Unclosed comment")}}else{if("CDATA["==a.substr(b+3,6)){var e=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,e-b-9),c.endCDATA(),e+3}var f=function(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}(a,b),g=f.length;if(g>1&&/!doctype/i.test(f[0][0])){var h=f[1][0],i=!1,j=!1;g>3&&(/^public$/i.test(f[2][0])?(i=f[3][0],j=g>4&&f[4][0]):/^system$/i.test(f[2][0])&&(j=f[3][0]));var k=f[g-1];return c.startDTD(h,i,j),c.endDTD(),k.index+k[0].length}}return -1}(a,u,e,f);break;default:q&&l(u);var D=new m,E=r[r.length-1].currentNSMap,x=function(a,b,c,e,f,g){function h(a,b,d){c.attributeNames.hasOwnProperty(a)&&g.fatalError("Attribute "+a+" redefined"),c.addValue(a,b.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,f),d)}for(var i,j,k=++b,l=0;;){var m=a.charAt(k);switch(m){case"=":if(1===l)i=a.slice(b,k),l=3;else if(2===l)l=3;else throw Error("attribute equal must after attrName");break;case"'":case'"':if(3===l||1===l)if(1===l&&(g.warning('attribute value must after "="'),i=a.slice(b,k)),b=k+1,(k=a.indexOf(m,b))>0)h(i,j=a.slice(b,k),b-1),l=5;else throw Error("attribute value no end '"+m+"' match");else if(4==l)h(i,j=a.slice(b,k),b),g.warning('attribute "'+i+'" missed start quot('+m+")!!"),b=k+1,l=5;else throw Error('attribute value must after "="');break;case"/":switch(l){case 0:c.setTagName(a.slice(b,k));case 5:case 6:case 7:l=7,c.closed=!0;case 4:case 1:break;case 2:c.closed=!0;break;default:throw Error("attribute invalid close char('/')")}break;case"":return g.error("unexpected end of input"),0==l&&c.setTagName(a.slice(b,k)),k;case">":switch(l){case 0:c.setTagName(a.slice(b,k));case 5:case 6:case 7:break;case 4:case 1:"/"===(j=a.slice(b,k)).slice(-1)&&(c.closed=!0,j=j.slice(0,-1));case 2:2===l&&(j=i),4==l?(g.warning('attribute "'+j+'" missed quot(")!'),h(i,j,b)):(d.isHTML(e[""])&&j.match(/^(?:disabled|checked|selected)$/i)||g.warning('attribute "'+j+'" missed value!! "'+j+'" instead!!'),h(j,j,b));break;case 3:throw Error("attribute value missed!!")}return k;case"":m=" ";default:if(m<=" ")switch(l){case 0:c.setTagName(a.slice(b,k)),l=6;break;case 1:i=a.slice(b,k),l=2;break;case 4:var j=a.slice(b,k);g.warning('attribute "'+j+'" missed quot(")!!'),h(i,j,b);case 5:l=6}else switch(l){case 2:c.tagName,d.isHTML(e[""])&&i.match(/^(?:disabled|checked|selected)$/i)||g.warning('attribute "'+i+'" missed value!! "'+i+'" instead2!!'),h(i,i,b),b=k,l=1;break;case 5:g.warning('attribute space is required"'+i+'"!!');case 6:l=1,b=k;break;case 3:l=4,b=k;break;case 7:throw Error("elements closed character '/' and '>' must be connected to")}}k++}}(a,u,D,E,g,f),F=D.length;if(!D.closed&&function(a,b,c,d){var e=d[c];return null==e&&((e=a.lastIndexOf("</"+c+">"))<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}(a,x,D.tagName,s)&&(D.closed=!0,c.nbsp||f.warning("unclosed xml attribute")),q&&F){for(var G=j(q,{}),H=0;H<F;H++){var I=D[H];l(I.offset),I.locator=j(q,{})}e.locator=G,k(D,e,E)&&r.push(D),e.locator=q}else k(D,e,E)&&r.push(D);d.isHTML(D.uri)&&!D.closed?x=function(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)||(g=g.replace(/&#?\w+;/g,d)),e.characters(g,0,g.length),f}return b+1}(a,x,D.tagName,g,e):x++}}catch(a){if(a instanceof h)throw a;f.error("element parse error: "+a),x=-1}x>t?t=x:i(Math.max(u,t)+1)}}(a,b,c,e,this.errorHandler),e.endDocument()}},m.prototype={setTagName:function(a){if(!g.test(a))throw Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,b,c){if(!g.test(a))throw Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}},c.XMLReader=i,c.ParseError=h},729515,(a,b,c)=>{var d=a.r(919296),e=a.r(198021),f=a.r(242066),g=a.r(747789),h=e.DOMImplementation,i=d.NAMESPACE,j=g.ParseError,k=g.XMLReader;function l(a){return a.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function m(a){this.options=a||{locator:{}}}function n(){this.cdata=!1}function o(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function p(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function q(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function r(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}m.prototype.parseFromString=function(a,b){var c=this.options,d=new k,e=c.domBuilder||new n,g=c.errorHandler,h=c.locator,j=c.xmlns||{},m=/\/x?html?$/.test(b),o=m?f.HTML_ENTITIES:f.XML_ENTITIES;h&&e.setDocumentLocator(h),d.errorHandler=function(a,b,c){if(!a){if(b instanceof n)return b;a=b}var d={},e=a instanceof Function;function f(b){var f=a[b];!f&&e&&(f=2==a.length?function(c){a(b,c)}:a),d[b]=f&&function(a){f("[xmldom "+b+"]	"+a+p(c))}||function(){}}return c=c||{},f("warning"),f("error"),f("fatalError"),d}(g,e,h),d.domBuilder=c.domBuilder||e,m&&(j[""]=i.HTML),j.xml=j.xml||i.XML;var q=c.normalizeLineEndings||l;return a&&"string"==typeof a?d.parse(q(a),j,o):d.errorHandler.error("invalid doc source"),e.doc},n.prototype={startDocument:function(){this.doc=new h().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc,f=e.createElementNS(a,c||b),g=d.length;r(this,f),this.currentElement=f,this.locator&&o(this.locator,f);for(var h=0;h<g;h++){var a=d.getURI(h),i=d.getValue(h),c=d.getQName(h),j=e.createAttributeNS(a,c);this.locator&&o(d.getLocator(h),j),j.value=j.nodeValue=i,f.setAttributeNode(j)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName,this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&o(this.locator,c),r(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=q.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else var d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&o(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=q.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&o(this.locator,d),r(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&o(this.locator,e),r(this,e),this.doc.doctype=e}},warning:function(a){console.warn("[xmldom warning]	"+a,p(this.locator))},error:function(a){console.error("[xmldom error]	"+a,p(this.locator))},fatalError:function(a){throw new j(a,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){n.prototype[a]=function(){return null}}),c.__DOMHandler=n,c.normalizeLineEndings=l,c.DOMParser=m},633524,(a,b,c)=>{var d=a.r(198021);c.DOMImplementation=d.DOMImplementation,c.XMLSerializer=d.XMLSerializer,c.DOMParser=a.r(729515).DOMParser},485848,(a,b,c)=>{b.exports={getUint64:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength);return c.getBigUint64?(b=c.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(b):b:0x100000000*c.getUint32(0)+c.getUint32(4)},MAX_UINT32:0x100000000}},792301,(a,b,c)=>{var d=a.r(485848).getUint64;b.exports=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},e=12;0===c.version?(c.earliestPresentationTime=b.getUint32(e),c.firstOffset=b.getUint32(e+4),e+=8):(c.earliestPresentationTime=d(a.subarray(e)),c.firstOffset=d(a.subarray(e+8)),e+=16),e+=2;var f=b.getUint16(e);for(e+=2;f>0;e+=12,f--)c.references.push({referenceType:(128&a[e])>>>7,referencedSize:0x7fffffff&b.getUint32(e),subsegmentDuration:b.getUint32(e+4),startsWithSap:!!(128&a[e+8]),sapType:(112&a[e+8])>>>4,sapDeltaTime:0xfffffff&b.getUint32(e+8)});return c}},561462,(a,b,c)=>{var d,e,f,g;d=function(a){return 9e4*a},e=function(a,b){return a*b},f=function(a){return a/9e4},b.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:d,secondsToAudioTs:e,videoTsToSeconds:f,audioTsToSeconds:g=function(a,b){return a/b},audioTsToVideoTs:function(a,b){return d(g(a,b))},videoTsToAudioTs:function(a,b){return e(f(a),b)},metadataTsToSeconds:function(a,b,c){return f(c?a:a-b)}}},12868,a=>{"use strict";let b,c,d,e,f,g;var h,i,j,k=a.i(187924),l=a.i(572131),m=a.i(255565),n=a.i(925125),o=a.i(470671),p=a.i(749281),q=a.i(384818),q=q,r=a.i(276130),s=a.i(835371),t=a.i(27730),u=a.i(463100),u=u,v=a.i(327387),w=a.i(268186),x=a.i(539705);let y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};var z=a.i(124958),A=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:y}))});let B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"};var C=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:B}))});let D={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M347.6 528.95l383.2 301.02c14.25 11.2 35.2 1.1 35.2-16.95V210.97c0-18.05-20.95-28.14-35.2-16.94L347.6 495.05a21.53 21.53 0 000 33.9M330 864h-64a8 8 0 01-8-8V168a8 8 0 018-8h64a8 8 0 018 8v688a8 8 0 01-8 8"}}]},name:"step-backward",theme:"outlined"};var E=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:D}))});let F={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M676.4 528.95L293.2 829.97c-14.25 11.2-35.2 1.1-35.2-16.95V210.97c0-18.05 20.95-28.14 35.2-16.94l383.2 301.02a21.53 21.53 0 010 33.9M694 864h64a8 8 0 008-8V168a8 8 0 00-8-8h-64a8 8 0 00-8 8v688a8 8 0 008 8"}}]},name:"step-forward",theme:"outlined"};var G=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:F}))});let H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};var I=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:H}))});let J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};var K=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:J}))});let L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892.1 737.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344zm174 132H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zM625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1z"}}]},name:"sound",theme:"filled"};var M=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:L}))});let N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};var O=l.forwardRef(function(a,b){return l.createElement(z.default,(0,x.default)({},a,{ref:b,icon:N}))}),P=a.i(768618),Q=a.i(313575),R=a.i(859750),S=a.i(540120),T=a.i(672497),U=a.i(255682),V=a.i(15751),W=a.i(577518),X="https://example.com";let Y=function(a,b){if(/^[a-z]+:/i.test(b))return b;/^data:/.test(a)&&(a=S.default.location&&S.default.location.href||"");var c=/^\/\//.test(a),d=!S.default.location&&!/\/\//i.test(a),e=new URL(b,a=new S.default.URL(a,S.default.location||X));return d?e.href.slice(X.length):c?e.href.slice(e.protocol.length):e.href};var Z=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2==arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}();function $(a){for(var b=S.default.atob?S.default.atob(a):Buffer.from(a,"base64").toString("binary"),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c}class _ extends Z{constructor(){super(),this.buffer=""}push(a){let b;for(this.buffer+=a,b=this.buffer.indexOf("\n");b>-1;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)}}let aa=function(a){let b=/([0-9.]*)?@?([0-9.]*)?/.exec(a||""),c={};return b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),c},ab=function(a){let b,c={};if(!a)return c;let d=a.split(RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),e=d.length;for(;e--;)""!==d[e]&&((b=/([^=]*)=(.*)/.exec(d[e]).slice(1))[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),c[b[0]]=b[1]);return c},ac=a=>{let b=a.split("x"),c={};return b[0]&&(c.width=parseInt(b[0],10)),b[1]&&(c.height=parseInt(b[1],10)),c};class ad extends Z{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(a){let b,c;0===(a=a.trim()).length||("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce((b,c)=>{let d=c(a);return d===a?b:b.concat([d])},[a]).forEach(a=>{for(let b=0;b<this.customParsers.length;b++)if(this.customParsers[b].call(this,a))return;if(0!==a.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:a.slice(1)});if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(b=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a)){c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),this.trigger("data",c);return}if(b=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a)){c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),this.trigger("data",c);return}if(b=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a)){c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),this.trigger("data",c);return}if(b=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a)){c={type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),this.trigger("data",c);return}if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a)){c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),this.trigger("data",c);return}if(b=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a)){c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),this.trigger("data",c);return}if(b=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a)){c=(0,W.default)(aa(b[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",c);return}if(b=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a)){c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),this.trigger("data",c);return}if(b=/^#EXT-X-MAP:(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){let a=ab(b[1]);a.URI&&(c.uri=a.URI),a.BYTERANGE&&(c.byterange=aa(a.BYTERANGE))}this.trigger("data",c);return}if(b=/^#EXT-X-STREAM-INF:(.*)$/.exec(a)){c={type:"tag",tagType:"stream-inf"},b[1]&&(c.attributes=ab(b[1]),c.attributes.RESOLUTION&&(c.attributes.RESOLUTION=ac(c.attributes.RESOLUTION)),c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["FRAME-RATE"]&&(c.attributes["FRAME-RATE"]=parseFloat(c.attributes["FRAME-RATE"])),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))),this.trigger("data",c);return}if(b=/^#EXT-X-MEDIA:(.*)$/.exec(a)){c={type:"tag",tagType:"media"},b[1]&&(c.attributes=ab(b[1])),this.trigger("data",c);return}if(b=/^#EXT-X-ENDLIST/.exec(a))return void this.trigger("data",{type:"tag",tagType:"endlist"});if(b=/^#EXT-X-DISCONTINUITY/.exec(a))return void this.trigger("data",{type:"tag",tagType:"discontinuity"});if(b=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a)){c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),this.trigger("data",c);return}if(b=/^#EXT-X-KEY:(.*)$/.exec(a)){c={type:"tag",tagType:"key"},b[1]&&(c.attributes=ab(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),this.trigger("data",c);return}if(b=/^#EXT-X-START:(.*)$/.exec(a)){c={type:"tag",tagType:"start"},b[1]&&(c.attributes=ab(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),this.trigger("data",c);return}if(b=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a)){c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",this.trigger("data",c);return}if(b=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a)){c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",this.trigger("data",c);return}if(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a)){c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",this.trigger("data",c);return}if((b=/^#EXT-X-SKIP:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"skip"}).attributes=ab(b[1]),c.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(c.attributes["SKIPPED-SEGMENTS"]=parseInt(c.attributes["SKIPPED-SEGMENTS"],10)),c.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(c.attributes["RECENTLY-REMOVED-DATERANGES"]=c.attributes["RECENTLY-REMOVED-DATERANGES"].split("	")),this.trigger("data",c);return}if((b=/^#EXT-X-PART:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"part"}).attributes=ab(b[1]),["DURATION"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),c.attributes.hasOwnProperty("BYTERANGE")&&(c.attributes.byterange=aa(c.attributes.BYTERANGE)),this.trigger("data",c);return}if((b=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"server-control"}).attributes=ab(b[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),this.trigger("data",c);return}if((b=/^#EXT-X-PART-INF:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"part-inf"}).attributes=ab(b[1]),["PART-TARGET"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),this.trigger("data",c);return}if((b=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"preload-hint"}).attributes=ab(b[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(c.attributes.hasOwnProperty(a)){c.attributes[a]=parseInt(c.attributes[a],10);let b="BYTERANGE-LENGTH"===a?"length":"offset";c.attributes.byterange=c.attributes.byterange||{},c.attributes.byterange[b]=c.attributes[a],delete c.attributes[a]}}),this.trigger("data",c);return}if((b=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"rendition-report"}).attributes=ab(b[1]),["LAST-MSN","LAST-PART"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseInt(c.attributes[a],10))}),this.trigger("data",c);return}if((b=/^#EXT-X-DATERANGE:(.*)$/.exec(a))&&b[1]){(c={type:"tag",tagType:"daterange"}).attributes=ab(b[1]),["ID","CLASS"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=String(c.attributes[a]))}),["START-DATE","END-DATE"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=new Date(c.attributes[a]))}),["DURATION","PLANNED-DURATION"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["END-ON-NEXT"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/i.test(c.attributes[a]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=c.attributes[a].toString(16))});let a=/^X-([A-Z]+-)+[A-Z]+$/;for(let b in c.attributes){if(!a.test(b))continue;let d=/[0-9A-Fa-f]{6}/g.test(c.attributes[b]),e=/^\d+(\.\d+)?$/.test(c.attributes[b]);c.attributes[b]=d?c.attributes[b].toString(16):e?parseFloat(c.attributes[b]):String(c.attributes[b])}this.trigger("data",c);return}if(b=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(a))return void this.trigger("data",{type:"tag",tagType:"independent-segments"});if(b=/^#EXT-X-I-FRAMES-ONLY/.exec(a))return void this.trigger("data",{type:"tag",tagType:"i-frames-only"});if(b=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(a)){(c={type:"tag",tagType:"content-steering"}).attributes=ab(b[1]),this.trigger("data",c);return}if(b=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(a)){(c={type:"tag",tagType:"i-frame-playlist"}).attributes=ab(b[1]),c.attributes.URI&&(c.uri=c.attributes.URI),c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes.RESOLUTION&&(c.attributes.RESOLUTION=ac(c.attributes.RESOLUTION)),c.attributes["AVERAGE-BANDWIDTH"]&&(c.attributes["AVERAGE-BANDWIDTH"]=parseInt(c.attributes["AVERAGE-BANDWIDTH"],10)),c.attributes["FRAME-RATE"]&&(c.attributes["FRAME-RATE"]=parseFloat(c.attributes["FRAME-RATE"])),this.trigger("data",c);return}if(b=/^#EXT-X-DEFINE:(.*)$/.exec(a)){(c={type:"tag",tagType:"define"}).attributes=ab(b[1]),this.trigger("data",c);return}this.trigger("data",{type:"tag",data:a.slice(4)})}))}addParser({expression:a,customType:b,dataParser:c,segment:d}){"function"!=typeof c&&(c=a=>a),this.customParsers.push(e=>{if(a.exec(e))return this.trigger("data",{type:"custom",data:c(e),customType:b,segment:d}),!0})}addTagMapper({expression:a,map:b}){this.tagMappers.push(c=>a.test(c)?b(c):c)}}let ae=function(a){let b={};return Object.keys(a).forEach(function(c){b[c.toLowerCase().replace(/-(\w)/g,a=>a[1].toUpperCase())]=a[c]}),b},af=function(a){let{serverControl:b,targetDuration:c,partTargetDuration:d}=a;if(!b)return;let e="#EXT-X-SERVER-CONTROL",f="holdBack",g="partHoldBack",h=c&&3*c,i=d&&2*d;c&&!b.hasOwnProperty(f)&&(b[f]=h,this.trigger("info",{message:`${e} defaulting HOLD-BACK to targetDuration * 3 (${h}).`})),h&&b[f]<h&&(this.trigger("warn",{message:`${e} clamping HOLD-BACK (${b[f]}) to targetDuration * 3 (${h})`}),b[f]=h),d&&!b.hasOwnProperty(g)&&(b[g]=3*d,this.trigger("info",{message:`${e} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${b[g]}).`})),d&&b[g]<i&&(this.trigger("warn",{message:`${e} clamping PART-HOLD-BACK (${b[g]}) to partTargetDuration * 2 (${i}).`}),b[g]=i)};class ag extends Z{constructor(a={}){let b,c;super(),this.lineStream=new _,this.parseStream=new ad,this.lineStream.pipe(this.parseStream),this.mainDefinitions=a.mainDefinitions||{},this.params=new URL(a.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const d=this,e=[];let f={},g=!1;const h=function(){},i={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let j=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let k=0,l=0;const m={};this.on("end",()=>{!f.uri&&(f.parts||f.preloadHints)&&(!f.map&&b&&(f.map=b),!f.key&&c&&(f.key=c),f.timeline||"number"!=typeof j||(f.timeline=j),this.manifest.preloadSegment=f)}),this.parseStream.on("data",function(a){let n,o;if(d.manifest.definitions){for(let b in d.manifest.definitions)if(a.uri&&(a.uri=a.uri.replace(`{$${b}}`,d.manifest.definitions[b])),a.attributes)for(let c in a.attributes)"string"==typeof a.attributes[c]&&(a.attributes[c]=a.attributes[c].replace(`{$${b}}`,d.manifest.definitions[b]))}({tag(){(({version(){a.version&&(this.manifest.version=a.version)},"allow-cache"(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let b={};"length"in a&&(f.byterange=b,b.length=a.length,"offset"in a||(a.offset=k)),"offset"in a&&(f.byterange=b,b.offset=a.offset),k=b.offset+b.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.title&&(f.title=a.title),a.duration>0&&(f.duration=a.duration),0===a.duration&&(f.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=e},key(){if(!a.attributes)return void this.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===a.attributes.METHOD){c=null;return}if(!a.attributes.URI)return void this.trigger("warn",{message:"ignoring key declaration without URI"});if("com.apple.streamingkeydelivery"===a.attributes.KEYFORMAT){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:a.attributes};return}if("com.microsoft.playready"===a.attributes.KEYFORMAT){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:a.attributes.URI};return}"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===a.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(a.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23))?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:$(a.attributes.URI.split(",")[1])}):this.trigger("warn",{message:"invalid key ID provided for Widevine"}):(a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},void 0!==a.attributes.IV&&(c.iv=a.attributes.IV))},"media-sequence"(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence"(){isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,j=a.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type"(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map(){b={},a.uri&&(b.uri=a.uri),a.byterange&&(b.byterange=a.byterange),c&&(b.key=c)},"stream-inf"(){(this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||i,a.attributes)?(f.attributes||(f.attributes={}),(0,W.default)(f.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||i,!(a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});let b=this.manifest.mediaGroups[a.attributes.TYPE];b[a.attributes["GROUP-ID"]]=b[a.attributes["GROUP-ID"]]||{},n=b[a.attributes["GROUP-ID"]],(o={default:/yes/i.test(a.attributes.DEFAULT)}).default?o.autoselect=!0:o.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(o.language=a.attributes.LANGUAGE),a.attributes.URI&&(o.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(o.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(o.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(o.forced=/yes/i.test(a.attributes.FORCED)),n[a.attributes.NAME]=o},discontinuity(){j+=1,f.discontinuity=!0,this.manifest.discontinuityStarts.push(e.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),f.dateTimeString=a.dateTimeString,f.dateTimeObject=a.dateTimeObject;let{lastProgramDateTime:b}=this;this.lastProgramDateTime=new Date(a.dateTimeString).getTime(),null===b&&this.manifest.segments.reduceRight((a,b)=>(b.programDateTime=a-1e3*b.duration,b.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(a.duration)||a.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):(this.manifest.targetDuration=a.duration,af.call(this,this.manifest))},start(){!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}},"cue-out"(){f.cueOut=a.data},"cue-out-cont"(){f.cueOutCont=a.data},"cue-in"(){f.cueIn=a.data},skip(){this.manifest.skip=ae(a.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",a.attributes,["SKIPPED-SEGMENTS"])},part(){g=!0;let b=this.manifest.segments.length,c=ae(a.attributes);f.parts=f.parts||[],f.parts.push(c),c.byterange&&(c.byterange.hasOwnProperty("offset")||(c.byterange.offset=l),l=c.byterange.offset+c.byterange.length);let d=f.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${d} for segment #${b}`,a.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((a,b)=>{a.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${b} lacks required attribute(s): LAST-PART`})})},"server-control"(){let b=this.manifest.serverControl=ae(a.attributes);b.hasOwnProperty("canBlockReload")||(b.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),af.call(this,this.manifest),b.canSkipDateranges&&!b.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let b=this.manifest.segments.length,c=ae(a.attributes),d=c.type&&"PART"===c.type;f.preloadHints=f.preloadHints||[],f.preloadHints.push(c),c.byterange&&!c.byterange.hasOwnProperty("offset")&&(c.byterange.offset=d?l:0,d&&(l=c.byterange.offset+c.byterange.length));let e=f.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${e} for segment #${b}`,a.attributes,["TYPE","URI"]),c.type)for(let a=0;a<f.preloadHints.length-1;a++){let d=f.preloadHints[a];d.type&&d.type===c.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${e} for segment #${b} has the same TYPE ${c.type} as preload hint #${a}`})}},"rendition-report"(){let b=ae(a.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(b);let c=this.manifest.renditionReports.length-1,d=["LAST-MSN","URI"];g&&d.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${c}`,a.attributes,d)},"part-inf"(){this.manifest.partInf=ae(a.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",a.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),af.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(ae(a.attributes));let b=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${b}`,a.attributes,["ID","START-DATE"]);let c=this.manifest.dateRanges[b];c.endDate&&c.startDate&&new Date(c.endDate)<new Date(c.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),c.duration&&c.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),c.plannedDuration&&c.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});let d=!!c.endOnNext;if(d&&!c.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),d&&(c.duration||c.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),c.duration&&c.endDate){let a=c.startDate.getTime()+1e3*c.duration;this.manifest.dateRanges[b].endDate=new Date(a)}if(m[c.id]){for(let a in m[c.id])if(c[a]&&JSON.stringify(m[c.id][a])!==JSON.stringify(c[a])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}let a=this.manifest.dateRanges.findIndex(a=>a.id===c.id);this.manifest.dateRanges[a]=(0,W.default)(this.manifest.dateRanges[a],c),m[c.id]=(0,W.default)(m[c.id],c),this.manifest.dateRanges.pop()}else m[c.id]=c},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=ae(a.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",a.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};let b=(a,b)=>{a in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${a}`}):this.manifest.definitions[a]=b};if("QUERYPARAM"in a.attributes){if("NAME"in a.attributes||"IMPORT"in a.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});let c=this.params.get(a.attributes.QUERYPARAM);return c?void b(a.attributes.QUERYPARAM,decodeURIComponent(c)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${a.attributes.QUERYPARAM}`})}"NAME"in a.attributes?"IMPORT"in a.attributes?this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in a.attributes&&"string"==typeof a.attributes.VALUE?b(a.attributes.NAME,a.attributes.VALUE):this.trigger("error",{message:`EXT-X-DEFINE: No value for ${a.attributes.NAME}`}):"IMPORT"in a.attributes?this.mainDefinitions[a.attributes.IMPORT]?b(a.attributes.IMPORT,this.mainDefinitions[a.attributes.IMPORT]):this.trigger("error",{message:`EXT-X-DEFINE: No value ${a.attributes.IMPORT} to import, or IMPORT used on main playlist`}):this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:a.attributes,uri:a.uri,timeline:j}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",a.attributes,["BANDWIDTH","URI"])}})[a.tagType]||h).call(d)},uri(){f.uri=a.uri,e.push(f),!this.manifest.targetDuration||"duration"in f||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),f.duration=this.manifest.targetDuration),c&&(f.key=c),f.timeline=j,b&&(f.map=b),l=0,null!==this.lastProgramDateTime&&(f.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*f.duration),f={}},comment(){},custom(){a.segment?(f.custom=f.custom||{},f.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(d)})}requiredCompatibilityversion(a,b){(a<b||!a)&&this.trigger("warn",{message:`manifest must be at least version ${b}`})}warnOnMissingAttributes_(a,b,c){let d=[];c.forEach(function(a){b.hasOwnProperty(a)||d.push(a)}),d.length&&this.trigger("warn",{message:`${a} lacks required attribute(s): ${d.join(", ")}`})}push(a){this.lineStream.push(a)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(a){this.parseStream.addParser(a)}addTagMapper(a){this.parseStream.addTagMapper(a)}}var ah={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ai=["video","audio","text"],aj=["Video","Audio","Text"],ak=function(a){return a?a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){return"avc1."+("00"+Number(b).toString(16)).slice(-2)+"00"+("00"+Number(c).toString(16)).slice(-2)}):a},al=function(a){void 0===a&&(a="");var b=a.split(","),c=[];return b.forEach(function(a){var b;a=a.trim(),ai.forEach(function(d){var e=ah[d].exec(a.toLowerCase());if(e&&!(e.length<=1)){b=d;var f=a.substring(0,e[1].length),g=a.replace(f,"");c.push({type:f,details:g,mediaType:d})}}),b||c.push({type:a,details:"",mediaType:"unknown"})}),c},am=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var e=c[d];if(e.default&&e.playlists)return al(e.playlists[0].attributes.CODECS)}return null},an=function(a){return void 0===a&&(a=""),ah.audio.test(a.trim().toLowerCase())},ao=function(a){if(a&&"string"==typeof a){var b,c=a.toLowerCase().split(",").map(function(a){return ak(a.trim())}),d="video";1===c.length&&an(c[0])?d="audio":1===c.length&&(void 0===(b=c[0])&&(b=""),ah.text.test(b.trim().toLowerCase()))&&(d="application");var e="mp4";return c.every(function(a){return ah.mp4.test(a)})?e="mp4":c.every(function(a){return ah.webm.test(a)})?e="webm":c.every(function(a){return ah.ogg.test(a)})&&(e="ogg"),d+"/"+e+';codecs="'+a+'"'}},ap=function(a,b){return void 0===a&&(a=""),void 0===b&&(b=!1),S.default.MediaSource&&S.default.MediaSource.isTypeSupported&&S.default.MediaSource.isTypeSupported(ao(a))||b&&S.default.ManagedMediaSource&&S.default.ManagedMediaSource.isTypeSupported&&S.default.ManagedMediaSource.isTypeSupported(ao(a))||!1},aq=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(a){a=a.trim();for(var b=0;b<aj.length;b++)if(ah["muxer"+aj[b]].test(a))return!0;return!1})},ar="mp4a.40.2",as=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,at=/^application\/dash\+xml/i,au=function(a){return as.test(a)?"hls":at.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null},av=function(a){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer},aw=function(a){return a instanceof Uint8Array?a:(Array.isArray(a)||av(a)||a instanceof ArrayBuffer||(a="number"!=typeof a||"number"==typeof a&&a!=a?0:[a]),new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0))},ax=S.default.BigInt||Number,ay=[ax("0x1"),ax("0x100"),ax("0x10000"),ax("0x1000000"),ax("0x100000000"),ax("0x10000000000"),ax("0x1000000000000"),ax("0x100000000000000"),ax("0x10000000000000000")];255===(i=new Uint8Array((h=new Uint16Array([65484])).buffer,h.byteOffset,h.byteLength))[0]||i[0];var az=function(a,b){var c=void 0===b?{}:b,d=c.signed,e=c.le,f=void 0!==e&&e;a=aw(a);var g=f?"reduce":"reduceRight",h=(a[g]?a[g]:Array.prototype[g]).call(a,function(b,c,d){var e=f?d:Math.abs(d+1-a.length);return b+ax(c)*ay[e]},ax(0));if(void 0!==d&&d){var i=ay[a.length]/ax(2)-ax(1);(h=ax(h))>i&&(h-=i,h-=i,h-=ax(2))}return Number(h)},aA=function(a,b){var c=(void 0===b?{}:b).le,d=void 0!==c&&c;("bigint"!=typeof a&&"number"!=typeof a||"number"==typeof a&&a!=a)&&(a=0);for(var e=Math.ceil((a=ax(a)).toString(2).length/8),f=new Uint8Array(new ArrayBuffer(e)),g=0;g<e;g++){var h=d?g:Math.abs(g+1-f.length);f[h]=Number(a/ay[g]&ax(255)),a<0&&(f[h]=Math.abs(~f[h]),f[h]-=0===g?1:2)}return f},aB=function(a){if(!a)return"";a=Array.prototype.slice.call(a);var b=String.fromCharCode.apply(null,aw(a));try{return decodeURIComponent(escape(b))}catch(a){}return b},aC=function(a,b){if("string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a)return new Uint8Array;b||(a=unescape(encodeURIComponent(a)));for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return c},aD=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if((b=b.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!=typeof a})).length<=1)return aw(b[0]);var d=new Uint8Array(b.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0)),e=0;return b.forEach(function(a){a=aw(a),d.set(a,e),e+=a.byteLength}),d},aE=function(a,b,c){var d=void 0===c?{}:c,e=d.offset,f=void 0===e?0:e,g=d.mask,h=void 0===g?[]:g;a=aw(a);var i=(b=aw(b)).every?b.every:Array.prototype.every;return b.length&&a.length-f>=b.length&&i.call(b,function(b,c){return b===(h[c]?h[c]&a[f+c]:a[f+c])})},aF=function(a,b,c){b.forEach(function(b){for(var d in a.mediaGroups[b])for(var e in a.mediaGroups[b][d])c(a.mediaGroups[b][d][e],b,d,e)})},aG=a.i(633524);let aH=a=>!!a&&"object"==typeof a,aI=(...a)=>a.reduce((a,b)=>("object"!=typeof b||Object.keys(b).forEach(c=>{Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):aH(a[c])&&aH(b[c])?a[c]=aI(a[c],b[c]):a[c]=b[c]}),a),{}),aJ=a=>Object.keys(a).map(b=>a[b]),aK=a=>a.reduce((a,b)=>a.concat(b),[]),aL=a=>{if(!a.length)return[];let b=[];for(let c=0;c<a.length;c++)b.push(a[c]);return b},aM=({baseUrl:a="",source:b="",range:c="",indexRange:d=""})=>{let e={uri:b,resolvedUri:Y(a||"",b)};if(c||d){let a,b=(c||d).split("-"),f=S.default.BigInt?S.default.BigInt(b[0]):parseInt(b[0],10),g=S.default.BigInt?S.default.BigInt(b[1]):parseInt(b[1],10);f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),g<Number.MAX_SAFE_INTEGER&&"bigint"==typeof g&&(g=Number(g)),"bigint"==typeof(a="bigint"==typeof g||"bigint"==typeof f?S.default.BigInt(g)-S.default.BigInt(f)+S.default.BigInt(1):g-f+1)&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),e.byterange={length:a,offset:f}}return e},aN=a=>(a&&"number"!=typeof a&&(a=parseInt(a,10)),isNaN(a))?null:a,aO={static(a){let{duration:b,timescale:c=1,sourceDuration:d,periodDuration:e}=a,f=aN(a.endNumber),g=b/c;return"number"==typeof f?{start:0,end:f}:"number"==typeof e?{start:0,end:e/g}:{start:0,end:d/g}},dynamic(a){let{NOW:b,clientOffset:c,availabilityStartTime:d,timescale:e=1,duration:f,periodStart:g=0,minimumUpdatePeriod:h=0,timeShiftBufferDepth:i=1/0}=a,j=aN(a.endNumber),k=(b+c)/1e3,l=d+g,m=Math.ceil((k+h-l)*e/f),n=Math.floor((k-l-i)*e/f),o=Math.floor((k-l)*e/f);return{start:Math.max(0,n),end:"number"==typeof j?j:Math.min(m,o)}}},aP=a=>{let{type:b,duration:c,timescale:d=1,periodDuration:e,sourceDuration:f}=a,{start:g,end:h}=aO[b](a),i=((a,b)=>{let c=[];for(let d=a;d<b;d++)c.push(d);return c})(g,h).map(b=>{let{duration:c,timescale:d=1,periodStart:e,startNumber:f=1}=a;return{number:f+b,duration:c/d,timeline:e,time:b*c}});if("static"===b){let a=i.length-1;i[a].duration=("number"==typeof e?e:f)-c/d*a}return i},aQ=a=>{let{baseUrl:b,initialization:c={},sourceDuration:d,indexRange:e="",periodStart:f,presentationTime:g,number:h=0,duration:i}=a;if(!b)throw Error("NO_BASE_URL");let j=aM({baseUrl:b,source:c.sourceURL,range:c.range}),k=aM({baseUrl:b,source:b,indexRange:e});if(k.map=j,i){let b=aP(a);b.length&&(k.duration=b[0].duration,k.timeline=b[0].timeline)}else d&&(k.duration=d,k.timeline=f);return k.presentationTime=g||f,k.number=h,[k]},aR=(a,b,c)=>{let d,e=a.sidx.map?a.sidx.map:null,f=a.sidx.duration,g=a.timeline||0,h=a.sidx.byterange,i=h.offset+h.length,j=b.timescale,k=b.references.filter(a=>1!==a.referenceType),l=[],m=a.endList?"static":"dynamic",n=a.sidx.timeline,o=n,p=a.mediaSequence||0;d="bigint"==typeof b.firstOffset?S.default.BigInt(i)+b.firstOffset:i+b.firstOffset;for(let a=0;a<k.length;a++){let h,i=b.references[a],k=i.referencedSize,q=i.subsegmentDuration;h="bigint"==typeof d?d+S.default.BigInt(k)-S.default.BigInt(1):d+k-1;let r={baseUrl:c,timescale:j,timeline:g,periodStart:n,presentationTime:o,number:p,duration:q,sourceDuration:f,indexRange:`${d}-${h}`,type:m},s=aQ(r)[0];e&&(s.map=e),l.push(s),"bigint"==typeof d?d+=S.default.BigInt(k):d+=k,o+=q/j,p++}return a.segments=l,a},aS=["AUDIO","SUBTITLES"],aT=1/60,aU=a=>{let b;return(b=({timeline:a})=>a,aJ(a.reduce((a,c)=>(c.forEach(c=>{a[b(c)]=c}),a),{}))).sort((a,b)=>a.timeline>b.timeline?1:-1)},aV=a=>{let b=[];return aF(a,aS,(a,c,d,e)=>{b=b.concat(a.playlists||[])}),b},aW=({playlist:a,mediaSequence:b})=>{a.mediaSequence=b,a.segments.forEach((b,c)=>{b.number=a.mediaSequence+c})},aX=a=>{var b;let c;return a&&a.uri+"-"+(c="bigint"==typeof(b=a.byterange).offset||"bigint"==typeof b.length?S.default.BigInt(b.offset)+S.default.BigInt(b.length)-S.default.BigInt(1):b.offset+b.length-1,`${b.offset}-${c}`)},aY=a=>{let b=a.reduce(function(a,b){return a[b.attributes.baseUrl]||(a[b.attributes.baseUrl]=[]),a[b.attributes.baseUrl].push(b),a},{}),c=[];return Object.values(b).forEach(a=>{let b=aJ(a.reduce((a,b)=>{let c=b.attributes.id+(b.attributes.lang||"");return a[c]?(b.segments&&(b.segments[0]&&(b.segments[0].discontinuity=!0),a[c].segments.push(...b.segments)),b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)):(a[c]=b,a[c].attributes.timelineStarts=[]),a[c].attributes.timelineStarts.push({start:b.attributes.periodStart,timeline:b.attributes.periodStart}),a},{}));c=c.concat(b)}),c.map(a=>(a.discontinuityStarts=(a.segments||[]).reduce((a,b,c)=>(b.discontinuity&&a.push(c),a),[]),a))},aZ=(a,b)=>{let c=aX(a.sidx),d=c&&b[c]&&b[c].sidx;return d&&aR(a,d,a.sidx.resolvedUri),a},a$=({attributes:a,segments:b,sidx:c,discontinuityStarts:d})=>{let e={attributes:{NAME:a.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:a.width,height:a.height},CODECS:a.codecs,BANDWIDTH:a.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===a.type,timeline:a.periodStart,resolvedUri:a.baseUrl||"",targetDuration:a.duration,discontinuityStarts:d,timelineStarts:a.timelineStarts,segments:b};return a.frameRate&&(e.attributes["FRAME-RATE"]=a.frameRate),a.contentProtection&&(e.contentProtection=a.contentProtection),a.serviceLocation&&(e.attributes.serviceLocation=a.serviceLocation),c&&(e.sidx=c),e},a_=({attributes:a})=>"video/mp4"===a.mimeType||"video/webm"===a.mimeType||"video"===a.contentType,a0=({attributes:a})=>"audio/mp4"===a.mimeType||"audio/webm"===a.mimeType||"audio"===a.contentType,a1=({attributes:a})=>"text/vtt"===a.mimeType||"text"===a.contentType,a2=a=>a?Object.keys(a).reduce((b,c)=>{let d=a[c];return b.concat(d.playlists)},[]):[],a3=(a,b,c)=>{let{NOW:d,clientOffset:e,availabilityStartTime:f,timescale:g=1,periodStart:h=0,minimumUpdatePeriod:i=0}=a;return Math.ceil((((d+e)/1e3+i-(f+h))*g-b)/c)},a4=(a,b)=>{let{type:c,minimumUpdatePeriod:d=0,media:e="",sourceDuration:f,timescale:g=1,startNumber:h=1,periodStart:i}=a,j=[],k=-1;for(let l=0;l<b.length;l++){let m,n=b[l],o=n.d,p=n.r||0,q=n.t||0;if(k<0&&(k=q),q&&q>k&&(k=q),p<0){let h=l+1;m=h===b.length?"dynamic"===c&&d>0&&e.indexOf("$Number$")>0?a3(a,k,o):(f*g-k)/o:(b[h].t-k)/o}else m=p+1;let r=h+j.length+m,s=h+j.length;for(;s<r;)j.push({number:s,duration:o/g,time:k,timeline:i}),k+=o,s++}return j},a5=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,a6=(a,b)=>a.replace(a5,(a,c,d,e)=>{if("$$"===a)return"$";if(void 0===b[c])return a;let f=""+b[c];return"RepresentationID"===c||(e=d?parseInt(e,10):1,f.length>=e)?f:`${Array(e-f.length+1).join("0")}${f}`}),a7=(a,b)=>{let c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},{initialization:d={sourceURL:"",range:""}}=a,e=aM({baseUrl:a.baseUrl,source:a6(d.sourceURL,c),range:d.range});return(!a.duration&&!b?[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodStart}]:a.duration?aP(a):a4(a,b)).map(b=>{c.Number=b.number,c.Time=b.time;let d=a6(a.media||"",c),f=a.timescale||1,g=a.presentationTimeOffset||0,h=a.periodStart+(b.time-g)/f;return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Y(a.baseUrl||"",d),map:e,number:b.number,presentationTime:h}})},a8=(a,b)=>{let c,{duration:d,segmentUrls:e=[],periodStart:f}=a;if(!d&&!b||d&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");let g=e.map(b=>((a,b)=>{let{baseUrl:c,initialization:d={}}=a,e=aM({baseUrl:c,source:d.sourceURL,range:d.range}),f=aM({baseUrl:c,source:b.media,range:b.mediaRange});return f.map=e,f})(a,b));return d&&(c=aP(a)),b&&(c=a4(a,b)),c.map((b,c)=>{if(g[c]){let d=g[c],e=a.timescale||1,h=a.presentationTimeOffset||0;return d.timeline=b.timeline,d.duration=b.duration,d.number=b.number,d.presentationTime=f+(b.time-h)/e,d}}).filter(a=>a)},a9=({attributes:a,segmentInfo:b})=>{let c,d;b.template?(d=a7,c=aI(a,b.template)):b.base?(d=aQ,c=aI(a,b.base)):b.list&&(d=a8,c=aI(a,b.list));let e={attributes:a};if(!d)return e;let f=d(c,b.segmentTimeline);if(c.duration){let{duration:a,timescale:b=1}=c;c.duration=a/b}else f.length?c.duration=f.reduce((a,b)=>Math.max(a,Math.ceil(b.duration)),0):c.duration=0;return e.attributes=c,e.segments=f,b.base&&c.indexRange&&(e.sidx=f[0],e.segments=[]),e},ba=(a,b)=>aL(a.childNodes).filter(({tagName:a})=>a===b),bb=a=>a.textContent.trim(),bc=a=>{let b=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!b)return 0;let[c,d,e,f,g,h]=b.slice(1);return 31536e3*parseFloat(c||0)+2592e3*parseFloat(d||0)+86400*parseFloat(e||0)+3600*parseFloat(f||0)+60*parseFloat(g||0)+parseFloat(h||0)},bd={mediaPresentationDuration:a=>bc(a),availabilityStartTime:a=>{var b;return b=a,/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(b)&&(b+="Z"),Date.parse(b)/1e3},minimumUpdatePeriod:a=>bc(a),suggestedPresentationDelay:a=>bc(a),type:a=>a,timeShiftBufferDepth:a=>bc(a),start:a=>bc(a),width:a=>parseInt(a,10),height:a=>parseInt(a,10),bandwidth:a=>parseInt(a,10),frameRate:a=>parseFloat(a.split("/").reduce((a,b)=>a/b)),startNumber:a=>parseInt(a,10),timescale:a=>parseInt(a,10),presentationTimeOffset:a=>parseInt(a,10),duration(a){let b=parseInt(a,10);return isNaN(b)?bc(a):b},d:a=>parseInt(a,10),t:a=>parseInt(a,10),r:a=>parseInt(a,10),presentationTime:a=>parseInt(a,10),DEFAULT:a=>a},be=a=>a&&a.attributes?aL(a.attributes).reduce((a,b)=>{let c=bd[b.name]||bd.DEFAULT;return a[b.name]=c(b.value),a},{}):{},bf={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},bg=(a,b)=>b.length?aK(a.map(function(a){return b.map(function(b){let c=bb(b),d=Y(a.baseUrl,c),e=aI(be(b),{baseUrl:d});return d!==c&&!e.serviceLocation&&a.serviceLocation&&(e.serviceLocation=a.serviceLocation),e})})):a,bh=a=>{let b=ba(a,"SegmentTemplate")[0],c=ba(a,"SegmentList")[0],d=c&&ba(c,"SegmentURL").map(a=>aI({tag:"SegmentURL"},be(a))),e=ba(a,"SegmentBase")[0],f=c||b,g=f&&ba(f,"SegmentTimeline")[0],h=c||e||b,i=h&&ba(h,"Initialization")[0],j=b&&be(b);j&&i?j.initialization=i&&be(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});let k={template:j,segmentTimeline:g&&ba(g,"S").map(a=>be(a)),list:c&&aI(be(c),{segmentUrls:d,initialization:be(i)}),base:e&&aI(be(e),{initialization:be(i)})};return Object.keys(k).forEach(a=>{k[a]||delete k[a]}),k},bi=a=>aK(ba(a.node,"EventStream").map(b=>{let c=be(b),d=c.schemeIdUri;return ba(b,"Event").map(b=>{let e=be(b),f=e.presentationTime||0,g=c.timescale||1,h=e.duration||0,i=f/g+a.attributes.start;return{schemeIdUri:d,value:c.value,id:e.id,start:i,end:i+h/g,messageData:bb(b)||e.messageData,contentEncoding:c.contentEncoding,presentationTimeOffset:c.presentationTimeOffset||0}})})),bj=a=>{let b,c;if(""===a)throw Error("DASH_EMPTY_MANIFEST");let d=new aG.DOMParser;try{c=(b=d.parseFromString(a,"application/xml"))&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(a){}if(!c||c&&c.getElementsByTagName("parsererror").length>0)throw Error("DASH_INVALID_XML");return c};var bk=a.i(792301),bl=aw([73,68,51]),bm=function(a,b){void 0===b&&(b=0);var c=(a=aw(a))[b+5],d=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(16&c)>>4?d+20:d+10},bn=function a(b,c){return(void 0===c&&(c=0),(b=aw(b)).length-c<10||!aE(b,bl,{offset:c}))?c:(c+=bm(b,c),a(b,c))};new Uint8Array([79,112,117,115,72,101,97,100]);var bo=function(a){return"string"==typeof a?aC(a):a},bp=function(a){a=aw(a);for(var b=[],c=0;a.length>c;){var d=a[c],e=0,f=0,g=a[++f];for(f++;128&g;)e=(127&g)<<7,g=a[f],f++;e+=127&g;for(var h=0;h<j.length;h++){var i=j[h],k=i.id,l=i.parser;if(d===k){b.push(l(a.subarray(f,f+e)));break}}c+=e+f}return b};j=[{id:3,parser:function(a){var b={tag:3,id:a[0]<<8|a[1],flags:a[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&b.flags&&(b.dependsOnEsId=a[b.size]<<8|a[b.size+1],b.size+=2),64&b.flags){var c=a[b.size];b.url=aB(a.subarray(b.size+1,b.size+1+c)),b.size+=c}return 32&b.flags&&(b.ocrEsId=a[b.size]<<8|a[b.size+1],b.size+=2),b.descriptors=bp(a.subarray(b.size))||[],b}},{id:4,parser:function(a){return{tag:4,oti:a[0],streamType:a[1],bufferSize:a[2]<<16|a[3]<<8|a[4],maxBitrate:a[5]<<24|a[6]<<16|a[7]<<8|a[8],avgBitrate:a[9]<<24|a[10]<<16|a[11]<<8|a[12],descriptors:bp(a.subarray(13))}}},{id:5,parser:function(a){return{tag:5,bytes:a}}},{id:6,parser:function(a){return{tag:6,bytes:a}}}];var bq=function a(b,c,d){void 0===d&&(d=!1),c=Array.isArray(e=c)?e.map(function(a){return bo(a)}):[bo(e)],b=aw(b);var e,f=[];if(!c.length)return f;for(var g=0;g<b.length;){var h=(b[g]<<24|b[g+1]<<16|b[g+2]<<8|b[g+3])>>>0,i=b.subarray(g+4,g+8);if(0===h)break;var j=g+h;if(j>b.length){if(d)break;j=b.length}var k=b.subarray(g+8,j);aE(i,c[0])&&(1===c.length?f.push(k):f.push.apply(f,a(k,c.slice(1),d))),g=j}return f},br={EBML:aw([26,69,223,163]),DocType:aw([66,130]),Segment:aw([24,83,128,103]),SegmentInfo:aw([21,73,169,102]),Tracks:aw([22,84,174,107]),Track:aw([174]),TrackNumber:aw([215]),DefaultDuration:aw([35,227,131]),TrackEntry:aw([174]),TrackType:aw([131]),FlagDefault:aw([136]),CodecID:aw([134]),CodecPrivate:aw([99,162]),VideoTrack:aw([224]),AudioTrack:aw([225]),Cluster:aw([31,67,182,117]),Timestamp:aw([231]),TimestampScale:aw([42,215,177]),BlockGroup:aw([160]),BlockDuration:aw([155]),Block:aw([161]),SimpleBlock:aw([163])},bs=[128,64,32,16,8,4,2,1],bt=function(a){for(var b=1,c=0;c<bs.length&&!(a&bs[c]);c++)b++;return b},bu=function(a,b,c,d){void 0===c&&(c=!0),void 0===d&&(d=!1);var e=bt(a[b]),f=a.subarray(b,b+e);return c&&(f=Array.prototype.slice.call(a,b,b+e),f[0]^=bs[e-1]),{length:e,value:az(f,{signed:d}),bytes:f}},bv=function a(b){return"string"==typeof b?b.match(/.{1,2}/g).map(function(b){return a(b)}):"number"==typeof b?aA(b):b},bw=function a(b,c,d){if(d>=c.length)return c.length;var e=bu(c,d,!1);if(aE(b.bytes,e.bytes))return d;var f=bu(c,d+e.length);return a(b,c,d+f.length+f.value+e.length)},bx=function a(b,c){c=Array.isArray(d=c)?d.map(function(a){return bv(a)}):[bv(d)],b=aw(b);var d,e=[];if(!c.length)return e;for(var f=0;f<b.length;){var g=bu(b,f,!1),h=bu(b,f+g.length),i=f+g.length+h.length;127===h.value&&(h.value=bw(g,b,i),h.value!==b.length&&(h.value-=i));var j=i+h.value>b.length?b.length:i+h.value,k=b.subarray(i,j);aE(c[0],g.bytes)&&(1===c.length?e.push(k):e=e.concat(a(k,c.slice(1)))),f+=g.length+h.length+k.length}return e},by=aw([0,0,0,1]),bz=aw([0,0,1]),bA=aw([0,0,3]),bB=function(a){for(var b=[],c=1;c<a.length-2;)aE(a.subarray(c,c+3),bA)&&(b.push(c+2),c++),c++;if(0===b.length)return a;var d=a.length-b.length,e=new Uint8Array(d),f=0;for(c=0;c<d;f++,c++)f===b[0]&&(f++,b.shift()),e[c]=a[f];return e},bC=function(a,b,c,d){void 0===d&&(d=1/0),a=aw(a),c=[].concat(c);for(var e,f=0,g=0;f<a.length&&(g<d||e);){var h=void 0;if(aE(a.subarray(f),by)?h=4:aE(a.subarray(f),bz)&&(h=3),!h){f++;continue}if(g++,e)return bB(a.subarray(e,f));var i=void 0;"h264"===b?i=31&a[f+h]:"h265"===b&&(i=a[f+h]>>1&63),-1!==c.indexOf(i)&&(e=f+h),f+=h+("h264"===b?1:2)}return a.subarray(0,0)},bD={webm:aw([119,101,98,109]),matroska:aw([109,97,116,114,111,115,107,97]),flac:aw([102,76,97,67]),ogg:aw([79,103,103,83]),ac3:aw([11,119]),riff:aw([82,73,70,70]),avi:aw([65,86,73]),wav:aw([87,65,86,69]),"3gp":aw([102,116,121,112,51,103]),mp4:aw([102,116,121,112]),fmp4:aw([115,116,121,112]),mov:aw([102,116,121,112,113,116]),moov:aw([109,111,111,118]),moof:aw([109,111,111,102])},bE={aac:function(a){var b=bn(a);return aE(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=bn(a);return aE(a,[255,2],{offset:b,mask:[255,6]})},webm:function(a){return aE(bx(a,[br.EBML,br.DocType])[0],bD.webm)},mkv:function(a){return aE(bx(a,[br.EBML,br.DocType])[0],bD.matroska)},mp4:function(a){return!(bE["3gp"](a)||bE.mov(a))&&(!!(aE(a,bD.mp4,{offset:4})||aE(a,bD.fmp4,{offset:4})||aE(a,bD.moof,{offset:4})||aE(a,bD.moov,{offset:4}))||void 0)},mov:function(a){return aE(a,bD.mov,{offset:4})},"3gp":function(a){return aE(a,bD["3gp"],{offset:4})},ac3:function(a){var b=bn(a);return aE(a,bD.ac3,{offset:b})},ts:function(a){if(a.length<189&&a.length>=1)return 71===a[0];for(var b=0;b+188<a.length&&b<188;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=bn(a);return aE(a,bD.flac,{offset:b})},ogg:function(a){return aE(a,bD.ogg)},avi:function(a){return aE(a,bD.riff)&&aE(a,bD.avi,{offset:8})},wav:function(a){return aE(a,bD.riff)&&aE(a,bD.wav,{offset:8})},h264:function(a){return bC(a,"h264",7,3).length},h265:function(a){return bC(a,"h265",[32,33],3).length}},bF=Object.keys(bE).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);bF.forEach(function(a){var b=bE[a];bE[a]=function(a){return b(aw(a))}});var bG=function(a){a=aw(a);for(var b=0;b<bF.length;b++){var c=bF[b];if(bE[c](a))return c}return""},bH=a.i(561462),bI="8.23.4";let bJ={},bK=function(a,b){return bJ[a]=bJ[a]||[],b&&(bJ[a]=bJ[a].concat(b)),bJ[a]},bL=function(a,b){let c=bK(a).indexOf(b);return!(c<=-1)&&(bJ[a]=bJ[a].slice(),bJ[a].splice(c,1),!0)},bM={prefixed:!0},bN=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],bO=bN[0];for(let a=0;a<bN.length;a++)if(bN[a][1]in T.default){b=bN[a];break}if(b){for(let a=0;a<b.length;a++)bM[bO[a]]=b[a];bM.prefixed=b[0]!==bO[0]}let bP=[],bQ=function a(b,c=":",d=""){let e,f="info";function g(...a){e("log",f,a)}return e=(a,c,e)=>{let f=g.levels[c],h=RegExp(`^(${f})$`),i=b;if("log"!==a&&e.unshift(a.toUpperCase()+":"),d&&(i=`%c${b}`,e.unshift(d)),e.unshift(i+":"),bP){bP.push([].concat(e));let a=bP.length-1e3;bP.splice(0,a>0?a:0)}if(!S.default.console)return;let j=S.default.console[a];j||"debug"!==a||(j=S.default.console.info||S.default.console.log),j&&f&&h.test(a)&&j[Array.isArray(e)?"apply":"call"](S.default.console,e)},g.createLogger=(e,f,g)=>{let h=void 0!==f?f:c;return a(`${b} ${h} ${e}`,h,void 0!==g?g:d)},g.createNewLogger=(b,c,d)=>a(b,c,d),g.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:f},g.level=a=>{if("string"==typeof a){if(!g.levels.hasOwnProperty(a))throw Error(`"${a}" in not a valid log level`);f=a}return f},g.history=()=>bP?[].concat(bP):[],g.history.filter=a=>(bP||[]).filter(b=>RegExp(`.*${a}.*`).test(b[0])),g.history.clear=()=>{bP&&(bP.length=0)},g.history.disable=()=>{null!==bP&&(bP.length=0,bP=null)},g.history.enable=()=>{null===bP&&(bP=[])},g.error=(...a)=>e("error",f,a),g.warn=(...a)=>e("warn",f,a),g.debug=(...a)=>e("debug",f,a),g}("VIDEOJS"),bR=bQ.createLogger,bS=Object.prototype.toString,bT=function(a){return bW(a)?Object.keys(a):[]};function bU(a,b){bT(a).forEach(c=>b(a[c],c))}function bV(a,b,c=0){return bT(a).reduce((c,d)=>b(c,a[d],d),c)}function bW(a){return!!a&&"object"==typeof a}function bX(a){return bW(a)&&"[object Object]"===bS.call(a)&&a.constructor===Object}function bY(...a){let b={};return a.forEach(a=>{a&&bU(a,(a,c)=>{if(!bX(a)){b[c]=a;return}bX(b[c])||(b[c]={}),b[c]=bY(b[c],a)})}),b}function bZ(a={}){let b=[];for(let c in a)if(a.hasOwnProperty(c)){let d=a[c];b.push(d)}return b}function b$(a,b,c,d=!0){let e=c=>Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0}),f={configurable:!0,enumerable:!0,get(){let a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)}var b_=Object.freeze({__proto__:null,each:bU,reduce:bV,isObject:bW,isPlain:bX,merge:bY,values:bZ,defineLazyProperty:b$});let b0=!1,b1=null,b2=!1,b3=!1,b4=!1,b5=!1,b6=!1,b7=null,b8=null,b9=!!(S.default.cast&&S.default.cast.framework&&S.default.cast.framework.CastReceiverContext),ca=null,cb=!1,cc=!1,cd=!1,ce=!1,cf=!1,cg=!1,ch=!1,ci=!!(co()&&("ontouchstart"in S.default||S.default.navigator.maxTouchPoints||S.default.DocumentTouch&&S.default.document instanceof S.default.DocumentTouch)),cj=S.default.navigator&&S.default.navigator.userAgentData;if(cj&&cj.platform&&cj.brands&&(b2="Android"===cj.platform,b4=!!cj.brands.find(a=>"Microsoft Edge"===a.brand),b5=!!cj.brands.find(a=>"Chromium"===a.brand),b6=!b4&&b5,b7=b8=(cj.brands.find(a=>"Chromium"===a.brand)||{}).version||null,cc="Windows"===cj.platform),!b5){let a,b,d,e,f=S.default.navigator&&S.default.navigator.userAgent||"";b0=/iPod/i.test(f),b1=(a=f.match(/OS (\d+)_/i))&&a[1]?a[1]:null,b2=/Android/i.test(f),c=function(){let a=f.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;let b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b||null}(),b3=/Firefox/i.test(f),b4=/Edg/i.test(f),b5=/Chrome/i.test(f)||/CriOS/i.test(f),b6=!b4&&b5,b7=b8=(b=f.match(/(Chrome|CriOS)\/(\d+)/))&&b[2]?parseFloat(b[2]):null,!(e=(d=/MSIE\s(\d+)\.\d/.exec(f))&&parseFloat(d[1]))&&/Trident\/7.0/i.test(f)&&/rv:11.0/.test(f)&&(e=11),ca=e,cf=/Tizen/i.test(f),cg=/Web0S/i.test(f),ch=cf||cg,cb=/Safari/i.test(f)&&!b6&&!b2&&!b4&&!ch,cc=/Windows/i.test(f),cd=/iPad/i.test(f)||cb&&ci&&!/iPhone/i.test(f),ce=/iPhone/i.test(f)&&!cd}let ck=ce||cd||b0,cl=(cb||ck)&&!b6;var cm=Object.freeze({__proto__:null,get IS_IPOD(){return b0},get IOS_VERSION(){return b1},get IS_ANDROID(){return b2},get ANDROID_VERSION(){return c},get IS_FIREFOX(){return b3},get IS_EDGE(){return b4},get IS_CHROMIUM(){return b5},get IS_CHROME(){return b6},get CHROMIUM_VERSION(){return b7},get CHROME_VERSION(){return b8},IS_CHROMECAST_RECEIVER:b9,get IE_VERSION(){return ca},get IS_SAFARI(){return cb},get IS_WINDOWS(){return cc},get IS_IPAD(){return cd},get IS_IPHONE(){return ce},get IS_TIZEN(){return cf},get IS_WEBOS(){return cg},get IS_SMART_TV(){return ch},TOUCH_ENABLED:ci,IS_IOS:ck,IS_ANY_SAFARI:cl});function cn(a){return"string"==typeof a&&!!a.trim()}function co(){return T.default===S.default.document}function cp(a){return bW(a)&&1===a.nodeType}function cq(){try{return S.default.parent!==S.default.self}catch(a){return!0}}function cr(a){return function(b,c){if(!cn(b))return T.default[a](null);cn(c)&&(c=T.default.querySelector(c));let d=cp(c)?c:T.default;return d[a]&&d[a](b)}}function cs(a="div",b={},c={},d){let e=T.default.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){let c=b[a];"textContent"===a?ct(e,c):(e[a]!==c||"tabIndex"===a)&&(e[a]=c)}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&cM(e,d),e}function ct(a,b){return void 0===a.textContent?a.innerText=b:a.textContent=b,a}function cu(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function cv(a,b){if(b.indexOf(" ")>=0)throw Error("class has illegal whitespace characters");return a.classList.contains(b)}function cw(a,...b){return a.classList.add(...b.reduce((a,b)=>a.concat(b.split(/\s+/)),[])),a}function cx(a,...b){return a?(a.classList.remove(...b.reduce((a,b)=>a.concat(b.split(/\s+/)),[])),a):(bQ.warn("removeClass was called with an element that doesn't exist"),null)}function cy(a,b,c){return"function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=void 0),b.split(/\s+/).forEach(b=>a.classList.toggle(b,c)),a}function cz(a,b){Object.getOwnPropertyNames(b).forEach(function(c){let d=b[c];null==d||!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)})}function cA(a){let b={},c=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(a&&a.attributes&&a.attributes.length>0){let d=a.attributes;for(let a=d.length-1;a>=0;a--){let e=d[a].name,f=d[a].value;c.includes(e)&&(f=null!==f),b[e]=f}}return b}function cB(a,b){return a.getAttribute(b)}function cC(a,b,c){a.setAttribute(b,c)}function cD(a,b){a.removeAttribute(b)}function cE(){T.default.body.focus(),T.default.onselectstart=function(){return!1}}function cF(){T.default.onselectstart=function(){return!0}}function cG(a){if(a&&a.getBoundingClientRect&&a.parentNode){let b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(a=>{void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(cR(a,"height"))),c.width||(c.width=parseFloat(cR(a,"width"))),c}}function cH(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};let b=a.offsetWidth,c=a.offsetHeight,d=0,e=0;for(;a.offsetParent&&a!==T.default[bM.fullscreenElement];)d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:d,top:e,width:b,height:c}}function cI(a,b){let c={x:0,y:0};if(ck){let b=a;for(;b&&"html"!==b.nodeName.toLowerCase();){let a=cR(b,"transform");if(/^matrix/.test(a)){let b=a.slice(7,-1).split(/,\s/).map(Number);c.x+=b[4],c.y+=b[5]}else if(/^matrix3d/.test(a)){let b=a.slice(9,-1).split(/,\s/).map(Number);c.x+=b[12],c.y+=b[13]}if(b.assignedSlot&&b.assignedSlot.parentElement&&S.default.WebKitCSSMatrix){let a=S.default.getComputedStyle(b.assignedSlot.parentElement).transform,d=new S.default.WebKitCSSMatrix(a);c.x+=d.m41,c.y+=d.m42}b=b.parentNode||b.host}}let d={},e=cH(b.target),f=cH(a),g=f.width,h=f.height,i=b.offsetY-(f.top-e.top),j=b.offsetX-(f.left-e.left);return b.changedTouches&&(j=b.changedTouches[0].pageX-f.left,i=b.changedTouches[0].pageY+f.top,ck&&(j-=c.x,i-=c.y)),d.y=1-Math.max(0,Math.min(1,i/h)),d.x=Math.max(0,Math.min(1,j/g)),d}function cJ(a){return bW(a)&&3===a.nodeType}function cK(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function cL(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(a=>("function"==typeof a&&(a=a()),cp(a)||cJ(a))?a:"string"==typeof a&&/\S/.test(a)?T.default.createTextNode(a):void 0).filter(a=>a)}function cM(a,b){return cL(b).forEach(b=>a.appendChild(b)),a}function cN(a,b){return cM(cK(a),b)}function cO(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||"mouseup"===a.type&&0===a.button&&0===a.buttons||"mousedown"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons}let cP=cr("querySelector"),cQ=cr("querySelectorAll");function cR(a,b){if(!a||!b)return"";if("function"==typeof S.default.getComputedStyle){let c;try{c=S.default.getComputedStyle(a)}catch(a){return""}return c?c.getPropertyValue(b)||c[b]:""}return""}function cS(a){[...T.default.styleSheets].forEach(b=>{try{let c=[...b.cssRules].map(a=>a.cssText).join(""),d=T.default.createElement("style");d.textContent=c,a.document.head.appendChild(d)}catch(d){let c=T.default.createElement("link");c.rel="stylesheet",c.type=b.type,c.media=b.media.mediaText,c.href=b.href,a.document.head.appendChild(c)}})}var cT=Object.freeze({__proto__:null,isReal:co,isEl:cp,isInFrame:cq,createEl:cs,textContent:ct,prependTo:cu,hasClass:cv,addClass:cw,removeClass:cx,toggleClass:cy,setAttributes:cz,getAttributes:cA,getAttribute:cB,setAttribute:cC,removeAttribute:cD,blockTextSelection:cE,unblockTextSelection:cF,getBoundingClientRect:cG,findPosition:cH,getPointerPosition:cI,isTextNode:cJ,emptyEl:cK,normalizeContent:cL,appendContent:cM,insertContent:cN,isSingleLeftClick:cO,$:cP,$$:cQ,computedStyle:cR,copyStyleSheetsToWindow:cS});let cU=!1,cV=function(){if(!1===d.options.autoSetup)return;let a=Array.prototype.slice.call(T.default.getElementsByTagName("video")),b=Array.prototype.slice.call(T.default.getElementsByTagName("audio")),c=Array.prototype.slice.call(T.default.getElementsByTagName("video-js")),e=a.concat(b,c);if(e&&e.length>0)for(let a=0,b=e.length;a<b;a++){let b=e[a];if(b&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&d(b);else{cW(1);break}}else cU||cW(1)};function cW(a,b){co()&&(b&&(d=b),S.default.setTimeout(cV,a))}function cX(){cU=!0,S.default.removeEventListener("load",cX)}co()&&("complete"===T.default.readyState?cX():S.default.addEventListener("load",cX));let cY=function(a){let b=T.default.createElement("style");return b.className=a,b},cZ=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b};var c$=new WeakMap;let c_=3;function c0(a,b){if(!c$.has(a))return;let c=c$.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&c$.delete(a)}function c1(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function c2(a){if(a.fixed_)return a;function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){let d=a||S.default.event;a={};let e=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(let b in d)e.includes(b)||"returnValue"===b&&d.preventDefault||(a[b]=d[b]);if(a.target||(a.target=a.srcElement||T.default),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){let b=T.default.documentElement,c=T.default.body;a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0),a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}let c3=function(){if("boolean"!=typeof e){e=!1;try{let a=Object.defineProperty({},"passive",{get(){e=!0}});S.default.addEventListener("test",null,a),S.default.removeEventListener("test",null,a)}catch(a){}}return e},c4=["touchstart","touchmove"];function c5(a,b,c){if(Array.isArray(b))return c1(c5,a,b,c);c$.has(a)||c$.set(a,{});let d=c$.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=c_++),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(d.disabled)return;b=c2(b);let e=d.handlers[b.type];if(e){let d=e.slice(0);for(let e=0,f=d.length;e<f;e++)if(b.isImmediatePropagationStopped())break;else try{d[e].call(a,b,c)}catch(a){bQ.error(a)}}}),1===d.handlers[b].length)if(a.addEventListener){let c=!1;c3()&&c4.indexOf(b)>-1&&(c={passive:!0}),a.addEventListener(b,d.dispatcher,c)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function c6(a,b,c){if(!c$.has(a))return;let d=c$.get(a);if(!d.handlers)return;if(Array.isArray(b))return c1(c6,a,b,c);let e=function(a,b){d.handlers[b]=[],c0(a,b)};if(void 0===b){for(let b in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},b)&&e(a,b);return}let f=d.handlers[b];if(f){if(!c)return void e(a,b);if(c.guid)for(let a=0;a<f.length;a++)f[a].guid===c.guid&&f.splice(a--,1);c0(a,b)}}function c7(a,b,c){let d=c$.has(a)?c$.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=c2(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&!0===b.bubbles)c7.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){c$.has(b.target)||c$.set(b.target,{});let a=c$.get(b.target);b.target[b.type]&&(a.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),a.disabled=!1)}return!b.defaultPrevented}function c8(a,b,c){if(Array.isArray(b))return c1(c8,a,b,c);let d=function(){c6(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||c_++,c5(a,b,d)}function c9(a,b,c){let d=function(){c6(a,b,d),c.apply(this,arguments)};d.guid=c.guid=c.guid||c_++,c5(a,b,d)}var da=Object.freeze({__proto__:null,fixEvent:c2,on:c5,off:c6,trigger:c7,one:c8,any:c9});let db=function(a,b,c){b.guid||(b.guid=c_++);let d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d},dc=function(a,b){let c=S.default.performance.now();return function(...d){let e=S.default.performance.now();e-c>=b&&(a(...d),c=e)}},dd=function(a,b,c,d=S.default){let e,f=function(){let f=this,g=arguments,h=function(){e=null,h=null,c||a.apply(f,g)};!e&&c&&a.apply(f,g),d.clearTimeout(e),e=d.setTimeout(h,b)};return f.cancel=()=>{d.clearTimeout(e),e=null},f};var de=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:db,throttle:dc,debounce:dd});class df{on(a,b){let c=this.addEventListener;this.addEventListener=()=>{},c5(this,a,b),this.addEventListener=c}off(a,b){c6(this,a,b)}one(a,b){let c=this.addEventListener;this.addEventListener=()=>{},c8(this,a,b),this.addEventListener=c}any(a,b){let c=this.addEventListener;this.addEventListener=()=>{},c9(this,a,b),this.addEventListener=c}trigger(a){let b=a.type||a;"string"==typeof a&&(a={type:b}),a=c2(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),c7(this,a)}queueTrigger(a){f||(f=new Map);let b=a.type||a,c=f.get(this);c||(c=new Map,f.set(this,c));let d=c.get(b);c.delete(b),S.default.clearTimeout(d);let e=S.default.setTimeout(()=>{c.delete(b),0===c.size&&(c=null,f.delete(this)),this.trigger(a)},0);c.set(b,e)}}df.prototype.allowedEvents_={},df.prototype.addEventListener=df.prototype.on,df.prototype.removeEventListener=df.prototype.off,df.prototype.dispatchEvent=df.prototype.trigger;let dg=a=>"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a,dh=a=>a instanceof df||!!a.eventBusEl_&&["on","one","off","trigger"].every(b=>"function"==typeof a[b]),di=a=>"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length,dj=(a,b,c)=>{if(!a||!a.nodeName&&!dh(a))throw Error(`Invalid target for ${dg(b)}#${c}; must be a DOM node or evented object.`)},dk=(a,b,c)=>{if(!di(a))throw Error(`Invalid event type for ${dg(b)}#${c}; must be a non-empty string or array.`)},dl=(a,b,c)=>{if("function"!=typeof a)throw Error(`Invalid listener for ${dg(b)}#${c}; must be a function.`)},dm=(a,b,c)=>{let d,e,f,g=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return g?(d=a.eventBusEl_,b.length>=3&&b.shift(),[e,f]=b):(d=b[0],e=b[1],f=b[2]),dj(d,a,c),dk(e,a,c),dl(f,a,c),{isTargetingSelf:g,target:d,type:e,listener:f=db(a,f)}},dn=(a,b,c,d)=>{dj(a,a,b),a.nodeName?da[b](a,c,d):a[b](c,d)},dp={on(...a){let{isTargetingSelf:b,target:c,type:d,listener:e}=dm(this,a,"on");if(dn(c,"on",d,e),!b){let a=()=>this.off(c,d,e);a.guid=e.guid;let b=()=>this.off("dispose",a);b.guid=e.guid,dn(this,"on","dispose",a),dn(c,"on","dispose",b)}},one(...a){let{isTargetingSelf:b,target:c,type:d,listener:e}=dm(this,a,"one");if(b)dn(c,"one",d,e);else{let a=(...b)=>{this.off(c,d,a),e.apply(null,b)};a.guid=e.guid,dn(c,"one",d,a)}},any(...a){let{isTargetingSelf:b,target:c,type:d,listener:e}=dm(this,a,"any");if(b)dn(c,"any",d,e);else{let a=(...b)=>{this.off(c,d,a),e.apply(null,b)};a.guid=e.guid,dn(c,"any",d,a)}},off(a,b,c){!a||di(a)?c6(this.eventBusEl_,a,b):(dj(a,this,"off"),dk(b,this,"off"),dl(c,this,"off"),c=db(this,c),this.off("dispose",c),a.nodeName?(c6(a,b,c),c6(a,"dispose",c)):dh(a)&&(a.off(b,c),a.off("dispose",c)))},trigger(a,b){if(dj(this.eventBusEl_,this,"trigger"),!di(a&&"string"!=typeof a?a.type:a))throw Error(`Invalid event type for ${dg(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return c7(this.eventBusEl_,a,b)}};function dq(a,b={}){let{eventBusKey:c}=b;if(c){if(!a[c].nodeName)throw Error(`The eventBusKey "${c}" does not refer to an element.`);a.eventBusEl_=a[c]}else a.eventBusEl_=cs("span",{className:"vjs-event-bus"});return Object.assign(a,dp),a.eventedCallbacks&&a.eventedCallbacks.forEach(a=>{a()}),a.on("dispose",()=>{a.off(),[a,a.el_,a.eventBusEl_].forEach(function(a){a&&c$.has(a)&&c$.delete(a)}),S.default.setTimeout(()=>{a.eventBusEl_=null},0)}),a}let dr={state:{},setState(a){let b;return"function"==typeof a&&(a=a()),bU(a,(a,c)=>{this.state[c]!==a&&((b=b||{})[c]={from:this.state[c],to:a}),this.state[c]=a}),b&&dh(this)&&this.trigger({changes:b,type:"statechanged"}),b}};function ds(a,b){return Object.assign(a,dr),a.state=Object.assign({},a.state,b),"function"==typeof a.handleStateChanged&&dh(a)&&a.on("statechanged",a.handleStateChanged),a}let dt=function(a){return"string"!=typeof a?a:a.replace(/./,a=>a.toLowerCase())},du=function(a){return"string"!=typeof a?a:a.replace(/./,a=>a.toUpperCase())},dv=function(a,b){return du(a)===du(b)};var dw=Object.freeze({__proto__:null,toLowerCase:dt,toTitleCase:du,titleCaseEquals:dv});class dx{constructor(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=bY({},this.options_),b=this.options_=bY(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){const b=a&&a.id&&a.id()||"no_player";this.id_=`${b}_component_${c_++}`}this.name_=b.name||null,b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl()),b.className&&this.el_&&b.className.split(" ").forEach(a=>this.addClass(a)),["on","off","one","any","trigger"].forEach(a=>{this[a]=void 0}),!1!==b.evented&&(dq(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ds(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==b.initChildren&&this.initChildren(),this.ready(c),!1!==b.reportTouchActivity&&this.enableTouchActivity()}dispose(a={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(a.restoreEl?this.el_.parentNode.replaceChild(a.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(a){return a&&(this.options_=bY(this.options_,a)),this.options_}el(){return this.el_}createEl(a,b,c){return cs(a,b,c)}localize(a,b,c=a){let d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){let d=b[c-1],e=d;return void 0===d&&(e=a),e})),i}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(a){return this.childIndex_[a]}getChild(a){if(a)return this.childNameIndex_[a]}getDescendant(...a){a=a.reduce((a,b)=>a.concat(b),[]);let b=this;for(let c=0;c<a.length;c++)if(!(b=b.getChild(a[c]))||!b.getChild)return;return b}setIcon(a,b=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;let c="http://www.w3.org/2000/svg",d=cs("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),e=T.default.createElementNS(c,"svg");e.setAttributeNS(null,"viewBox","0 0 512 512");let f=T.default.createElementNS(c,"use");return e.appendChild(f),f.setAttributeNS(null,"href",`#vjs-icon-${a}`),d.appendChild(e),this.iconIsSet_?b.replaceChild(d,b.querySelector(".vjs-icon-placeholder")):b.appendChild(d),this.iconIsSet_=!0,d}addChild(a,b={},c=this.children_.length){let d,e;if("string"==typeof a){e=du(a);let c=b.componentClass||e;b.name=e;let f=dx.getComponent(c);if(!f)throw Error(`Component ${c} does not exist`);if("function"!=typeof f)return null;d=new f(this.player_||this,b)}else d=a;if(d.parentComponent_&&d.parentComponent_.removeChild(d),this.children_.splice(c,0,d),d.parentComponent_=this,"function"==typeof d.id&&(this.childIndex_[d.id()]=d),(e=e||d.name&&du(d.name()))&&(this.childNameIndex_[e]=d,this.childNameIndex_[dt(e)]=d),"function"==typeof d.el&&d.el()){let a=null;this.children_[c+1]&&(this.children_[c+1].el_?a=this.children_[c+1].el_:cp(this.children_[c+1])&&(a=this.children_[c+1])),this.contentEl().insertBefore(d.el(),a)}return d}removeChild(a){if("string"==typeof a&&(a=this.getChild(a)),!a||!this.children_)return;let b=!1;for(let c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(!b)return;a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[du(a.name())]=null,this.childNameIndex_[dt(a.name())]=null;let c=a.el();c&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}initChildren(){let a=this.options_.children;if(a){let b,c=this.options_,d=a=>{let b=a.name,d=a.opts;if(void 0!==c[b]&&(d=c[b]),!1===d)return;!0===d&&(d={}),d.playerOptions=this.options_.playerOptions;let e=this.addChild(b,d);e&&(this[b]=e)},e=dx.getComponent("Tech");(b=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter(function(a){return!b.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(b=>{let c,d;return"string"==typeof b?d=a[c=b]||this.options_[c]||{}:(c=b.name,d=b),{name:c,opts:d}}).filter(a=>{let b=dx.getComponent(a.opts.componentClass||du(a.name));return b&&!e.isTech(b)}).forEach(d)}}buildCSSClass(){return""}ready(a,b=!1){if(a){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a);return}b?a.call(this):this.setTimeout(a,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){let a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)}$(a,b){return cP(a,b||this.contentEl())}$$(a,b){return cQ(a,b||this.contentEl())}hasClass(a){return cv(this.el_,a)}addClass(...a){cw(this.el_,...a)}removeClass(...a){cx(this.el_,...a)}toggleClass(a,b){cy(this.el_,a,b)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(a){return cB(this.el_,a)}setAttribute(a,b){cC(this.el_,a,b)}removeAttribute(a){cD(this.el_,a)}width(a,b){return this.dimension("width",a,b)}height(a,b){return this.dimension("height",a,b)}dimensions(a,b){this.width(a,!0),this.height(b)}dimension(a,b,c){if(void 0!==b){(null===b||b!=b)&&(b=0),-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",c||this.trigger("componentresize");return}if(!this.el_)return 0;let d=this.el_.style[a],e=d.indexOf("px");return -1!==e?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+du(a)],10)}currentDimension(a){let b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");if(0===(b=parseFloat(b=cR(this.el_,a)))||isNaN(b)){let c=`offset${du(a)}`;b=this.el_[c]}return b}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){let a=this.el_.getBoundingClientRect();return{boundingClientRect:{x:a.x,y:a.y,width:a.width,height:a.height,top:a.top,right:a.right,bottom:a.bottom,left:a.left},center:{x:a.left+a.width/2,y:a.top+a.height/2,width:0,height:0,top:a.top+a.height/2,right:a.left+a.width/2,bottom:a.top+a.height/2,left:a.left+a.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(a){this.player_&&("Tab"===a.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||a.stopPropagation(),this.player_.handleKeyDown(a))}handleKeyPress(a){this.handleKeyDown(a)}emitTapEvents(){let a,b=0,c=null;this.on("touchstart",function(d){1===d.touches.length&&(c={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},b=S.default.performance.now(),a=!0)}),this.on("touchmove",function(b){if(b.touches.length>1)a=!1;else if(c){let d=b.touches[0].pageX-c.pageX,e=b.touches[0].pageY-c.pageY;Math.sqrt(d*d+e*e)>10&&(a=!1)}});let d=function(){a=!1};this.on("touchleave",d),this.on("touchcancel",d),this.on("touchend",function(d){c=null,!0===a&&S.default.performance.now()-b<200&&(d.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){let a;if(!this.player()||!this.player().reportUserActivity)return;let b=db(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});let c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}setTimeout(a,b){var c;return a=db(this,a),this.clearTimersOnDispose_(),c=S.default.setTimeout(()=>{this.setTimeoutIds_.has(c)&&this.setTimeoutIds_.delete(c),a()},b),this.setTimeoutIds_.add(c),c}clearTimeout(a){return this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_.delete(a),S.default.clearTimeout(a)),a}setInterval(a,b){a=db(this,a),this.clearTimersOnDispose_();let c=S.default.setInterval(a,b);return this.setIntervalIds_.add(c),c}clearInterval(a){return this.setIntervalIds_.has(a)&&(this.setIntervalIds_.delete(a),S.default.clearInterval(a)),a}requestAnimationFrame(a){var b;return this.clearTimersOnDispose_(),a=db(this,a),b=S.default.requestAnimationFrame(()=>{this.rafIds_.has(b)&&this.rafIds_.delete(b),a()}),this.rafIds_.add(b),b}requestNamedAnimationFrame(a,b){this.namedRafs_.has(a)&&this.cancelNamedAnimationFrame(a),this.clearTimersOnDispose_(),b=db(this,b);let c=this.requestAnimationFrame(()=>{b(),this.namedRafs_.has(a)&&this.namedRafs_.delete(a)});return this.namedRafs_.set(a,c),a}cancelNamedAnimationFrame(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_.delete(a))}cancelAnimationFrame(a){return this.rafIds_.has(a)&&(this.rafIds_.delete(a),S.default.cancelAnimationFrame(a)),a}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([a,b])=>{this[a].forEach((a,c)=>this[b](c))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(a){return(a||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(a){var b;function c(a){let b=S.default.getComputedStyle(a,null),c=b.getPropertyValue("visibility");return"none"!==b.getPropertyValue("display")&&!["hidden","collapse"].includes(c)}return a||(a=this.el()),!!(function(a){if(a.offsetWidth+a.offsetHeight+a.getBoundingClientRect().height+a.getBoundingClientRect().width===0)return!1;let b={x:a.getBoundingClientRect().left+a.offsetWidth/2,y:a.getBoundingClientRect().top+a.offsetHeight/2};if(b.x<0||b.x>(T.default.documentElement.clientWidth||S.default.innerWidth)||b.y<0||b.y>(T.default.documentElement.clientHeight||S.default.innerHeight))return!1;let c=T.default.elementFromPoint(b.x,b.y);for(;c;){if(c===a)return!0;if(!c.parentNode)return!1;c=c.parentNode}}(a)&&c((b=a).parentElement)&&c(b)&&"0"!==b.style.opacity&&"0px"!==S.default.getComputedStyle(b).height&&"0px"!==S.default.getComputedStyle(b).width&&1)&&(!a.parentElement||!!(a.tabIndex>=0))}static registerComponent(a,b){if("string"!=typeof a||!a)throw Error(`Illegal component name, "${a}"; must be a non-empty string.`);let c=dx.getComponent("Tech"),d=c&&c.isTech(b),e=dx===b||dx.prototype.isPrototypeOf(b.prototype);if(d||!e){let b;throw b=d?"techs must be registered using Tech.registerTech()":"must be a Component subclass",Error(`Illegal component, "${a}"; ${b}.`)}a=du(a),dx.components_||(dx.components_={});let f=dx.getComponent("Player");if("Player"===a&&f&&f.players){let a=f.players,b=Object.keys(a);if(a&&b.length>0){for(let c=0;c<b.length;c++)if(null!==a[b[c]])throw Error("Can not register Player component after player has been created.")}}return dx.components_[a]=b,dx.components_[dt(a)]=b,b}static getComponent(a){if(a&&dx.components_)return dx.components_[a]}}function dy(a,b,c,d){var e=c.length-1;if("number"!=typeof d||d<0||d>e)throw Error(`Failed to execute '${a}' on 'TimeRanges': The index provided (${d}) is non-numeric or out of bounds (0-${e}).`);return c[d][b]}function dz(a){let b;return b=void 0===a||0===a.length?{length:0,start(){throw Error("This TimeRanges object is empty")},end(){throw Error("This TimeRanges object is empty")}}:{length:a.length,start:dy.bind(null,"start",0,a),end:dy.bind(null,"end",1,a)},S.default.Symbol&&S.default.Symbol.iterator&&(b[S.default.Symbol.iterator]=()=>(a||[]).values()),b}function dA(a,b){return Array.isArray(a)?dz(a):void 0===a||void 0===b?dz():dz([[a,b]])}dx.registerComponent("Component",dx);let dB=function(a,b){let c=Math.floor((a=a<0?0:a)%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),d=(((e=e>0||g>0?e+":":"")||f>=10)&&d<10?"0"+d:d)+":",e+d+(c=c<10?"0"+c:c)},dC=dB;function dD(a){dC=a}function dE(){dC=dB}function dF(a,b=a){return dC(a,b)}var dG=Object.freeze({__proto__:null,createTimeRanges:dA,createTimeRange:dA,setFormatTime:dD,resetFormatTime:dE,formatTime:dF});function dH(a,b){let c,d,e=0;if(!b)return 0;a&&a.length||(a=dA(0,0));for(let f=0;f<a.length;f++)c=a.start(f),(d=a.end(f))>b&&(d=b),e+=d-c;return e/b}function dI(a){if(a instanceof dI)return a;"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:bW(a)&&("number"==typeof a.code&&(this.code=a.code),Object.assign(this,a)),this.message||(this.message=dI.defaultMessages[this.code]||"")}function dJ(a){return null!=a&&"function"==typeof a.then}function dK(a){dJ(a)&&a.then(null,a=>{})}dI.prototype.code=0,dI.prototype.message="",dI.prototype.status=null,dI.prototype.metadata=null,dI.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],dI.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},dI.MEDIA_ERR_CUSTOM=0,dI.prototype.MEDIA_ERR_CUSTOM=0,dI.MEDIA_ERR_ABORTED=1,dI.prototype.MEDIA_ERR_ABORTED=1,dI.MEDIA_ERR_NETWORK=2,dI.prototype.MEDIA_ERR_NETWORK=2,dI.MEDIA_ERR_DECODE=3,dI.prototype.MEDIA_ERR_DECODE=3,dI.MEDIA_ERR_SRC_NOT_SUPPORTED=4,dI.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,dI.MEDIA_ERR_ENCRYPTED=5,dI.prototype.MEDIA_ERR_ENCRYPTED=5;let dL=function(a){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((b,c,d)=>(a[c]&&(b[c]=a[c]),b),{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})};var dM=function(a){let b=a.$$("track"),c=Array.prototype.map.call(b,a=>a.track);return Array.prototype.map.call(b,function(a){let b=dL(a.track);return a.src&&(b.src=a.src),b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return -1===c.indexOf(a)}).map(dL))};let dN="vjs-modal-dialog";class dO extends dx{constructor(a,b){super(a,b),this.handleKeyDown_=a=>this.handleKeyDown(a),this.close_=a=>this.close(a),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=cs("div",{className:`${dN}-content`},{role:"document"}),this.descEl_=cs("p",{className:`${dN}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ct(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${dN} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}let a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_}close(){if(!this.opened_)return;let a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(a){if("boolean"==typeof a){let b=this.closeable_=!!a,c=this.getChild("closeButton");if(b&&!c){let a=this.contentEl_;this.contentEl_=this.el_,c=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(c,"close",this.close_)}!b&&c&&(this.off(c,"close",this.close_),this.removeChild(c),c.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(a){let b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),cN(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);let e=this.getChild("closeButton");e&&c.appendChild(e.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),cK(this.contentEl()),this.trigger("modalempty")}content(a){return void 0!==a&&(this.content_=a),this.content_}conditionalFocus_(){let a=T.default.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,(b.contains(a)||b===a)&&(this.previouslyActiveEl_=a,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(a){let b;if(this.trigger({type:"modalKeydown",originalEvent:a,target:this,bubbles:!0}),a.stopPropagation(),"Escape"===a.key&&this.closeable()){a.preventDefault(),this.close();return}if("Tab"!==a.key)return;let c=this.focusableEls_(),d=this.el_.querySelector(":focus");for(let a=0;a<c.length;a++)if(d===c[a]){b=a;break}T.default.activeElement===this.el_&&(b=0),a.shiftKey&&0===b?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||b!==c.length-1||(c[0].focus(),a.preventDefault())}focusableEls_(){let a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,a=>(a instanceof S.default.HTMLAnchorElement||a instanceof S.default.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof S.default.HTMLInputElement||a instanceof S.default.HTMLSelectElement||a instanceof S.default.HTMLTextAreaElement||a instanceof S.default.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof S.default.HTMLIFrameElement||a instanceof S.default.HTMLObjectElement||a instanceof S.default.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable"))}}dO.prototype.options_={pauseOnOpen:!0,temporary:!0},dx.registerComponent("ModalDialog",dO);class dP extends df{constructor(a=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let b=0;b<a.length;b++)this.addTrack(a[b])}addTrack(a){let b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.tracks_[b]}}),-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this})),a.labelchange_=()=>{this.trigger({track:a,type:"labelchange",target:this})},dh(a)&&a.addEventListener("labelchange",a.labelchange_)}removeTrack(a){let b;for(let c=0,d=this.length;c<d;c++)if(this[c]===a){(b=this[c]).off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})}getTrackById(a){let b=null;for(let c=0,d=this.length;c<d;c++){let d=this[c];if(d.id===a){b=d;break}}return b}}for(let a in dP.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},dP.prototype.allowedEvents_)dP.prototype["on"+a]=null;let dQ=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)};class dR extends dP{constructor(a=[]){for(let b=a.length-1;b>=0;b--)if(a[b].enabled){dQ(a,a[b]);break}super(a),this.changing_=!1}addTrack(a){a.enabled&&dQ(this,a),super.addTrack(a),a.addEventListener&&(a.enabledChange_=()=>{this.changing_||(this.changing_=!0,dQ(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("enabledchange",a.enabledChange_))}removeTrack(a){super.removeTrack(a),a.removeEventListener&&a.enabledChange_&&(a.removeEventListener("enabledchange",a.enabledChange_),a.enabledChange_=null)}}let dS=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)};class dT extends dP{constructor(a=[]){for(let b=a.length-1;b>=0;b--)if(a[b].selected){dS(a,a[b]);break}super(a),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let a=0;a<this.length;a++)if(this[a].selected)return a;return -1},set(){}})}addTrack(a){a.selected&&dS(this,a),super.addTrack(a),a.addEventListener&&(a.selectedChange_=()=>{this.changing_||(this.changing_=!0,dS(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("selectedchange",a.selectedChange_))}removeTrack(a){super.removeTrack(a),a.removeEventListener&&a.selectedChange_&&(a.removeEventListener("selectedchange",a.selectedChange_),a.selectedChange_=null)}}class dU extends dP{addTrack(a){super.addTrack(a),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),a.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(a.kind)&&a.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(a){super.removeTrack(a),a.removeEventListener&&(this.queueChange_&&a.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&a.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(a=>a.toJSON())}}class dV{constructor(a){dV.prototype.setCues_.call(this,a),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(a){let b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;let e=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)}getCueById(a){let b=null;for(let c=0,d=this.length;c<d;c++){let d=this[c];if(d.id===a){b=d;break}}return b}}let dW={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},dX={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},dY={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},dZ={disabled:"disabled",hidden:"hidden",showing:"showing"};class d$ extends df{constructor(a={}){super();const b={id:a.id||"vjs_track_"+c_++,kind:a.kind||"",language:a.language||""};let c=a.label||"";for(const a in b)Object.defineProperty(this,a,{get:()=>b[a],set(){}});Object.defineProperty(this,"label",{get:()=>c,set(a){a!==c&&(c=a,this.trigger("labelchange"))}})}}let d_=function(a){return new URL(a,T.default.baseURI)},d0=function(a){return new URL(a,T.default.baseURI).href},d1=function(a){if("string"==typeof a){let b=a.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return b?b[1].toLowerCase():""}return""},d2=function(a,b=S.default.location){return d_(a).origin!==b.origin};var d3=Object.freeze({__proto__:null,parseUrl:d_,getAbsoluteURL:d0,getFileExtension:d1,isCrossOrigin:d2});let d4=function(a,b){let c=new S.default.WebVTT.Parser(S.default,S.default.vttjs,S.default.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(S.default.console&&S.default.console.groupCollapsed&&S.default.console.groupCollapsed(`Text Track parsing errors for ${b.src}`),d.forEach(a=>bQ.error(a)),S.default.console&&S.default.console.groupEnd&&S.default.console.groupEnd()),c.flush()},d5=function(a,b){let c={uri:a},d=d2(a);d&&(c.cors=d);let e="use-credentials"===b.tech_.crossOrigin();e&&(c.withCredentials=e),(0,U.default)(c,db(this,function(a,c,d){if(a)return bQ.error(a,c);b.loaded_=!0,"function"!=typeof S.default.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],a=>"vttjserror"===a.type?void bQ.error(`vttjs failed to load, stopping trying to process ${b.src}`):d4(d,b)):d4(d,b)}))};class d6 extends d${constructor(a={}){if(!a.tech)throw Error("A tech was not provided.");const b=bY(a,{kind:dY[a.kind]||"subtitles",language:a.language||a.srclang||""});let c=dZ[b.mode]||"disabled";const d=b.default;("metadata"===b.kind||"chapters"===b.kind)&&(c="hidden"),super(b),this.tech_=b.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const e=new dV(this.cues_),f=new dV(this.activeCues_);let g=!1;this.timeupdateHandler=db(this,function(a={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){"timeupdate"!==a.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,g&&(this.trigger("cuechange"),g=!1),"timeupdate"!==a.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const h=()=>{this.stopTracking()};this.tech_.one("dispose",h),"disabled"!==c&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>d,set(){}},mode:{get:()=>c,set(a){dZ[a]&&c!==a&&(c=a,this.preload_||"disabled"===c||0!==this.cues.length||d5(this.src,this),this.stopTracking(),"disabled"!==c&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?e:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return f;let a=this.tech_.currentTime(),b=[];for(let c=0,d=this.cues.length;c<d;c++){let d=this.cues[c];d.startTime<=a&&d.endTime>=a&&b.push(d)}if(g=!1,b.length!==this.activeCues_.length)g=!0;else for(let a=0;a<b.length;a++)-1===this.activeCues_.indexOf(b[a])&&(g=!0);return this.activeCues_=b,f.setCues_(this.activeCues_),f},set(){}}}),b.src?(this.src=b.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==b.kind&&"captions"!==b.kind)&&d5(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(a){let b=a;if(!("getCueAsHTML"in b)){for(let c in b=new S.default.vttjs.VTTCue(a.startTime,a.endTime,a.text),a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}let c=this.tech_.textTracks();for(let a=0;a<c.length;a++)c[a]!==this&&c[a].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)}toJSON(){return dL(this)}removeCue(a){let b=this.cues_.length;for(;b--;){let c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}}}d6.prototype.allowedEvents_={cuechange:"cuechange"};class d7 extends d${constructor(a={}){const b=bY(a,{kind:dX[a.kind]||""});super(b);let c=!1;Object.defineProperty(this,"enabled",{get:()=>c,set(a){"boolean"==typeof a&&a!==c&&(c=a,this.trigger("enabledchange"))}}),b.enabled&&(this.enabled=b.enabled),this.loaded_=!0}}class d8 extends d${constructor(a={}){const b=bY(a,{kind:dW[a.kind]||""});super(b);let c=!1;Object.defineProperty(this,"selected",{get:()=>c,set(a){"boolean"==typeof a&&a!==c&&(c=a,this.trigger("selectedchange"))}}),b.selected&&(this.selected=b.selected)}}class d9 extends df{constructor(a={}){let b;super();const c=new d6(a);this.kind=c.kind,this.src=c.src,this.srclang=c.language,this.label=c.label,this.default=c.default,Object.defineProperties(this,{readyState:{get:()=>b},track:{get:()=>c}}),b=d9.NONE,c.addEventListener("loadeddata",()=>{b=d9.LOADED,this.trigger({type:"load",target:this})})}}d9.prototype.allowedEvents_={load:"load"},d9.NONE=0,d9.LOADING=1,d9.LOADED=2,d9.ERROR=3;let ea={audio:{ListClass:dR,TrackClass:d7,capitalName:"Audio"},video:{ListClass:dT,TrackClass:d8,capitalName:"Video"},text:{ListClass:dU,TrackClass:d6,capitalName:"Text"}};Object.keys(ea).forEach(function(a){ea[a].getterName=`${a}Tracks`,ea[a].privateName=`${a}Tracks_`});let eb={remoteText:{ListClass:dU,TrackClass:d6,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(a=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}addTrackElement_(a){let b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.trackElements_[b]}}),-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)}getTrackElementByTrack_(a){let b;for(let c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b}removeTrackElement_(a){for(let b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}}},TrackClass:d9,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ec=Object.assign({},ea,eb);eb.names=Object.keys(eb),ea.names=Object.keys(ea),ec.names=[].concat(eb.names).concat(ea.names);class ed extends dx{constructor(a={},b=function(){}){a.reportTouchActivity=!1,super(null,a,b),this.onDurationChange_=a=>this.onDurationChange(a),this.trackProgress_=a=>this.trackProgress(a),this.trackCurrentTime_=a=>this.trackCurrentTime(a),this.stopTrackingCurrentTime_=a=>this.stopTrackingCurrentTime(a),this.disposeSourceHandler_=a=>this.disposeSourceHandler(a),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ec.names.forEach(b=>{let c=ec[b];a&&a[c.getterName]&&(this[c.privateName]=a[c.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(b=>{!1===a[`native${b}Tracks`]&&(this[`featuresNative${b}Tracks`]=!1)}),!1===a.nativeCaptions||!1===a.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===a.nativeCaptions||!0===a.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==a.preloadTextTracks,this.autoRemoteTextTracks_=new ec.text.ListClass,this.initTrackListeners(),a.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(a){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(a),1)),this.trigger({src:a,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(db(this,function(){let a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)}onDurationChange(a){this.duration_=this.duration()}buffered(){return dA(0,0)}bufferedPercent(){return dH(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(ea.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(a){(a=[].concat(a)).forEach(a=>{let b=this[`${a}Tracks`]()||[],c=b.length;for(;c--;){let d=b[c];"text"===a&&this.removeRemoteTextTrack(d),b.removeTrack(d)}})}cleanupAutoTextTracks(){let a=this.autoRemoteTextTracks_||[],b=a.length;for(;b--;){let c=a[b];this.removeRemoteTextTrack(c)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(a){return void 0!==a&&(this.error_=new dI(a),this.trigger("error")),this.error_}played(){return this.hasStarted_?dA(0,0):dA()}play(){}setScrubbing(a){}scrubbing(){}setCurrentTime(a){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){ea.names.forEach(a=>{let b=ea[a],c=()=>{this.trigger(`${a}trackchange`)},d=this[b.getterName]();d.addEventListener("removetrack",c),d.addEventListener("addtrack",c),this.on("dispose",()=>{d.removeEventListener("removetrack",c),d.removeEventListener("addtrack",c)})})}addWebVttScript_(){if(!S.default.WebVTT)if(T.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&bX(V.default)&&Object.keys(V.default).length>0)return void this.trigger("vttjsloaded");let a=T.default.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=()=>{this.trigger("vttjsloaded")},a.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{a.onload=null,a.onerror=null}),S.default.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let a=this.textTracks(),b=this.remoteTextTracks(),c=b=>a.addTrack(b.track),d=b=>a.removeTrack(b.track);b.on("addtrack",c),b.on("removetrack",d),this.addWebVttScript_();let e=()=>this.trigger("texttrackchange"),f=()=>{e();for(let b=0;b<a.length;b++){let c=a[b];c.removeEventListener("cuechange",e),"showing"===c.mode&&c.addEventListener("cuechange",e)}};f(),a.addEventListener("change",f),a.addEventListener("addtrack",f),a.addEventListener("removetrack",f),this.on("dispose",function(){b.off("addtrack",c),b.off("removetrack",d),a.removeEventListener("change",f),a.removeEventListener("addtrack",f),a.removeEventListener("removetrack",f);for(let b=0;b<a.length;b++)a[b].removeEventListener("cuechange",e)})}addTextTrack(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");return function(a,b,c,d,e={}){let f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;let g=new ec.text.TrackClass(e);return f.addTrack(g),g}(this,a,b,c)}createRemoteTextTrack(a){let b=bY(a,{tech:this});return new eb.remoteTextEl.TrackClass(b)}addRemoteTextTrack(a={},b){let c=this.createRemoteTextTrack(a);return"boolean"!=typeof b&&(b=!1),this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),!1===b&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(c.track)),c}removeRemoteTextTrack(a){let b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(a){let b=c_++;return!this.isReady_||this.paused()?(this.queuedHanders_.add(b),this.one("playing",()=>{this.queuedHanders_.has(b)&&(this.queuedHanders_.delete(b),a())})):this.requestNamedAnimationFrame(b,a),b}cancelVideoFrameCallback(a){this.queuedHanders_.has(a)?this.queuedHanders_.delete(a):this.cancelNamedAnimationFrame(a)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(a){}overrideNativeVideoTracks(a){}canPlayType(a){return""}static canPlayType(a){return""}static canPlaySource(a,b){return ed.canPlayType(a.type)}static isTech(a){return a.prototype instanceof ed||a instanceof ed||a===ed}static registerTech(a,b){if(ed.techs_||(ed.techs_={}),!ed.isTech(b))throw Error(`Tech ${a} must be a Tech`);if(!ed.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!ed.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");return a=du(a),ed.techs_[a]=b,ed.techs_[dt(a)]=b,"Tech"!==a&&ed.defaultTechOrder_.push(a),b}static getTech(a){if(a){if(ed.techs_&&ed.techs_[a])return ed.techs_[a];if(a=du(a),S.default&&S.default.videojs&&S.default.videojs[a])return bQ.warn(`The ${a} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),S.default.videojs[a]}}}ec.names.forEach(function(a){let b=ec[a];ed.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),ed.prototype.featuresVolumeControl=!0,ed.prototype.featuresMuteControl=!0,ed.prototype.featuresFullscreenResize=!1,ed.prototype.featuresPlaybackRate=!1,ed.prototype.featuresProgressEvents=!1,ed.prototype.featuresSourceset=!1,ed.prototype.featuresTimeupdateEvents=!1,ed.prototype.featuresNativeTextTracks=!1,ed.prototype.featuresVideoFrameCallback=!1,ed.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){let d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){let c,d=a.sourceHandlers||[];for(let a=0;a<d.length;a++)if(c=d[a].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){let d=a.sourceHandlers||[];for(let a=0;a<d.length;a++)if(d[a].canHandleSource(b,c))return d[a];return null},a.canPlaySource=function(b,c){let d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""},["seekable","seeking","duration"].forEach(function(a){let b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){let c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:bQ.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},dx.registerComponent("Tech",ed),ed.registerTech("Tech",ed),ed.defaultTechOrder_=[];let ee={},ef={},eg={};function eh(a,b,c,d=null){let e="call"+du(c),f=a.reduce(el(e),d),g=f===eg,h=g?null:b[c](f);return function(a,b,c,d){for(let e=a.length-1;e>=0;e--){let f=a[e];f[b]&&f[b](d,c)}}(a,c,h,g),h}let ei={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ej={setCurrentTime:1,setMuted:1,setVolume:1},ek={play:1,pause:1};function el(a){return(b,c)=>b===eg?eg:c[a]?c[a](b):b}let em={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},en=function(a=""){return em[d1(a).toLowerCase()]||""},eo=function(a){if(Array.isArray(a)){let b=[];a.forEach(function(a){Array.isArray(a=eo(a))?b=b.concat(a):bW(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[ep({src:a})]:bW(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[ep(a)]:[];return a};function ep(a){if(!a.type){let b=en(a.src);b&&(a.type=b)}return a}let eq=cf?10009:cg?461:8,er={codes:{play:415,pause:19,ff:417,rw:412,back:eq},names:{415:"play",19:"pause",417:"ff",412:"rw",[eq]:"back"},isEventKey(a,b){return b=b.toLowerCase(),!!this.names[a.keyCode]&&this.names[a.keyCode]===b},getEventName(a){if(this.names[a.keyCode])return this.names[a.keyCode];if(this.codes[a.code]){let b=this.codes[a.code];return this.names[b]}return null}};class es extends df{constructor(a){super(),this.player_=a,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){!this.isListening_&&(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(a){let b=a.originalEvent?a.originalEvent:a;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(b.key)){if(this.isPaused_)return;b.preventDefault();let a=b.key.substring(5).toLowerCase();this.move(a)}else if(er.isEventKey(b,"play")||er.isEventKey(b,"pause")||er.isEventKey(b,"ff")||er.isEventKey(b,"rw")){b.preventDefault();let a=er.getEventName(b);this.performMediaAction_(a)}else er.isEventKey(b,"Back")&&a.target&&"function"==typeof a.target.closeable&&a.target.closeable()&&(b.preventDefault(),a.target.close())}performMediaAction_(a){if(this.player_)switch(a){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(a)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(a){let b=a.relatedTarget,c=null,d=this.getCurrentComponent(a.target);b&&(c=!!b.closest(".video-js"),b.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!a.currentTarget.contains(a.relatedTarget)&&!c||!b)&&(d&&"CloseButton"===d.name()?this.refocusComponent():(this.pause(),d&&d.el()&&(this.lastFocusedComponent_=d)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){let a=this.player_,b=[];function c(a){for(let d of a)d.hasOwnProperty("el_")&&d.getIsFocusable()&&d.getIsAvailableToBeFocused(d.el())&&b.push(d),d.hasOwnProperty("children_")&&d.children_.length>0&&c(d.children_)}return a.children_.forEach(a=>{if(a.hasOwnProperty("el_"))if(a.getIsFocusable&&a.getIsAvailableToBeFocused&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el()))return void b.push(a);else a.hasOwnProperty("children_")&&a.children_.length>0?c(a.children_):a.hasOwnProperty("items")&&a.items.length>0?c(a.items):this.findSuitableDOMChild(a)&&b.push(a);if("ErrorDisplay"===a.name_&&a.opened_){let c=a.el_.querySelector(".vjs-errors-ok-button-container");c&&c.querySelectorAll("button").forEach((a,c)=>{b.push({name:()=>"ModalButton"+(c+1),el:()=>a,getPositions:()=>{let b=a.getBoundingClientRect();return{boundingClientRect:{x:b.x,y:b.y,width:b.width,height:b.height,top:b.top,right:b.right,bottom:b.bottom,left:b.left},center:{x:b.left+b.width/2,y:b.top+b.height/2,width:0,height:0,top:b.top+b.height/2,right:b.left+b.width/2,bottom:b.top+b.height/2,left:b.left+b.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:a=>!0,focus:()=>a.focus()})})}}),this.focusableComponents=b,this.focusableComponents}findSuitableDOMChild(a){return a.el()?function b(c){if(a.getIsFocusable(c)&&a.getIsAvailableToBeFocused(c))return c;for(let a=0;a<c.children.length;a++){let d=b(c.children[a]);if(d)return d}return null}(a.el()):null}getCurrentComponent(a){this.updateFocusableComponents();let b=a||document.activeElement;if(this.focusableComponents.length){for(let a of this.focusableComponents)if(a.el()===b)return a}}add(a){let b=[...this.focusableComponents];a.hasOwnProperty("el_")&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())&&b.push(a),this.focusableComponents=b,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(a){for(let b=0;b<this.focusableComponents.length;b++)if(this.focusableComponents[b].name()===a.name()){this.focusableComponents.splice(b,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(a){let b=this.getCurrentComponent();if(!b)return;let c=b.getPositions(),d=this.focusableComponents.filter(d=>d!==b&&this.isInDirection_(c.boundingClientRect,d.getPositions().boundingClientRect,a)),e=this.findBestCandidate_(c.center,d,a);e?this.focus(e):this.trigger({type:"endOfFocusableComponents",direction:a,focusedComponent:b})}findBestCandidate_(a,b,c){let d=1/0,e=null;for(let f of b){let b=f.getPositions().center,g=this.calculateDistance_(a,b,c);g<d&&(d=g,e=f)}return e}isInDirection_(a,b,c){switch(c){case"right":return b.left>=a.right;case"left":return b.right<=a.left;case"down":return b.top>=a.bottom;case"up":return b.bottom<=a.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let a=0;a<this.focusableComponents.length;a++)if(this.focusableComponents[a].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[a])}else this.focus(this.updateFocusableComponents()[0])}focus(a){"object"==typeof a&&(a.getIsAvailableToBeFocused(a.el())?a.focus():this.findSuitableDOMChild(a)&&this.findSuitableDOMChild(a).focus())}calculateDistance_(a,b,c){let d,e=Math.abs(a.x-b.x),f=Math.abs(a.y-b.y);switch(c){case"right":case"left":d=e+100*f;break;case"up":d=2*f+.5*e;break;case"down":d=5*f+e;break;default:d=e+f}return d}searchForTrackSelect_(){for(let a of this.updateFocusableComponents())if("TextTrackSelect"===a.constructor.name){this.focus(a);break}}}dx.registerComponent("MediaLoader",class extends dx{constructor(a,b,c){if(super(a,bY({createEl:!1},b),c),b.playerOptions.sources&&0!==b.playerOptions.sources.length)a.src(b.playerOptions.sources);else for(let c=0,d=b.playerOptions.techOrder;c<d.length;c++){const b=du(d[c]);let e=ed.getTech(b);if(b||(e=dx.getComponent(b)),e&&e.isSupported()){a.loadTech_(b);break}}}});class et extends dx{constructor(a,b){super(a,b),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=a=>this.handleMouseOver(a),this.handleMouseOut_=a=>this.handleMouseOut(a),this.handleClick_=a=>this.handleClick(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.emitTapEvents(),this.enable()}createEl(a="div",b={},c={}){b=Object.assign({className:this.buildCSSClass(),tabIndex:0},b),"button"===a&&bQ.error(`Creating a ClickableComponent with an HTML element of ${a} is not supported; use a Button instead.`),c=Object.assign({role:"button"},c),this.tabIndex_=b.tabIndex;let d=cs(a,b,c);return this.player_.options_.experimentalSvgIcons||d.appendChild(cs("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(a){return this.controlTextEl_=cs("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_}controlText(a,b=this.el()){if(void 0===a)return this.controlText_||"Need Text";let c=this.localize(a);this.controlText_=a,ct(this.controlTextEl_,c),this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",c)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(a){" "===a.key||"Enter"===a.key?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}}dx.registerComponent("ClickableComponent",et);class eu extends et{constructor(a,b){super(a,b),this.update(),this.update_=a=>this.update(a),a.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return cs("div",{className:"vjs-poster"})}crossOrigin(a){if(void 0===a)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null!==a&&"anonymous"!==a&&"use-credentials"!==a?this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):this.$("img")&&(this.$("img").crossOrigin=a)}update(a){let b=this.player().poster();this.setSrc(b),b?this.show():this.hide()}setSrc(a){if(!a){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(cs("picture",{className:"vjs-poster",tabIndex:-1},{},cs("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=a}handleClick(a){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?dK(this.player_.play()):this.player_.pause())}}eu.prototype.crossorigin=eu.prototype.crossOrigin,dx.registerComponent("PosterImage",eu);let ev="#222",ew="#ccc",ex={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ey(a,b){let c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(7===a.length)c=a.slice(1);else throw Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function ez(a,b,c){try{a.style[b]=c}catch(a){return}}function eA(a){return a?`${a}px`:""}dx.registerComponent("TextTrackDisplay",class extends dx{constructor(a,b,c){super(a,b,c);const d=a=>this.updateDisplay(a),e=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};a.on("loadstart",a=>this.toggleDisplay(a)),a.on("useractive",d),a.on("userinactive",d),a.on("texttrackchange",d),a.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),a.ready(db(this,function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)return void this.hide();a.on("fullscreenchange",e),a.on("playerresize",e);let b=S.default.screen.orientation||S.default,c=S.default.screen.orientation?"change":"orientationchange";b.addEventListener(c,e),a.on("dispose",()=>b.removeEventListener(c,e));let d=this.options_.playerOptions.tracks||[];for(let a=0;a<d.length;a++)this.player_.addRemoteTextTrack(d[a],!0);this.preselectTrack()}))}preselectTrack(){let a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage;for(let g=0;g<e.length;g++){let h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?h.kind===f.kind?c=h:c||(c=h):f&&!f.enabled?(c=null,a=null,b=null):h.default&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof S.default.WebVTT&&S.default.WebVTT.processCues(S.default,[],this.el_)}updateDisplay(){let a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){let b=[];for(let c=0;c<a.length;++c){let d=a[c];"showing"===d.mode&&b.push(d)}this.updateForTrack(b);return}let c=null,d=null,e=a.length;for(;e--;){let b=a[e];"showing"===b.mode&&("descriptions"===b.kind?c=b:d=b)}if(d?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(d)):c&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c)),!S.default.CSS.supports("inset","10px")){let a=this.el_,b=a.querySelectorAll(".vjs-text-track-cue"),c=this.player_.controlBar.el_.getBoundingClientRect().height,d=this.player_.el_.getBoundingClientRect().height;a.style="",ez(a,"position","relative"),ez(a,"height",d-c+"px"),ez(a,"top","unset"),ch?ez(a,"bottom",d+"px"):ez(a,"bottom","0px"),b.length>0&&b.forEach(a=>{if(a.style.inset){let b=a.style.inset.split(" ");3===b.length&&Object.assign(a.style,{top:b[0],right:b[1],bottom:b[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!S.default.CSS.supports("inset-inline: 10px"))return;let a=this.player_.currentWidth(),b=this.player_.currentHeight(),c=a/b,d=this.player_.videoWidth()/this.player_.videoHeight(),e=0,f=0;Math.abs(c-d)>.1&&(c>d?e=Math.round((a-b*d)/2):f=Math.round((b-a/d)/2)),ez(this.el_,"insetInline",eA(e)),ez(this.el_,"insetBlock",eA(f))}updateDisplayState(a){let b=this.player_.textTrackSettings.getValues(),c=a.activeCues,d=c.length;for(;d--;){let a=c[d];if(!a)continue;let e=a.displayState;if(b.color&&(e.firstChild.style.color=b.color),b.textOpacity&&ez(e.firstChild,"color",ey(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(e.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&ez(e.firstChild,"backgroundColor",ey(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?ez(e,"backgroundColor",ey(b.windowColor,b.windowOpacity)):e.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?e.firstChild.style.textShadow=`2px 2px 3px ${ev}, 2px 2px 4px ${ev}, 2px 2px 5px ${ev}`:"raised"===b.edgeStyle?e.firstChild.style.textShadow=`1px 1px ${ev}, 2px 2px ${ev}, 3px 3px ${ev}`:"depressed"===b.edgeStyle?e.firstChild.style.textShadow=`1px 1px ${ew}, 0 1px ${ew}, -1px -1px ${ev}, 0 -1px ${ev}`:"uniform"===b.edgeStyle&&(e.firstChild.style.textShadow=`0 0 4px ${ev}, 0 0 4px ${ev}, 0 0 4px ${ev}, 0 0 4px ${ev}`)),b.fontPercent&&1!==b.fontPercent){let a=S.default.parseFloat(e.style.fontSize);e.style.fontSize=a*b.fontPercent+"px",e.style.height="auto",e.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?e.firstChild.style.fontVariant="small-caps":e.firstChild.style.fontFamily=ex[b.fontFamily])}}updateForTrack(a){if(Array.isArray(a)||(a=[a]),"function"!=typeof S.default.WebVTT||a.every(a=>!a.activeCues))return;let b=[];for(let c=0;c<a.length;++c){let d=a[c];for(let a=0;a<d.activeCues.length;++a)b.push(d.activeCues[a])}S.default.WebVTT.processCues(S.default,b,this.el_);for(let b=0;b<a.length;++b){let c=a[b];for(let a=0;a<c.activeCues.length;++a){let d=c.activeCues[a].displayState;cw(d,"vjs-text-track-cue","vjs-text-track-cue-"+(c.language?c.language:b)),c.language&&cC(d,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}}),dx.registerComponent("LoadingSpinner",class extends dx{createEl(){let a=this.player_.isAudio(),b=this.localize(a?"Audio Player":"Video Player"),c=cs("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[b])}),d=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return d.appendChild(c),d}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class eB extends et{createEl(a,b={},c={}){a="button",b=Object.assign({className:this.buildCSSClass()},b),c=Object.assign({type:"button"},c);let d=cs(a,b,c);return this.player_.options_.experimentalSvgIcons||d.appendChild(cs("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d}addChild(a,b={}){let c=this.constructor.name;return bQ.warn(`Adding an actionable (user controllable) child to a Button (${c}) is not supported; use a ClickableComponent instead.`),dx.prototype.addChild.call(this,a,b)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(a){" "===a.key||"Enter"===a.key?a.stopPropagation():super.handleKeyDown(a)}}dx.registerComponent("Button",eB);class eC extends eB{constructor(a,b){super(a,b),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",a=>this.handleMouseDown(a))}buildCSSClass(){return"vjs-big-play-button"}handleClick(a){let b=this.player_.play();if("tap"===a.type||this.mouseused_&&"clientX"in a&&"clientY"in a){dK(b),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}let c=this.player_.getChild("controlBar"),d=c&&c.getChild("playToggle");if(!d)return void this.player_.tech(!0).focus();let e=()=>d.focus();dJ(b)?b.then(e,()=>{}):this.setTimeout(e,1)}handleKeyDown(a){this.mouseused_=!1,super.handleKeyDown(a)}handleMouseDown(a){this.mouseused_=!0}}eC.prototype.controlText_="Play Video",dx.registerComponent("BigPlayButton",eC),dx.registerComponent("CloseButton",class extends eB{constructor(a,b){super(a,b),this.setIcon("cancel"),this.controlText(b&&b.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(a){this.trigger({type:"close",bubbles:!1})}handleKeyDown(a){"Escape"===a.key?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}});class eD extends eB{constructor(a,b={}){super(a,b),b.replay=void 0===b.replay||b.replay,this.setIcon("play"),this.on(a,"play",a=>this.handlePlay(a)),this.on(a,"pause",a=>this.handlePause(a)),b.replay&&this.on(a,"ended",a=>this.handleEnded(a))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(a){this.player_.paused()?dK(this.player_.play()):this.player_.pause()}handleSeeked(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)}handlePlay(a){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(a){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",a=>this.handleSeeked(a))}}eD.prototype.controlText_="Play",dx.registerComponent("PlayToggle",eD);class eE extends dx{constructor(a,b){super(a,b),this.on(a,["timeupdate","ended","seeking"],a=>this.update(a)),this.updateTextNode_()}createEl(){let a=this.buildCSSClass(),b=super.createEl("div",{className:`${a} vjs-time-control vjs-control`}),c=cs("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\u00a0`},{role:"presentation"});return b.appendChild(c),this.contentEl_=cs("span",{className:`${a}-display`},{role:"presentation"}),b.appendChild(this.contentEl_),b}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(a){(this.player_.options_.enableSmoothSeeking||"seeking"!==a.type)&&this.updateContent(a)}updateTextNode_(a=0){a=dF(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let a=this.textNode_;a&&this.contentEl_.firstChild!==a&&(a=null,bQ.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=T.default.createTextNode(this.formattedTime_),this.textNode_&&(a?this.contentEl_.replaceChild(this.textNode_,a):this.contentEl_.appendChild(this.textNode_))}))}updateContent(a){}}eE.prototype.labelText_="Time",eE.prototype.controlText_="Time",dx.registerComponent("TimeDisplay",eE);class eF extends eE{buildCSSClass(){return"vjs-current-time"}updateContent(a){let b;b=this.player_.ended()?this.player_.duration():a&&a.target&&"function"==typeof a.target.pendingSeekTime?a.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)}}eF.prototype.labelText_="Current Time",eF.prototype.controlText_="Current Time",dx.registerComponent("CurrentTimeDisplay",eF);class eG extends eE{constructor(a,b){super(a,b);const c=a=>this.updateContent(a);this.on(a,"durationchange",c),this.on(a,"loadstart",c),this.on(a,"loadedmetadata",c)}buildCSSClass(){return"vjs-duration"}updateContent(a){let b=this.player_.duration();this.updateTextNode_(b)}}eG.prototype.labelText_="Duration",eG.prototype.controlText_="Duration",dx.registerComponent("DurationDisplay",eG),dx.registerComponent("TimeDivider",class extends dx{createEl(){let a=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),b=super.createEl("div"),c=super.createEl("span",{textContent:"/"});return b.appendChild(c),a.appendChild(b),a}});class eH extends eE{constructor(a,b){super(a,b),this.on(a,"durationchange",a=>this.updateContent(a))}buildCSSClass(){return"vjs-remaining-time"}createEl(){let a=super.createEl();return!1!==this.options_.displayNegative&&a.insertBefore(cs("span",{},{"aria-hidden":!0},"-"),this.contentEl_),a}updateContent(a){let b;"number"==typeof this.player_.duration()&&(b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b))}}eH.prototype.labelText_="Remaining Time",eH.prototype.controlText_="Remaining Time",dx.registerComponent("RemainingTimeDisplay",eH),dx.registerComponent("LiveDisplay",class extends dx{constructor(a,b){super(a,b),this.updateShowing(),this.on(this.player(),"durationchange",a=>this.updateShowing(a))}createEl(){let a=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=cs("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(cs("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\u00a0`})),this.contentEl_.appendChild(T.default.createTextNode(this.localize("LIVE"))),a.appendChild(this.contentEl_),a}dispose(){this.contentEl_=null,super.dispose()}updateShowing(a){this.player().duration()===1/0?this.show():this.hide()}});class eI extends eB{constructor(a,b){super(a,b),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=a=>this.updateLiveEdgeStatus(a),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){let a=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",a),this.textEl_=cs("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),a.appendChild(this.textEl_),a}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function eJ(a,b,c){return Math.min(c,Math.max(b,isNaN(a=Number(a))?b:a))}eI.prototype.controlText_="Seek to live, currently playing live",dx.registerComponent("SeekToLive",eI);var eK=Object.freeze({__proto__:null,clamp:eJ});class eL extends dx{constructor(a,b){super(a,b),this.handleMouseDown_=a=>this.handleMouseDown(a),this.handleMouseUp_=a=>this.handleMouseUp(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.handleClick_=a=>this.handleClick(a),this.handleMouseMove_=a=>this.handleMouseMove(a),this.update_=a=>this.update(a),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;let a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(a,b={},c={}){return b.className=b.className+" vjs-slider",b=Object.assign({tabIndex:0},b),c=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},c),super.createEl(a,b,c)}handleMouseDown(a){let b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||b6||a.preventDefault(),cE(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove_),this.on(b,"mouseup",this.handleMouseUp_),this.on(b,"touchmove",this.handleMouseMove_),this.on(b,"touchend",this.handleMouseUp_),this.handleMouseMove(a,!0)}handleMouseMove(a){}handleMouseUp(a){let b=this.bar.el_.ownerDocument;cF(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(b,"mousemove",this.handleMouseMove_),this.off(b,"mouseup",this.handleMouseUp_),this.off(b,"touchmove",this.handleMouseMove_),this.off(b,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;let a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",()=>{let b=this.vertical()?"height":"width";this.bar.el().style[b]=(100*a).toFixed(2)+"%"})),a}getProgress(){return Number(eJ(this.getPercent(),0,1).toFixed(4))}calculateDistance(a){let b=cI(this.el_,a);return this.vertical()?b.y:b.x}handleKeyDown(a){let b=this.options_.playerOptions.spatialNavigation,c=b&&b.enabled,d=b&&b.horizontalSeek;c?d&&"ArrowLeft"===a.key||!d&&"ArrowDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepBack()):d&&"ArrowRight"===a.key||!d&&"ArrowUp"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(a)):"ArrowLeft"===a.key||"ArrowDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepBack()):"ArrowUp"===a.key||"ArrowRight"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepForward()):super.handleKeyDown(a)}handleClick(a){a.stopPropagation(),a.preventDefault()}vertical(a){if(void 0===a)return this.vertical_||!1;this.vertical_=!!a,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}dx.registerComponent("Slider",eL);let eM=(a,b)=>eJ(a/b*100,0,100).toFixed(2)+"%";dx.registerComponent("LoadProgressBar",class extends dx{constructor(a,b){super(a,b),this.partEls_=[],this.on(a,"progress",a=>this.update(a))}createEl(){let a=super.createEl("div",{className:"vjs-load-progress"}),b=cs("span",{className:"vjs-control-text"}),c=cs("span",{textContent:this.localize("Loaded")}),d=T.default.createTextNode(": ");return this.percentageEl_=cs("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),a.appendChild(b),b.appendChild(c),b.appendChild(d),b.appendChild(this.percentageEl_),a}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(a){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{let a=this.player_.liveTracker,b=this.player_.buffered(),c=a&&a.isLive()?a.seekableEnd():this.player_.duration(),d=this.player_.bufferedEnd(),e=this.partEls_,f=eM(d,c);this.percent_!==f&&(this.el_.style.width=f,ct(this.percentageEl_,f),this.percent_=f);for(let a=0;a<b.length;a++){let c=b.start(a),f=b.end(a),g=e[a];g||(g=this.el_.appendChild(cs()),e[a]=g),(g.dataset.start!==c||g.dataset.end!==f)&&(g.dataset.start=c,g.dataset.end=f,g.style.left=eM(c,d),g.style.width=eM(f-c,d))}for(let a=e.length;a>b.length;a--)this.el_.removeChild(e[a-1]);e.length=b.length})}}),dx.registerComponent("TimeTooltip",class extends dx{constructor(a,b){super(a,b),this.update=dc(db(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(a,b,c){let d=cH(this.el_),e=cG(this.player_.el()),f=a.width*b;if(!e||!d)return;let g=a.left-e.left+f,h=a.width-f+(e.right-a.right);h||(h=a.width-f,g=f);let i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),i=Math.round(i),this.el_.style.right=`-${i}px`,this.write(c)}write(a){ct(this.el_,a)}updateTime(a,b,c,d){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let e,f=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){let a=this.player_.liveTracker.liveWindow(),c=a-b*a;e=(c<1?"":"-")+dF(c,a)}else e=dF(c,f);this.update(a,b,e),d&&d()})}});class eN extends dx{constructor(a,b){super(a,b),this.setIcon("circle"),this.update=dc(db(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(a,b,c){let d=this.getChild("timeTooltip");if(!d)return;let e=c&&c.target&&"function"==typeof c.target.pendingSeekTime?c.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();d.updateTime(a,b,e)}}eN.prototype.options_={children:[]},ck||b2||eN.prototype.options_.children.push("timeTooltip"),dx.registerComponent("PlayProgressBar",eN);class eO extends dx{constructor(a,b){super(a,b),this.update=dc(db(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(a,b){let c=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,c,()=>{this.el_.style.left=`${a.width*b}px`})}}eO.prototype.options_={children:["timeTooltip"]},dx.registerComponent("MouseTimeDisplay",eO);class eP extends eL{constructor(a,b){(b=bY(eP.prototype.options_,b)).children=[...b.children];const c=a.options_.disableSeekWhileScrubbingOnMobile&&(ck||b2)||a.options_.disableSeekWhileScrubbingOnSTV;(ck||b2)&&!c||b.children.splice(1,0,"mouseTimeDisplay"),super(a,b),this.shouldDisableSeekWhileScrubbing_=c,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=db(this,this.update),this.update=dc(this.update_,30),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=a=>this.enableInterval_(a),this.disableIntervalHandler_=a=>this.disableInterval_(a),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in T.default&&"visibilityState"in T.default&&this.on(T.default,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(a){"hidden"===T.default.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(a){if("hidden"===T.default.visibilityState)return;let b=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{let c=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),d=this.player_.liveTracker,e=this.player_.duration();d&&d.isLive()&&(e=this.player_.liveTracker.liveCurrentTime()),this.percent_!==b&&(this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2)),this.percent_=b),(this.currentTime_!==c||this.duration_!==e)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[dF(c,e),dF(e,e)],"{1} of {2}")),this.currentTime_=c,this.duration_=e),this.bar&&this.bar.update(cG(this.el()),this.getProgress(),a)}),b}userSeek_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(a)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(a){if(void 0!==a)if(null!==a){let b=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(a,b))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){let a;if(null!==this.pendingSeekTime())return this.pendingSeekTime()/this.player_.duration();let b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a}handleMouseDown(a){cO(a)&&(a.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(a))}handleMouseMove(a,b=!1){let c;if(!cO(a)||isNaN(this.player_.duration()))return;b||this.player_.scrubbing()||this.player_.scrubbing(!0);let d=this.calculateDistance(a),e=this.player_.liveTracker;if(e&&e.isLive()){if(d>=.99)return void e.seekToLiveEdge();let a=e.seekableStart(),b=e.liveCurrentTime();if((c=a+d*e.liveWindow())>=b&&(c=b),c<=a&&(c=a+.1),c===1/0)return}else(c=d*this.player_.duration())===this.player_.duration()&&(c-=.1);this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(c):this.userSeek_(c),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();let a=this.getChild("mouseTimeDisplay");a&&a.show()}disable(){super.disable();let a=this.getChild("mouseTimeDisplay");a&&a.hide()}handleMouseUp(a){super.handleMouseUp(a),a&&a.stopPropagation(),this.player_.scrubbing(!1),null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?dK(this.player_.play()):this.update_()}handlePendingSeek_(a){this.player_.paused()||this.player_.pause();let b=null!==this.pendingSeekTime()?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(b+a),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(a){null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(a){let b=this.player_.liveTracker;if(" "===a.key||"Enter"===a.key)a.preventDefault(),a.stopPropagation(),this.handleAction(a);else if("Home"===a.key)a.preventDefault(),a.stopPropagation(),this.userSeek_(0);else if("End"===a.key)a.preventDefault(),a.stopPropagation(),b&&b.isLive()?this.userSeek_(b.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(a.key)){a.preventDefault(),a.stopPropagation();let c=.1*parseInt(a.key,10);b&&b.isLive()?this.userSeek_(b.seekableStart()+b.liveWindow()*c):this.userSeek_(this.player_.duration()*c)}else"PageDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):"PageUp"===a.key?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(a)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in T.default&&"visibilityState"in T.default&&this.off(T.default,"visibilitychange",this.toggleVisibility_),super.dispose()}}eP.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},dx.registerComponent("SeekBar",eP);class eQ extends dx{constructor(a,b){super(a,b),this.handleMouseMove=dc(db(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=dc(db(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.handleMouseDownHandler_=a=>this.handleMouseDown(a),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(a){let b=this.getChild("seekBar");if(!b)return;let c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(!c&&!d)return;let e=b.el(),f=cH(e),g=cI(e,a).x;g=eJ(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}handleMouseSeek(a){let b=this.getChild("seekBar");b&&b.handleMouseMove(a)}enabled(){return this.enabled_}disable(){if(this.children().forEach(a=>a.disable&&a.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){let a=this.getChild("seekBar");this.player_.scrubbing(!1),a.videoWasPlaying&&dK(this.player_.play())}}enable(){this.children().forEach(a=>a.enable&&a.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){let a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek),this.off(a,"touchmove",this.throttledHandleMouseSeek),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseDown(a){let b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){let b=this.getChild("seekBar");b&&b.handleMouseUp(a),this.removeListenersAddedOnMousedownAndTouchstart()}}eQ.prototype.options_={children:["seekBar"]},dx.registerComponent("ProgressControl",eQ);class eR extends eB{constructor(a,b){super(a,b),this.setIcon("picture-in-picture-enter"),this.on(a,["enterpictureinpicture","leavepictureinpicture"],a=>this.handlePictureInPictureChange(a)),this.on(a,["disablepictureinpicturechanged","loadedmetadata"],a=>this.handlePictureInPictureEnabledChange(a)),this.on(a,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){T.default.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in S.default?this.enable():this.disable()}handlePictureInPictureChange(a){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof T.default.exitPictureInPicture&&super.show()}}eR.prototype.controlText_="Picture-in-Picture",dx.registerComponent("PictureInPictureToggle",eR);class eS extends eB{constructor(a,b){super(a,b),this.setIcon("fullscreen-enter"),this.on(a,"fullscreenchange",a=>this.handleFullscreenChange(a)),!1===T.default[a.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(a){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}eS.prototype.controlText_="Fullscreen",dx.registerComponent("FullscreenToggle",eS);let eT=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})};dx.registerComponent("VolumeLevel",class extends dx{createEl(){let a=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",a),a.appendChild(super.createEl("span",{className:"vjs-control-text"})),a}}),dx.registerComponent("VolumeLevelTooltip",class extends dx{constructor(a,b){super(a,b),this.update=dc(db(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(a,b,c,d){if(!c){let c=cG(this.el_),d=cG(this.player_.el()),e=a.width*b;if(!d||!c)return;let f=a.left-d.left+e,g=a.width-e+(d.right-a.right),h=c.width/2;f<h?h+=h-f:g<h&&(h=g),h<0?h=0:h>c.width&&(h=c.width),this.el_.style.right=`-${h}px`}this.write(`${d}%`)}write(a){ct(this.el_,a)}updateVolume(a,b,c,d,e){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(a,b,c,d.toFixed(0)),e&&e()})}});class eU extends dx{constructor(a,b){super(a,b),this.update=dc(db(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(a,b,c){this.getChild("volumeLevelTooltip").updateVolume(a,b,c,100*b,()=>{c?this.el_.style.bottom=`${a.height*b}px`:this.el_.style.left=`${a.width*b}px`})}}eU.prototype.options_={children:["volumeLevelTooltip"]},dx.registerComponent("MouseVolumeLevelDisplay",eU);class eV extends eL{constructor(a,b){super(a,b),this.on("slideractive",a=>this.updateLastVolume_(a)),this.on(a,"volumechange",a=>this.updateARIAAttributes(a)),a.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(a){cO(a)&&super.handleMouseDown(a)}handleMouseMove(a){let b=this.getChild("mouseVolumeLevelDisplay");if(b){let c=this.el(),d=cG(c),e=this.vertical(),f=cI(c,a);f=eJ(f=e?f.y:f.x,0,1),b.update(d,f,e)}cO(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(a){let b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){let a=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(a)})}}eV.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ck||b2||eV.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),eV.prototype.playerEvent="volumechange",dx.registerComponent("VolumeBar",eV);class eW extends dx{constructor(a,b={}){b.vertical=b.vertical||!1,(void 0===b.volumeBar||bX(b.volumeBar))&&(b.volumeBar=b.volumeBar||{},b.volumeBar.vertical=b.vertical),super(a,b),eT(this,a),this.throttledHandleMouseMove=dc(db(this,this.handleMouseMove),30),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.on("mousedown",a=>this.handleMouseDown(a)),this.on("touchstart",a=>this.handleMouseDown(a)),this.on("mousemove",a=>this.handleMouseMove(a)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let a="vjs-volume-horizontal";return this.options_.vertical&&(a="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${a}`})}handleMouseDown(a){let b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){let b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUpHandler_),this.off(b,"touchend",this.handleMouseUpHandler_)}handleMouseMove(a){this.volumeBar.handleMouseMove(a)}}eW.prototype.options_={children:["volumeBar"]},dx.registerComponent("VolumeControl",eW);let eX=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})};class eY extends eB{constructor(a,b){super(a,b),eX(this,a),this.on(a,["loadstart","volumechange"],a=>this.update(a))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(a){let b=this.player_.volume(),c=this.player_.lastVolume_();0===b?(this.player_.volume(c<.1?.1:c),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(a){this.updateIcon_(),this.updateControlText_()}updateIcon_(){let a=this.player_.volume(),b=3;this.setIcon("volume-high"),ck&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?(this.setIcon("volume-mute"),b=0):a<.33?(this.setIcon("volume-low"),b=1):a<.67&&(this.setIcon("volume-medium"),b=2),cx(this.el_,[0,1,2,3].reduce((a,b)=>a+`${b?" ":""}vjs-vol-${b}`,"")),cw(this.el_,`vjs-vol-${b}`)}updateControlText_(){let a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)}}eY.prototype.controlText_="Mute",dx.registerComponent("MuteToggle",eY);class eZ extends dx{constructor(a,b={}){void 0!==b.inline?b.inline=b.inline:b.inline=!0,(void 0===b.volumeControl||bX(b.volumeControl))&&(b.volumeControl=b.volumeControl||{},b.volumeControl.vertical=!b.inline),super(a,b),this.handleKeyPressHandler_=a=>this.handleKeyPress(a),this.on(a,["loadstart"],a=>this.volumePanelState_(a)),this.on(this.muteToggle,"keyup",a=>this.handleKeyPress(a)),this.on(this.volumeControl,"keyup",a=>this.handleVolumeControlKeyUp(a)),this.on("keydown",a=>this.handleKeyPress(a)),this.on("mouseover",a=>this.handleMouseOver(a)),this.on("mouseout",a=>this.handleMouseOut(a)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let a="vjs-volume-panel-horizontal";return this.options_.inline||(a="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${a}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(a){"Escape"===a.key&&this.muteToggle.focus()}handleMouseOver(a){this.addClass("vjs-hover"),c5(T.default,"keyup",this.handleKeyPressHandler_)}handleMouseOut(a){this.removeClass("vjs-hover"),c6(T.default,"keyup",this.handleKeyPressHandler_)}handleKeyPress(a){"Escape"===a.key&&this.handleMouseOut()}}eZ.prototype.options_={children:["muteToggle","volumeControl"]},dx.registerComponent("VolumePanel",eZ);class e$ extends eB{constructor(a,b){super(a,b),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(a.language())])),this.show()):this.hide()}getSkipForwardTime(){let a=this.options_.playerOptions;return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(a){let b;if(isNaN(this.player_.duration()))return;let c=this.player_.currentTime(),d=this.player_.liveTracker,e=d&&d.isLive()?d.seekableEnd():this.player_.duration();b=c+this.skipTime<=e?c+this.skipTime:e,this.player_.currentTime(b)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}e$.prototype.controlText_="Skip Forward",dx.registerComponent("SkipForward",e$);class e_ extends eB{constructor(a,b){super(a,b),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(a.language())])),this.show()):this.hide()}getSkipBackwardTime(){let a=this.options_.playerOptions;return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(a){let b,c=this.player_.currentTime(),d=this.player_.liveTracker,e=d&&d.isLive()&&d.seekableStart();b=e&&c-this.skipTime<=e?e:c>=this.skipTime?c-this.skipTime:0,this.player_.currentTime(b)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}e_.prototype.controlText_="Skip Backward",dx.registerComponent("SkipBackward",e_);class e0 extends dx{constructor(a,b){super(a,b),b&&(this.menuButton_=b.menuButton),this.focusedChild_=-1,this.on("keydown",a=>this.handleKeyDown(a)),this.boundHandleBlur_=a=>this.handleBlur(a),this.boundHandleTapClick_=a=>this.handleTapClick(a)}addEventListenerForItem(a){a instanceof dx&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(a){a instanceof dx&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))}removeChild(a){"string"==typeof a&&(a=this.getChild(a)),this.removeEventListenerForItem(a),super.removeChild(a)}addItem(a){let b=this.addChild(a);b&&this.addEventListenerForItem(b)}createEl(){let a=this.options_.contentElType||"ul";this.contentEl_=cs(a,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");let b=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return b.appendChild(this.contentEl_),c5(b,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),b}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(a){let b=a.relatedTarget||T.default.activeElement;if(!this.children().some(a=>a.el()===b)){let a=this.menuButton_;a&&a.buttonPressed_&&b!==a.el().firstChild&&a.unpressButton()}}handleTapClick(a){if(this.menuButton_){this.menuButton_.unpressButton();let b=this.children();if(!Array.isArray(b))return;let c=b.filter(b=>b.el()===a.target)[0];c&&"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}}handleKeyDown(a){"ArrowLeft"===a.key||"ArrowDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepForward()):("ArrowRight"===a.key||"ArrowUp"===a.key)&&(a.preventDefault(),a.stopPropagation(),this.stepBack())}stepForward(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)}stepBack(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)}focus(a=0){let b=this.children().slice();b.length&&b[0].hasClass("vjs-menu-title")&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())}}dx.registerComponent("Menu",e0);class e1 extends dx{constructor(a,b={}){super(a,b),this.menuButton_=new eB(a,b),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const c=eB.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+c,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const d=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",d),this.on(this.menuButton_,"click",d),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),c5(T.default,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){let a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){let a=new e0(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){let b=cs("li",{className:"vjs-menu-title",textContent:du(this.options_.title),tabIndex:-1}),c=new dx(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(let b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(a){super.setIcon(a,this.menuButton_.el_)}buildWrapperCSSClass(){let a="vjs-menu-button";!0===this.options_.inline?a+="-inline":a+="-popup";let b=eB.prototype.buildCSSClass();return`vjs-menu-button ${a} ${b} ${super.buildCSSClass()}`}buildCSSClass(){let a="vjs-menu-button";return!0===this.options_.inline?a+="-inline":a+="-popup",`vjs-menu-button ${a} ${super.buildCSSClass()}`}controlText(a,b=this.menuButton_.el()){return this.menuButton_.controlText(a,b)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(a){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(a){this.removeClass("vjs-hover"),c6(T.default,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(a){"Escape"===a.key||"Tab"===a.key?(this.buttonPressed_&&this.unpressButton(),a.key):"Up"!==a.key&&("Down"!==a.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(a.preventDefault(),this.pressButton())}handleMenuKeyUp(a){("Escape"===a.key||"Tab"===a.key)&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(a){this.handleSubmenuKeyDown(a)}handleSubmenuKeyDown(a){("Escape"===a.key||"Tab"===a.key)&&(this.buttonPressed_&&this.unpressButton(),a.key)}pressButton(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ck&&cq()||this.menu.focus())}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}dx.registerComponent("MenuButton",e1);class e2 extends e1{constructor(a,b){const c=b.tracks;if(super(a,b),this.items.length<=1&&this.hide(),!c)return;const d=db(this,this.update);c.addEventListener("removetrack",d),c.addEventListener("addtrack",d),c.addEventListener("labelchange",d),this.player_.on("ready",d),this.player_.on("dispose",function(){c.removeEventListener("removetrack",d),c.removeEventListener("addtrack",d),c.removeEventListener("labelchange",d)})}}dx.registerComponent("TrackButton",e2);class e3 extends et{constructor(a,b){super(a,b),this.selectable=b.selectable,this.isSelected_=b.selected||!1,this.multiSelectable=b.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(a,b,c){this.nonIconControl=!0;let d=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},b),c),e=cs("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?d.appendChild(e):d.replaceChild(e,d.querySelector(".vjs-icon-placeholder")),d}handleKeyDown(a){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(a.key)||super.handleKeyDown(a)}handleClick(a){this.selected(!0)}selected(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}dx.registerComponent("MenuItem",e3);class e4 extends e3{constructor(a,b){const c=b.track,d=a.textTracks();b.label=c.label||c.language||"Unknown",b.selected="showing"===c.mode,super(a,b),this.track=c,this.kinds=(b.kinds||[b.kind||this.track.kind]).filter(Boolean);const e=(...a)=>{this.handleTracksChange.apply(this,a)},f=(...a)=>{this.handleSelectedLanguageChange.apply(this,a)};if(a.on(["loadstart","texttrackchange"],e),d.addEventListener("change",e),d.addEventListener("selectedlanguagechange",f),this.on("dispose",function(){a.off(["loadstart","texttrackchange"],e),d.removeEventListener("change",e),d.removeEventListener("selectedlanguagechange",f)}),void 0===d.onchange){let a;this.on(["tap","click"],function(){if("object"!=typeof S.default.Event)try{a=new S.default.Event("change")}catch(a){}a||(a=T.default.createEvent("Event")).initEvent("change",!0,!0),d.dispatchEvent(a)})}this.handleTracksChange()}handleClick(a){let b=this.track,c=this.player_.textTracks();if(super.handleClick(a),c)for(let a=0;a<c.length;a++){let d=c[a];-1!==this.kinds.indexOf(d.kind)&&(d===b?"showing"!==d.mode&&(d.mode="showing"):"disabled"!==d.mode&&(d.mode="disabled"))}}handleTracksChange(a){let b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)}handleSelectedLanguageChange(a){if("showing"===this.track.mode){let a=this.player_.cache_.selectedLanguage;a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind})}}dispose(){this.track=null,super.dispose()}}dx.registerComponent("TextTrackMenuItem",e4);class e5 extends e4{constructor(a,b){b.track={player:a,kind:b.kind,kinds:b.kinds,default:!1,mode:"disabled"},b.kinds||(b.kinds=[b.kind]),b.label?b.track.label=b.label:b.track.label=b.kinds.join(" and ")+" off",b.selectable=!0,b.multiSelectable=!1,super(a,b)}handleTracksChange(a){let b=this.player().textTracks(),c=!0;for(let a=0,d=b.length;a<d;a++){let d=b[a];if(this.options_.kinds.indexOf(d.kind)>-1&&"showing"===d.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)}handleSelectedLanguageChange(a){let b=this.player().textTracks(),c=!0;for(let a=0,d=b.length;a<d;a++){let d=b[a];if(["captions","descriptions","subtitles"].indexOf(d.kind)>-1&&"showing"===d.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}dx.registerComponent("OffTextTrackMenuItem",e5);class e6 extends e2{constructor(a,b={}){b.tracks=a.textTracks(),super(a,b)}createItems(a=[],b=e4){let c;this.label_&&(c=`${this.label_} off`),a.push(new e5(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;let d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let c=0;c<d.length;c++){let e=d[c];if(this.kinds_.indexOf(e.kind)>-1){let c=new b(this.player_,{track:e,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass(`vjs-${e.kind}-menu-item`),a.push(c)}}return a}}dx.registerComponent("TextTrackButton",e6);class e7 extends e3{constructor(a,b){const c=b.track,d=b.cue,e=a.currentTime();b.selectable=!0,b.multiSelectable=!1,b.label=d.text,b.selected=d.startTime<=e&&e<d.endTime,super(a,b),this.track=c,this.cue=d}handleClick(a){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}dx.registerComponent("ChaptersTrackMenuItem",e7);class e8 extends e6{constructor(a,b,c){super(a,b,c),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(a=>{a.selected(this.track_.activeCues[0]===a.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(a){if(a&&a.track&&"chapters"!==a.track.kind)return;let b=this.findChaptersTrack();b!==this.track_?(this.setTrack(b),super.update()):(!this.items||b&&b.cues&&b.cues.length!==this.items.length)&&super.update()}setTrack(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){let a=this.player_.textTracks()||[];for(let b=a.length-1;b>=0;b--){let c=a[b];if(c.kind===this.kind_)return c}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(du(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){let a=[];if(!this.track_)return a;let b=this.track_.cues;if(!b)return a;for(let c=0,d=b.length;c<d;c++){let d=b[c],e=new e7(this.player_,{track:this.track_,cue:d});a.push(e)}return a}}e8.prototype.kind_="chapters",e8.prototype.controlText_="Chapters",dx.registerComponent("ChaptersButton",e8);class e9 extends e6{constructor(a,b,c){super(a,b,c),this.setIcon("audio-description");const d=a.textTracks(),e=db(this,this.handleTracksChange);d.addEventListener("change",e),this.on("dispose",function(){d.removeEventListener("change",e)})}handleTracksChange(a){let b=this.player().textTracks(),c=!1;for(let a=0,d=b.length;a<d;a++){let d=b[a];if(d.kind!==this.kind_&&"showing"===d.mode){c=!0;break}}c?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}e9.prototype.kind_="descriptions",e9.prototype.controlText_="Descriptions",dx.registerComponent("DescriptionsButton",e9);class fa extends e6{constructor(a,b,c){super(a,b,c),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}fa.prototype.kind_="subtitles",fa.prototype.controlText_="Subtitles",dx.registerComponent("SubtitlesButton",fa);class fb extends e4{constructor(a,b){b.track={player:a,kind:b.kind,label:b.kind+" settings",selectable:!1,default:!1,mode:"disabled"},b.selectable=!1,b.name="CaptionSettingsMenuItem",super(a,b),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+b.kind+" settings dialog")}handleClick(a){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}dx.registerComponent("CaptionSettingsMenuItem",fb);class fc extends e6{constructor(a,b,c){super(a,b,c),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){let a=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(a.push(new fb(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(a)}}fc.prototype.kind_="captions",fc.prototype.controlText_="Captions",dx.registerComponent("CaptionsButton",fc);class fd extends e4{createEl(a,b,c){let d=super.createEl(a,b,c),e=d.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",d):e.appendChild(cs("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),e.appendChild(cs("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),d}}dx.registerComponent("SubsCapsMenuItem",fd);class fe extends e6{constructor(a,b={}){super(a,b),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(du(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let a=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(a.push(new fb(this.player_,{kind:this.label_})),this.hideThreshold_+=1),a=super.createItems(a,fd)}}fe.prototype.kinds_=["captions","subtitles"],fe.prototype.controlText_="Subtitles",dx.registerComponent("SubsCapsButton",fe);class ff extends e3{constructor(a,b){const c=b.track,d=a.audioTracks();b.label=c.label||c.language||"Unknown",b.selected=c.enabled,super(a,b),this.track=c,this.addClass(`vjs-${c.kind}-menu-item`);const e=(...a)=>{this.handleTracksChange.apply(this,a)};d.addEventListener("change",e),this.on("dispose",()=>{d.removeEventListener("change",e)})}createEl(a,b,c){let d=super.createEl(a,b,c),e=d.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(e.appendChild(cs("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),e.appendChild(cs("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),d}handleClick(a){if(super.handleClick(a),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){let a=this.player_.audioTracks();for(let b=0;b<a.length;b++){let c=a[b];c!==this.track&&(c.enabled=c===this.track)}}}handleTracksChange(a){this.selected(this.track.enabled)}}dx.registerComponent("AudioTrackMenuItem",ff);class fg extends e2{constructor(a,b={}){b.tracks=a.audioTracks(),super(a,b),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(a=[]){this.hideThreshold_=1;let b=this.player_.audioTracks();for(let c=0;c<b.length;c++){let d=b[c];a.push(new ff(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a}}fg.prototype.controlText_="Audio Track",dx.registerComponent("AudioTrackButton",fg);class fh extends e3{constructor(a,b){const c=b.rate,d=parseFloat(c,10);b.label=c,b.selected=d===a.playbackRate(),b.selectable=!0,b.multiSelectable=!1,super(a,b),this.label=c,this.rate=d,this.on(a,"ratechange",a=>this.update(a))}handleClick(a){super.handleClick(),this.player().playbackRate(this.rate)}update(a){this.selected(this.player().playbackRate()===this.rate)}}fh.prototype.contentElType="button",dx.registerComponent("PlaybackRateMenuItem",fh);class fi extends e1{constructor(a,b){super(a,b),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(a,"loadstart",a=>this.updateVisibility(a)),this.on(a,"ratechange",a=>this.updateLabel(a)),this.on(a,"playbackrateschange",a=>this.handlePlaybackRateschange(a))}createEl(){let a=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=cs("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),a.appendChild(this.labelEl_),a}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){let a=this.playbackRates(),b=[];for(let c=a.length-1;c>=0;c--)b.push(new fh(this.player(),{rate:a[c]+"x"}));return b}handlePlaybackRateschange(a){this.update()}playbackRates(){let a=this.player();return a.playbackRates&&a.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}fi.prototype.controlText_="Playback Rate",dx.registerComponent("PlaybackRateMenuButton",fi);class fj extends dx{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(a="div",b={},c={}){return b.className||(b.className=this.buildCSSClass()),super.createEl(a,b,c)}}dx.registerComponent("Spacer",fj),dx.registerComponent("CustomControlSpacer",class extends fj{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}});class fk extends dx{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}fk.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},dx.registerComponent("ControlBar",fk);class fl extends dO{constructor(a,b){super(a,b),this.on(a,"error",a=>{this.open(a)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){let a=this.player().error();return a?this.localize(a.message):""}}fl.prototype.options_=Object.assign({},dO.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),dx.registerComponent("ErrorDisplay",fl);class fm extends dx{constructor(a,b={}){super(a,b),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),cs("select",{id:this.options_.id},{},this.options_.SelectOptions.map(a=>{let b=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${c_++}`)+"-"+a[1].replace(/\W+/g,""),c=cs("option",{id:b,value:this.localize(a[0]),textContent:this.localize(a[1])});return c.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${b}`),c}))}}dx.registerComponent("TextTrackSelect",fm);class fn extends dx{constructor(a,b={}){super(a,b);const c=cs("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});for(const b of(this.el().appendChild(c),this.options_.selects)){const c=this.options_.selectConfigs[b],d=c.className,e=c.id.replace("%s",this.options_.id_);let f=null;const g=`vjs_select_${c_++}`;if("colors"===this.options_.type){f=cs("span",{className:d});const a=cs("label",{id:e,className:"vjs-label",textContent:this.localize(c.label)});a.setAttribute("for",g),f.appendChild(a)}const h=new fm(a,{SelectOptions:c.options,legendId:this.options_.legendId,id:g,labelId:e});this.addChild(h),"colors"===this.options_.type&&(f.appendChild(h.el()),this.el().appendChild(f))}}createEl(){return cs("fieldset",{className:this.options_.className})}}dx.registerComponent("TextTrackFieldset",fn);class fo extends dx{constructor(a,b={}){super(a,b);const c=this.options_.textTrackComponentid,d=new fn(a,{id_:c,legendId:`captions-text-legend-${c}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(d);const e=new fn(a,{id_:c,legendId:`captions-background-${c}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(e);const f=new fn(a,{id_:c,legendId:`captions-window-${c}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(f)}createEl(){return cs("div",{className:"vjs-track-settings-colors"})}}dx.registerComponent("TextTrackSettingsColors",fo);class fp extends dx{constructor(a,b={}){super(a,b);const c=this.options_.textTrackComponentid,d=new fn(a,{id_:c,legendId:`captions-font-size-${c}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(d);const e=new fn(a,{id_:c,legendId:`captions-edge-style-${c}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(e);const f=new fn(a,{id_:c,legendId:`captions-font-family-${c}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(f)}createEl(){return cs("div",{className:"vjs-track-settings-font"})}}dx.registerComponent("TextTrackSettingsFont",fp);class fq extends dx{constructor(a,b={}){super(a,b);const c=new eB(a,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});c.el().classList.remove("vjs-control","vjs-button"),c.el().textContent=this.localize("Reset"),this.addChild(c);const d=this.localize("Done"),e=new eB(a,{controlText:d,className:"vjs-done-button"});e.el().classList.remove("vjs-control","vjs-button"),e.el().textContent=d,this.addChild(e)}createEl(){return cs("div",{className:"vjs-track-settings-controls"})}}dx.registerComponent("TrackSettingsControls",fq);let fr="vjs-text-track-settings",fs=["#000","Black"],ft=["#00F","Blue"],fu=["#0FF","Cyan"],fv=["#0F0","Green"],fw=["#F0F","Magenta"],fx=["#F00","Red"],fy=["#FFF","White"],fz=["#FF0","Yellow"],fA=["1","Opaque"],fB=["0.5","Semi-Transparent"],fC=["0","Transparent"],fD={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fs,fy,fx,fv,ft,fz,fw,fu],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[fA,fB,fC],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[fy,fs,fx,fv,ft,fz,fw,fu],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:a=>"1.00"===a?null:Number(a)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[fA,fB],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[fC,fB,fA],className:"vjs-window-opacity vjs-opacity"}};function fE(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}fD.windowColor.options=fD.backgroundColor.options,dx.registerComponent("TextTrackSettings",class extends dO{constructor(a,b){b.temporary=!1,super(a,b),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(a),this.endDialog=cs("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===b.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(a){let b=new fo(a,{textTrackComponentid:this.id_,selectConfigs:fD,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(b);let c=new fp(a,{textTrackComponentid:this.id_,selectConfigs:fD,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(c);let d=new fq(a);this.addChild(d)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),bU(fD,a=>{this.on(this.$(a.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return bV(fD,(a,b,c)=>{var d,e;let f=(d=this.$(b.selector),e=b.parser,fE(d.options[d.options.selectedIndex].value,e));return void 0!==f&&(a[c]=f),a},{})}setValues(a){bU(fD,(b,c)=>{!function(a,b,c){if(b){for(let d=0;d<a.options.length;d++)if(fE(a.options[d].value,c)===b){a.selectedIndex=d;break}}}(this.$(b.selector),a[c],b.parser)})}setDefaults(){bU(fD,a=>{let b=a.hasOwnProperty("default")?a.default:0;this.$(a.selector).selectedIndex=b})}restoreSettings(){let a;try{a=JSON.parse(S.default.localStorage.getItem(fr))}catch(a){bQ.warn(a)}a&&this.setValues(a)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;let a=this.getValues();try{Object.keys(a).length?S.default.localStorage.setItem(fr,JSON.stringify(a)):S.default.localStorage.removeItem(fr)}catch(a){bQ.warn(a)}}updateDisplay(){let a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}),dx.registerComponent("ResizeManager",class extends dx{constructor(a,b){let c=b.ResizeObserver||S.default.ResizeObserver;null===b.ResizeObserver&&(c=!1),super(a,bY({createEl:!c,reportTouchActivity:!1},b)),this.ResizeObserver=b.ResizeObserver||S.default.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=dd(()=>{this.resizeHandler()},100,!1,this),c?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(a.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;let a=this.debouncedHandler_,b=this.unloadListener_=function(){c6(this,"resize",a),c6(this,"unload",b),b=null};c5(this.el_.contentWindow,"unload",b),c5(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});let fF={trackingThreshold:20,liveTolerance:15};dx.registerComponent("LiveTracker",class extends dx{constructor(a,b){super(a,bY(fF,b,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=a=>this.handlePlay(a),this.handleFirstTimeupdate_=a=>this.handleFirstTimeupdate(a),this.handleSeeked_=a=>this.handleSeeked(a),this.seekToLiveEdge_=a=>this.seekToLiveEdge(a),this.reset_(),this.on(this.player_,"durationchange",a=>this.handleDurationchange(a)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){let a=this.player_.seekable();if(!a||!a.length)return;let b=Number(S.default.performance.now().toFixed(4)),c=-1===this.lastTime_?0:(b-this.lastTime_)/1e3;this.lastTime_=b,this.pastSeekEnd_=this.pastSeekEnd()+c;let d=this.liveCurrentTime(),e=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(d-e)>this.options_.liveTolerance;this.timeupdateSeen_&&d!==1/0||(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){let a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&a>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){let a=this.player_.seekable(),b=[],c=a?a.length:0;for(;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0}seekableStart(){let a=this.player_.seekable(),b=[],c=a?a.length:0;for(;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0}liveWindow(){let a=this.liveCurrentTime();return a===1/0?0:a-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){let a=this.seekableEnd();return -1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),dx.registerComponent("TitleBar",class extends dx{constructor(a,b){super(a,b),this.on("statechanged",a=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:cs("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${c_++}`}),description:cs("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${c_++}`})},cs("div",{className:"vjs-title-bar"},{},bZ(this.els))}updateDom_(){let a=this.player_.tech_,b=a&&a.el_,c={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(a=>{let d=this.state[a],e=this.els[a],f=c[a];cK(e),d&&ct(e,d),b&&(b.removeAttribute(f),d&&b.setAttribute(f,e.id))}),this.state.title||this.state.description?this.show():this.hide()}update(a){this.setState(a)}dispose(){let a=this.player_.tech_,b=a&&a.el_;b&&(b.removeAttribute("aria-labelledby"),b.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});let fG={initialDisplay:4e3,position:[],takeFocus:!1};dx.registerComponent("TransientButton",class extends eB{constructor(a,b){super(a,b=bY(fG,b)),this.controlText(b.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],a=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(a=>`vjs-${a}`).join(" ")}`}createEl(){let a=cs("button",{},{type:"button",class:this.buildCSSClass()},cs("span"));return this.controlTextEl_=a.querySelector("span"),a}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});let fH=a=>{let b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;let c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(let a=0;a<c.length;a++){let b=c[a].src;b&&-1===d.indexOf(b)&&d.push(b)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)},fI=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(a){let b=T.default.createElement(this.nodeName.toLowerCase());b.innerHTML=a;let c=T.default.createDocumentFragment();for(;b.childNodes.length;)c.appendChild(b.childNodes[0]);return this.innerText="",S.default.Element.prototype.appendChild.call(this,c),this.innerHTML}}),fJ=(a,b)=>{let c={};for(let d=0;d<a.length&&(!(c=Object.getOwnPropertyDescriptor(a[d],b))||!c.set||!c.get);d++);return c.enumerable=!0,c.configurable=!0,c},fK=function(a){let b=a.el();if(b.resetSourceWatch_)return;let c={},d=fJ([a.el(),S.default.HTMLMediaElement.prototype,S.default.Element.prototype,fI],"innerHTML"),e=c=>(...d)=>{let e=c.apply(b,d);return fH(a),e};["append","appendChild","insertAdjacentHTML"].forEach(a=>{b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",bY(d,{set:e(d.set)})),b.resetSourceWatch_=()=>{b.resetSourceWatch_=null,Object.keys(c).forEach(a=>{b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)},fL=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?d0(S.default.Element.prototype.getAttribute.call(this,"src")):""},set(a){return S.default.Element.prototype.setAttribute.call(this,"src",a),a}}),fM=function(a){if(!a.featuresSourceset)return;let b=a.el();if(b.resetSourceset_)return;let c=fJ([a.el(),S.default.HTMLMediaElement.prototype,fL],"src"),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",bY(c,{set:d=>{let e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=(c,e)=>{let f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=()=>{let c=e.call(b);return fH(a)||(a.triggerSourceset(""),fK(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):fH(a)||fK(a),b.resetSourceset_=()=>{b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}};class fN extends ed{constructor(a,b){super(a,b);const c=a.source;let d=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,c&&(this.el_.currentSrc!==c.src||a.tag&&3===a.tag.initNetworkState_)?this.setSource(c):this.handleLateInit_(this.el_),a.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const a=this.el_.childNodes;let b=a.length;const c=[];for(;b--;){const e=a[b];"track"===e.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(e),this.remoteTextTracks().addTrack(e.track),this.textTracks().addTrack(e.track),!d&&!this.el_.hasAttribute("crossorigin")&&d2(e.src)&&(d=!0)):c.push(e))}for(let a=0;a<c.length;a++)this.el_.removeChild(c[a])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&d&&bQ.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(ci||ce)&&!0===a.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),fN.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){fM(this)}restoreMetadataTracksInIOSNativePlayer_(){let a,b=this.textTracks(),c=()=>{a=[];for(let c=0;c<b.length;c++){let d=b[c];"metadata"===d.kind&&a.push({track:d,storedMode:d.mode})}};c(),b.addEventListener("change",c),this.on("dispose",()=>b.removeEventListener("change",c));let d=()=>{for(let b=0;b<a.length;b++){let c=a[b];"disabled"===c.track.mode&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}b.removeEventListener("change",d)};this.on("webkitbeginfullscreen",()=>{b.removeEventListener("change",c),b.removeEventListener("change",d),b.addEventListener("change",d)}),this.on("webkitendfullscreen",()=>{b.removeEventListener("change",c),b.addEventListener("change",c),b.removeEventListener("change",d)})}overrideNative_(a,b){if(b!==this[`featuresNative${a}Tracks`])return;let c=a.toLowerCase();this[`${c}TracksListeners_`]&&Object.keys(this[`${c}TracksListeners_`]).forEach(a=>{this.el()[`${c}Tracks`].removeEventListener(a,this[`${c}TracksListeners_`][a])}),this[`featuresNative${a}Tracks`]=!b,this[`${c}TracksListeners_`]=null,this.proxyNativeTracksForType_(c)}overrideNativeAudioTracks(a){this.overrideNative_("Audio",a)}overrideNativeVideoTracks(a){this.overrideNative_("Video",a)}proxyNativeTracksForType_(a){let b=ea[a],c=this.el()[b.getterName],d=this[b.getterName]();if(!this[`featuresNative${b.capitalName}Tracks`]||!c||!c.addEventListener)return;let e={change:b=>{let c={type:"change",target:d,currentTarget:d,srcElement:d};d.trigger(c),"text"===a&&this[eb.remoteText.getterName]().trigger(c)},addtrack(a){d.addTrack(a.track)},removetrack(a){d.removeTrack(a.track)}},f=function(){let a=[];for(let b=0;b<d.length;b++){let e=!1;for(let a=0;a<c.length;a++)if(c[a]===d[b]){e=!0;break}e||a.push(d[b])}for(;a.length;)d.removeTrack(a.shift())};this[b.getterName+"Listeners_"]=e,Object.keys(e).forEach(a=>{let b=e[a];c.addEventListener(a,b),this.on("dispose",d=>c.removeEventListener(a,b))}),this.on("loadstart",f),this.on("dispose",a=>this.off("loadstart",f))}proxyNativeTracks_(){ea.names.forEach(a=>{this.proxyNativeTracksForType_(a)})}createEl(){let a=this.options_.tag;if(!a||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(a){let b=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(b,a),fN.disposeMediaElement(a),a=b}else{a=T.default.createElement("video");let b=bY({},this.options_.tag&&cA(this.options_.tag));ci&&!0===this.options_.nativeControlsForTouch||delete b.controls,cz(a,Object.assign(b,{id:this.options_.techId,class:"vjs-tech"}))}a.playerId=this.options_.playerId}void 0!==this.options_.preload&&cC(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);let b=["loop","muted","playsinline","autoplay"];for(let c=0;c<b.length;c++){let d=b[c],e=this.options_[d];void 0!==e&&(e?cC(a,d,d):cD(a,d),a[d]=e)}return a}handleLateInit_(a){if(0===a.networkState||3===a.networkState)return;if(0===a.readyState){let a=!1,b=function(){a=!0};this.on("loadstart",b);let c=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",c),this.ready(function(){this.off("loadstart",b),this.off("loadedmetadata",c),a||this.trigger("loadstart")});return}let b=["loadstart"];b.push("loadedmetadata"),a.readyState>=2&&b.push("loadeddata"),a.readyState>=3&&b.push("canplay"),a.readyState>=4&&b.push("canplaythrough"),this.ready(function(){b.forEach(function(a){this.trigger(a)},this)})}setScrubbing(a){this.isScrubbing_=a}scrubbing(){return this.isScrubbing_}setCurrentTime(a){try{this.isScrubbing_&&this.el_.fastSeek&&cl?this.el_.fastSeek(a):this.el_.currentTime=a}catch(a){bQ(a,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&b2&&b6&&0===this.el_.currentTime){let a=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",a))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;let a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},b=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",b),this.on("dispose",()=>{this.off("webkitbeginfullscreen",b),this.off("webkitendfullscreen",a)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){let a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)dK(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{a.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(a){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(a):super.requestVideoFrameCallback(a)}cancelVideoFrameCallback(a){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(a):super.cancelVideoFrameCallback(a)}src(a){if(void 0===a)return this.el_.src;this.setSrc(a)}addSourceElement(a,b){if(!a)return bQ.error("Invalid source URL."),!1;let c={src:a};b&&(c.type=b);let d=cs("source",{},c);return this.el_.appendChild(d),!0}removeSourceElement(a){if(!a)return bQ.error("Source URL is required to remove the source element."),!1;for(let b of this.el_.querySelectorAll("source"))if(b.src===a)return this.el_.removeChild(b),!0;return bQ.warn(`No matching source element found with src: ${a}`),!1}reset(){fN.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(a){this.el_.controls=!!a}addTextTrack(a,b,c){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,c):super.addTextTrack(a,b,c)}createRemoteTextTrack(a){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(a);let b=T.default.createElement("track");return a.kind&&(b.kind=a.kind),a.label&&(b.label=a.label),(a.language||a.srclang)&&(b.srclang=a.language||a.srclang),a.default&&(b.default=a.default),a.id&&(b.id=a.id),a.src&&(b.src=a.src),b}addRemoteTextTrack(a,b){let c=super.addRemoteTextTrack(a,b);return this.featuresNativeTextTracks&&this.el().appendChild(c),c}removeRemoteTextTrack(a){if(super.removeRemoteTextTrack(a),this.featuresNativeTextTracks){let b=this.$$("track"),c=b.length;for(;c--;)(a===b[c]||a===b[c].track)&&this.el().removeChild(b[c])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();let a={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),S.default.performance&&(a.creationTime=S.default.performance.now()),a}}b$(fN,"TEST_VID",function(){if(!co())return;let a=T.default.createElement("video"),b=T.default.createElement("track");return b.kind="captions",b.srclang="en",b.label="English",a.appendChild(b),a}),fN.isSupported=function(){try{fN.TEST_VID.volume=.5}catch(a){return!1}return!!(fN.TEST_VID&&fN.TEST_VID.canPlayType)},fN.canPlayType=function(a){return fN.TEST_VID.canPlayType(a)},fN.canPlaySource=function(a,b){return fN.canPlayType(a.type)},fN.canControlVolume=function(){try{let a=fN.TEST_VID.volume;fN.TEST_VID.volume=a/2+.1;let b=a!==fN.TEST_VID.volume;if(b&&ck)return S.default.setTimeout(()=>{fN&&fN.prototype&&(fN.prototype.featuresVolumeControl=a!==fN.TEST_VID.volume)}),!1;return b}catch(a){return!1}},fN.canMuteVolume=function(){try{let a=fN.TEST_VID.muted;return fN.TEST_VID.muted=!a,fN.TEST_VID.muted?cC(fN.TEST_VID,"muted","muted"):cD(fN.TEST_VID,"muted","muted"),a!==fN.TEST_VID.muted}catch(a){return!1}},fN.canControlPlaybackRate=function(){if(b2&&b6&&b8<58)return!1;try{let a=fN.TEST_VID.playbackRate;return fN.TEST_VID.playbackRate=a/2+.1,a!==fN.TEST_VID.playbackRate}catch(a){return!1}},fN.canOverrideAttributes=function(){try{let a=()=>{};Object.defineProperty(T.default.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(T.default.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(T.default.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(T.default.createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0},fN.supportsNativeTextTracks=function(){return cl||ck&&b6},fN.supportsNativeVideoTracks=function(){return!!(fN.TEST_VID&&fN.TEST_VID.videoTracks)},fN.supportsNativeAudioTracks=function(){return!!(fN.TEST_VID&&fN.TEST_VID.audioTracks)},fN.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([a,b]){b$(fN.prototype,a,()=>fN[b](),!0)}),fN.prototype.featuresVolumeControl=fN.canControlVolume(),fN.prototype.movingMediaElementInDOM=!ck,fN.prototype.featuresFullscreenResize=!0,fN.prototype.featuresProgressEvents=!0,fN.prototype.featuresTimeupdateEvents=!0,fN.prototype.featuresVideoFrameCallback=!!(fN.TEST_VID&&fN.TEST_VID.requestVideoFrameCallback),fN.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()}},fN.resetMediaElement=function(a){if(!a)return;let b=a.querySelectorAll("source"),c=b.length;for(;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch(a){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){fN.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){fN.prototype["set"+du(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){fN.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){fN.prototype["set"+du(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){fN.prototype[a]=function(){return this.el_[a]()}}),ed.withSourceHandlers(fN),fN.nativeSourceHandler={},fN.nativeSourceHandler.canPlayType=function(a){try{return fN.TEST_VID.canPlayType(a)}catch(a){return""}},fN.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return fN.nativeSourceHandler.canPlayType(a.type);if(a.src){let b=d1(a.src);return fN.nativeSourceHandler.canPlayType(`video/${b}`)}return""},fN.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},fN.nativeSourceHandler.dispose=function(){},fN.registerSourceHandler(fN.nativeSourceHandler),ed.registerTech("Html5",fN);let fO=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],fP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},fQ=["tiny","xsmall","small","medium","large","xlarge","huge"],fR={};fQ.forEach(a=>{let b="x"===a.charAt(0)?`x-${a.substring(1)}`:a;fR[a]=`vjs-layout-${b}`});let fS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class fT extends dx{constructor(a,b,c){if(a.id=a.id||b.id||`vjs_video_${c_++}`,(b=Object.assign(fT.getTagSettings(a),b)).initChildren=!1,b.createEl=!1,b.evented=!1,b.reportTouchActivity=!1,!b.language){const c=a.closest("[lang]");c&&(b.language=c.getAttribute("lang"))}if(super(null,b,c),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=bR(this.id_),this.fsApi_=bM,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=a,this.tagAttributes=a&&cA(a),this.language(this.options_.language),b.languages){const a={};Object.getOwnPropertyNames(b.languages).forEach(function(c){a[c.toLowerCase()]=b.languages[c]}),this.languages_=a}else this.languages_=fT.prototype.options_.languages;this.resetCache_(),this.poster_=b.poster||"",this.controls_=!!b.controls,a.controls=!1,a.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],a.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),b.plugins&&Object.keys(b.plugins).forEach(a=>{if("function"!=typeof this[a])throw Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),dq(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(c5(T.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const d=bY(this.options_);if(b.plugins&&Object.keys(b.plugins).forEach(a=>{this[a](b.plugins[a])}),b.debug&&this.debug(!0),this.options_.playerOptions=d,this.middleware_=[],this.playbackRates(b.playbackRates),b.experimentalSvgIcons){const a=new S.default.DOMParser().parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(a.querySelector("parsererror"))bQ.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const b=a.documentElement;b.style.display="none",this.el_.appendChild(b),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===a.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),b.spatialNavigation&&b.spatialNavigation.enabled&&(this.spatialNavigation=new es(this),this.addClass("vjs-spatial-navigation-enabled")),ci&&this.addClass("vjs-touch-enabled"),ck||this.addClass("vjs-workinghover"),fT.players[this.id_]=this;const e=bI.split(".")[0];this.addClass(`vjs-v${e}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),c6(T.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),c6(T.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),fT.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ef.hasOwnProperty(this.id())&&delete ef[this.id()],ec.names.forEach(a=>{let b=this[ec[a].getterName]();b&&b.off&&b.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let a,b=this.tag,c=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),d="video-js"===this.tag.tagName.toLowerCase();c?a=this.el_=b.parentNode:d||(a=this.el_=super.createEl("div"));let e=cA(b);if(d){for(a=this.el_=b,b=this.tag=T.default.createElement("video");a.children.length;)b.appendChild(a.firstChild);cv(a,"video-js")||cw(a,"video-js"),a.appendChild(b),c=this.playerElIngest_=a,Object.keys(a).forEach(c=>{try{b[c]=a[c]}catch(a){}})}b.setAttribute("tabindex","-1"),e.tabindex="-1",b6&&cc&&(b.setAttribute("role","application"),e.role="application"),b.removeAttribute("width"),b.removeAttribute("height"),"width"in e&&delete e.width,"height"in e&&delete e.height,Object.getOwnPropertyNames(e).forEach(function(c){d&&"class"===c||a.setAttribute(c,e[c]),d&&b.setAttribute(c,e[c])}),b.playerId=b.id,b.id+="_html5_api",b.className="vjs-tech",b.player=a.player=this,this.addClass("vjs-paused");let f=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(a=>cm[a]).map(a=>"vjs-device-"+a.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...f),!0!==S.default.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=cY("vjs-styles-dimensions");let a=cP(".vjs-styles-defaults"),b=cP("head");b.insertBefore(this.styleEl_,a?a.nextSibling:b.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);let g=b.getElementsByTagName("a");for(let a=0;a<g.length;a++){let b=g.item(a);cw(b,"vjs-hidden"),b.setAttribute("hidden","hidden")}return b.initNetworkState_=b.networkState,b.parentNode&&!c&&b.parentNode.insertBefore(a,b),cu(b,a),this.children_.unshift(b),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a}crossOrigin(a){return void 0===a?this.techGet_("crossOrigin"):null!==a&&"anonymous"!==a&&"use-credentials"!==a?void bQ.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):void(this.techCall_("setCrossOrigin",a),this.posterImage&&this.posterImage.crossOrigin(a))}width(a){return this.dimension("width",a)}height(a){return this.dimension("height",a)}dimension(a,b){let c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b){this[c]=void 0,this.updateStyleEl_();return}let d=parseFloat(b);isNaN(d)?bQ.error(`Improper value "${b}" supplied for for ${a}`):(this[c]=d,this.updateStyleEl_())}fluid(a){if(void 0===a)return!!this.fluid_;if(this.fluid_=!!a,dh(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),a){var b;this.addClass("vjs-fluid"),this.fill(!1),b=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},dh(this)?b():(this.eventedCallbacks||(this.eventedCallbacks=[]),this.eventedCallbacks.push(b))}else this.removeClass("vjs-fluid");this.updateStyleEl_()}fill(a){if(void 0===a)return!!this.fill_;this.fill_=!!a,a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){let a,b,c;if(!0===S.default.VIDEOJS_NO_DYNAMIC_STYLE){let a="number"==typeof this.width_?this.width_:this.options_.width,b="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(a>=0&&(c.width=a),b>=0&&(c.height=b));return}let d=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),e=d[1]/d[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,b=void 0!==this.height_?this.height_:a*e,c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(c),cZ(this.styleEl_,`
      .${c} {
        width: ${a}px;
        height: ${b}px;
      }

      .${c}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100*e}%;
      }
    `)}loadTech_(a,b){var c,d;this.tech_&&this.unloadTech_();let e=du(a),f=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==e&&this.tag&&(ed.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;let g=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(g=!1);let h={source:b,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${f}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ec.names.forEach(a=>{let b=ec[a];h[b.getterName]=this[b.privateName]}),Object.assign(h,this.options_[e]),Object.assign(h,this.options_[f]),Object.assign(h,this.options_[a.toLowerCase()]),this.tag&&(h.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);let i=ed.getTech(a);if(!i)throw Error(`No Tech named '${e}' exists! '${e}' should be registered using videojs.registerTech()'`);this.tech_=new i(h),this.tech_.ready(db(this,this.handleTechReady_),!0),c=this.textTracksJson_||[],d=this.tech_,c.forEach(function(a){let b=d.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(a=>b.addCue(a))}),d.textTracks(),fO.forEach(a=>{this.on(this.tech_,a,b=>this[`handleTech${du(a)}_`](b))}),Object.keys(fP).forEach(a=>{this.on(this.tech_,a,b=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${fP[a]}_`].bind(this),event:b}):this[`handleTech${fP[a]}_`](b)})}),this.on(this.tech_,"loadstart",a=>this.handleTechLoadStart_(a)),this.on(this.tech_,"sourceset",a=>this.handleTechSourceset_(a)),this.on(this.tech_,"waiting",a=>this.handleTechWaiting_(a)),this.on(this.tech_,"ended",a=>this.handleTechEnded_(a)),this.on(this.tech_,"seeking",a=>this.handleTechSeeking_(a)),this.on(this.tech_,"play",a=>this.handleTechPlay_(a)),this.on(this.tech_,"pause",a=>this.handleTechPause_(a)),this.on(this.tech_,"durationchange",a=>this.handleTechDurationChange_(a)),this.on(this.tech_,"fullscreenchange",(a,b)=>this.handleTechFullscreenChange_(a,b)),this.on(this.tech_,"fullscreenerror",(a,b)=>this.handleTechFullscreenError_(a,b)),this.on(this.tech_,"enterpictureinpicture",a=>this.handleTechEnterPictureInPicture_(a)),this.on(this.tech_,"leavepictureinpicture",a=>this.handleTechLeavePictureInPicture_(a)),this.on(this.tech_,"error",a=>this.handleTechError_(a)),this.on(this.tech_,"posterchange",a=>this.handleTechPosterChange_(a)),this.on(this.tech_,"textdata",a=>this.handleTechTextData_(a)),this.on(this.tech_,"ratechange",a=>this.handleTechRateChange_(a)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||cu(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ec.names.forEach(a=>{let b=ec[a];this[b.privateName]=this[b.getterName]()}),this.textTracksJson_=dM(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(a){return void 0===a&&bQ.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":bI}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()&&this.hasStarted(!1),this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(a){let b;if(!this.tech_||"string"!=typeof a)return;let c=()=>{let a=this.muted();this.muted(!0);let b=()=>{this.muted(a)};this.playTerminatedQueue_.push(b);let c=this.play();if(dJ(c))return c.catch(a=>{throw b(),Error(`Rejection at manualAutoplay. Restoring muted value. ${a||""}`)})};if("any"!==a||this.muted()?b="muted"!==a||this.muted()?this.play():c():dJ(b=this.play())&&(b=b.catch(c)),dJ(b))return b.then(()=>{this.trigger({type:"autoplay-success",autoplay:a})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:a})})}updateSourceCaches_(a=""){let b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=((a,b)=>{if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;let c=a.cache_.sources.filter(a=>a.src===b);if(c.length)return c[0].type;let d=a.$$("source");for(let a=0;a<d.length;a++){let c=d[a];if(c.type&&c.src&&c.src===b)return c.type}return en(b)})(this,b)),this.cache_.source=bY({},a,{src:b,type:c});let d=this.cache_.sources.filter(a=>a.src&&a.src===b),e=[],f=this.$$("source"),g=[];for(let a=0;a<f.length;a++){let c=cA(f[a]);e.push(c),c.src&&c.src===b&&g.push(c.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b}handleTechSourceset_(a){if(!this.changingSrc_){let b=a=>this.updateSourceCaches_(a),c=this.currentSource().src,d=a.src;c&&!/^blob:/.test(c)&&/^blob:/.test(d)&&(!this.lastSource_||this.lastSource_.tech!==d&&this.lastSource_.player!==c)&&(b=()=>{}),b(d),a.src||this.tech_.any(["sourceset","loadstart"],a=>{if("sourceset"===a.type)return;let b=this.techGet_("currentSrc");this.lastSource_.tech=b,this.updateSourceCaches_(b)})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})}hasStarted(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(a=>a.callback(a.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let a=this.currentTime(),b=()=>{a!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",b))};this.on("timeupdate",b)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(a){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,a):this.paused()?dK(this.play()):this.pause())}handleTechDoubleClick_(a){!this.controls_||Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),b=>b.contains(a.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isInPictureInPicture()&&!T.default.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(a){a.cancelable&&a.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(a){let b=a.target.player;if(b&&b!==this)return;let c=this.el(),d=T.default[this.fsApi_.fullscreenElement]===c;!d&&c.matches&&(d=c.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(d)}handleTechFullscreenChange_(a,b){b&&(b.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(b.isFullscreen))}handleTechFullscreenError_(a,b){this.trigger("fullscreenerror",b)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(a){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(a){this.isInPictureInPicture(!1)}handleTechError_(){let a=this.tech_.error();a&&this.error(a)}handleTechTextData_(){let a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(a,b){this.ready(function(){if(a in ej){var c,d;return c=this.middleware_,d=this.tech_,d[a](c.reduce(el(a),b))}if(a in ek)return eh(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(a){throw bQ(a),a}},!0)}techGet_(a){if(this.tech_&&this.tech_.isReady_){if(a in ei){var b,c;return b=this.middleware_,c=this.tech_,b.reduceRight(el(a),c[a]())}if(a in ek)return eh(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw bQ(`Video.js: ${a} method not defined for ${this.techName_} playback technology.`,b),b;if("TypeError"===b.name)throw bQ(`Video.js: ${a} unavailable on ${this.techName_} playback technology element.`,b),this.tech_.isReady_=!1,b;throw bQ(b),b}}}play(){return new Promise(a=>{this.play_(a)})}play_(a=dK){this.playCallbacks_.push(a);let b=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),c=!!(cl||ck);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!b){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!b&&c&&this.load();return}let d=this.techGet_("play");c&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)}runPlayTerminatedQueue_(){let a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})}runPlayCallbacks_(a){let b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||dA(0,0)}scrubbing(a){if(void 0===a)return this.scrubbing_;this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(a){if(void 0===a)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(a<0&&(a=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",a),this.cache_.initTime=0,isFinite(a)&&(this.cache_.currentTime=Number(a))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(a=parseFloat(a))<0&&(a=1/0),a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let a=this.techGet_("buffered");return a&&a.length||(a=dA(0,0)),a}seekable(){let a=this.techGet_("seekable");return a&&a.length||(a=dA(0,0)),a}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return dH(this.buffered(),this.duration())}bufferedEnd(){let a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c}volume(a){let b;if(void 0!==a){b=Math.max(0,Math.min(1,a)),this.cache_.volume=b,this.techCall_("setVolume",b),b>0&&this.lastVolume_(b);return}return isNaN(b=parseFloat(this.techGet_("volume")))?1:b}muted(a){return void 0!==a?void this.techCall_("setMuted",a):this.techGet_("muted")||!1}defaultMuted(a){return void 0!==a&&this.techCall_("setDefaultMuted",a),this.techGet_("defaultMuted")||!1}lastVolume_(a){if(void 0!==a&&0!==a){this.cache_.lastVolume=a;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(a){if(void 0!==a){let b=this.isFullscreen_;this.isFullscreen_=!!a,this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(a){this.isInPictureInPicture()&&this.exitPictureInPicture();let b=this;return new Promise((c,d)=>{function e(){b.off("fullscreenerror",g),b.off("fullscreenchange",f)}function f(){e(),c()}function g(a,b){e(),d(b)}b.one("fullscreenchange",f),b.one("fullscreenerror",g);let h=b.requestFullscreenHelper_(a);h&&(h.then(e,e),h.then(c,d))})}requestFullscreenHelper_(a){let b;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){let a=this.el_[this.fsApi_.requestFullscreen](b);return a&&a.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),a}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let a=this;return new Promise((b,c)=>{function d(){a.off("fullscreenerror",f),a.off("fullscreenchange",e)}function e(){d(),b()}function f(a,b){d(),c(b)}a.one("fullscreenchange",e),a.one("fullscreenerror",f);let g=a.exitFullscreenHelper_();g&&(g.then(d,d),g.then(b,c))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){let a=T.default[this.fsApi_.exitFullscreen]();return a&&dK(a.then(()=>this.isFullscreen(!1))),a}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=T.default.documentElement.style.overflow,c5(T.default,"keydown",this.boundFullWindowOnEscKey_),T.default.documentElement.style.overflow="hidden",cw(T.default.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(a){"Escape"===a.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,c6(T.default,"keydown",this.boundFullWindowOnEscKey_),T.default.documentElement.style.overflow=this.docOrigOverflow,cx(T.default.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(a){if(void 0!==a){this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&S.default.documentPictureInPicture){let a=T.default.createElement(this.el().tagName);return a.classList=this.el().classList,a.classList.add("vjs-pip-container"),this.posterImage&&a.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&a.appendChild(this.titleBar.el().cloneNode(!0)),a.appendChild(cs("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),S.default.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(b=>(cS(b),this.el_.parentNode.insertBefore(a,this.el_),b.document.body.appendChild(this.el_),b.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:b}),b.addEventListener("pagehide",b=>{let c=b.target.querySelector(".video-js");a.parentNode.replaceChild(c,a),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),b))}return"pictureInPictureEnabled"in T.default&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return S.default.documentPictureInPicture&&S.default.documentPictureInPicture.window?(S.default.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in T.default?T.default.exitPictureInPicture():void 0}handleKeyDown(a){var b;let c,{userActions:d}=this.options_;d&&d.hotkeys&&(c=(b=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),b.isContentEditable||("input"===c?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(b.type):-1!==["textarea"].indexOf(c))||("function"==typeof d.hotkeys?d.hotkeys.call(this,a):this.handleHotkeys(a)))}handleHotkeys(a){let{fullscreenKey:b=b=>"f"===a.key.toLowerCase(),muteKey:c=b=>"m"===a.key.toLowerCase(),playPauseKey:d=b=>"k"===a.key.toLowerCase()||" "===a.key.toLowerCase()}=this.options_.userActions?this.options_.userActions.hotkeys:{};if(b.call(this,a)){a.preventDefault(),a.stopPropagation();let b=dx.getComponent("FullscreenToggle");!1!==T.default[this.fsApi_.fullscreenEnabled]&&b.prototype.handleClick.call(this,a)}else c.call(this,a)?(a.preventDefault(),a.stopPropagation(),dx.getComponent("MuteToggle").prototype.handleClick.call(this,a)):d.call(this,a)&&(a.preventDefault(),a.stopPropagation(),dx.getComponent("PlayToggle").prototype.handleClick.call(this,a))}canPlayType(a){let b;for(let c=0,d=this.options_.techOrder;c<d.length;c++){let e=d[c],f=ed.getTech(e);if(f||(f=dx.getComponent(e)),!f){bQ.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`);continue}if(f.isSupported()&&(b=f.canPlayType(a)))return b}return""}selectSource(a){let b,c=this.options_.techOrder.map(a=>[a,ed.getTech(a)]).filter(([a,b])=>b?b.isSupported():(bQ.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`),!1)),d=function(a,b,c){let d;return a.some(a=>b.some(b=>{if(d=c(a,b))return!0})),d},e=([a,b],c)=>{if(b.canPlaySource(c,this.options_[a.toLowerCase()]))return{source:c,tech:a}};if(this.options_.sourceOrder)b=d(a,c,(a,b)=>e(b,a));else b=d(c,a,e);return b||!1}handleSrc_(a,b){var c,d,e;if(void 0===a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let f=eo(a);if(!f.length)return void this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);if(this.changingSrc_=!0,b||(this.cache_.sources=f),this.updateSourceCaches_(f[0]),c=this,d=f[0],e=(a,c)=>{var d;if(this.middleware_=c,b||(this.cache_.sources=f),this.updateSourceCaches_(a),this.src_(a))return f.length>1?this.handleSrc_(f.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());d=this.tech_,c.forEach(a=>a.setTech&&a.setTech(d))},c.setTimeout(()=>(function a(b={},c=[],d,e,f=[],g=!1){let[h,...i]=c;if("string"==typeof h)a(b,ee[h],d,e,f,g);else if(h){let c=function(a,b){let c=ef[a.id()],d=null;if(null==c)return d=b(a),ef[a.id()]=[[b,d]],d;for(let a=0;a<c.length;a++){let[e,f]=c[a];e===b&&(d=f)}return null===d&&(d=b(a),c.push([b,d])),d}(e,h);if(!c.setSource)return f.push(c),a(b,i,d,e,f,g);c.setSource(Object.assign({},b),function(h,j){if(h)return a(b,i,d,e,f,g);f.push(c),a(j,b.type===j.type?i:ee[j.type],d,e,f,g)})}else i.length?a(b,i,d,e,f,g):g?d(b,f):a(b,ee["*"],d,e,f,!0)})(d,ee[d.type],e,c),1),f.length>1){let a=()=>{this.error(null),this.handleSrc_(f.slice(1),!0)},b=()=>{this.off("error",a)};this.one("error",a),this.one("playing",b),this.resetRetryOnError_=()=>{this.off("error",a),this.off("playing",b)}}}src(a){return this.handleSrc_(a,!1)}src_(a){let b=this.selectSource([a]);return!b||(dv(b.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(b.tech,b.source),this.tech_.ready(()=>{this.changingSrc_=!1})),!1)}addSourceElement(a,b){return!!this.tech_&&this.tech_.addSourceElement(a,b)}removeSourceElement(a){return!!this.tech_&&this.tech_.removeSourceElement(a)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():dK(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),dh(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);let{currentTimeDisplay:a,durationDisplay:b,progressControl:c,remainingTimeDisplay:d}=this.controlBar||{},{seekBar:e}=c||{};a&&a.updateContent(),b&&b.updateContent(),d&&d.updateContent(),e&&(e.update(),e.loadProgressBar&&e.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){let a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(a){if(void 0!==a){this.techCall_("setPreload",a),this.options_.preload=a;return}return this.techGet_("preload")}autoplay(a){let b;if(void 0===a)return this.options_.autoplay||!1;"string"==typeof a&&/(any|play|muted)/.test(a)||!0===a&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"==typeof a?a:"play"),b=!1):a?this.options_.autoplay=!0:this.options_.autoplay=!1,b=void 0===b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)}playsinline(a){return void 0!==a&&(this.techCall_("setPlaysinline",a),this.options_.playsinline=a),this.techGet_("playsinline")}loop(a){if(void 0!==a){this.techCall_("setLoop",a),this.options_.loop=a;return}return this.techGet_("loop")}poster(a){if(void 0===a)return this.poster_;a||(a=""),a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){let a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(a){if(void 0===a)return!!this.controls_;a=!!a,this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a,this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(a){if(void 0===a)return this.error_||null;if(bK("beforeerror").forEach(b=>{let c=b(this,a);bW(c)&&!Array.isArray(c)||"string"==typeof c||"number"==typeof c||null===c?a=c:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&a&&4===a.code){let b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],b),this.one("loadstart",function(){this.off(["click","touchstart"],b)});return}if(null===a){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new dI(a),this.addClass("vjs-error"),bQ.error(`(CODE:${this.error_.code} ${dI.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),bK("error").forEach(a=>a(this,this.error_))}reportUserActivity(a){this.userActivity_=!0}userActive(a){if(void 0===a)return this.userActive_;if((a=!!a)!==this.userActive_){if(this.userActive_=a,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let a,b,c,d,e=db(this,this.reportUserActivity),f=function(b){e(),this.clearInterval(a)};this.on("mousedown",function(){e(),this.clearInterval(a),a=this.setInterval(e,250)}),this.on("mousemove",function(a){(a.screenX!==b||a.screenY!==c)&&(b=a.screenX,c=a.screenY,e())}),this.on("mouseup",f),this.on("mouseleave",f);let g=this.getChild("controlBar");!g||ck||b2||(g.on("mouseenter",function(a){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),g.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",e),this.on("keyup",e),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(d);let a=this.options_.inactivityTimeout;a<=0||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))},250)}playbackRate(a){return void 0!==a?void this.techCall_("setPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(a){if(void 0!==a){this.isAudio_=!!a;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){let a=this.getChild("ControlBar");a&&this.audioOnlyCache_.controlBarHeight!==a.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=a.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");let a=this.children(),b=this.getChild("ControlBar"),c=b&&b.currentHeight();a.forEach(a=>{a!==b&&a.el_&&!a.hasClass("vjs-hidden")&&(a.hide(),this.audioOnlyCache_.hiddenChildren.push(a))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=c,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(c),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(a=>a.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(a){if("boolean"!=typeof a||a===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=a,a){let a=[];return this.isInPictureInPicture()&&a.push(this.exitPictureInPicture()),this.isFullscreen()&&a.push(this.exitFullscreen()),this.audioPosterMode()&&a.push(this.audioPosterMode(!1)),Promise.all(a).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(a){return"boolean"!=typeof a||a===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=a,a)?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)}addRemoteTextTrack(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)}removeRemoteTextTrack(a={}){let{track:b}=a;if(b||(b=a),this.tech_)return this.tech_.removeRemoteTextTrack(b)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(a){if(void 0===a)return this.language_;this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),dh(this)&&this.trigger("languagechange"))}languages(){return bY(fT.prototype.options_.languages,this.languages_)}toJSON(){let a=bY(this.options_),b=a.tracks;a.tracks=[];for(let c=0;c<b.length;c++){let d=b[c];(d=bY(d)).player=void 0,a.tracks[c]=d}return a}createModal(a,b){(b=b||{}).content=a||"";let c=new dO(this,b);return this.addChild(c),c.on("dispose",()=>{this.removeChild(c)}),c.open(),c}updateCurrentBreakpoint_(){if(!this.responsive())return;let a=this.currentBreakpoint(),b=this.currentWidth();for(let c=0;c<fQ.length;c++){let d=fQ[c];if(b<=this.breakpoints_[d]){if(a===d)return;a&&this.removeClass(fR[a]),this.addClass(fR[d]),this.breakpoint_=d;break}}}removeCurrentBreakpoint_(){let a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)}breakpoints(a){return void 0===a||(this.breakpoint_="",this.breakpoints_=Object.assign({},fS,a),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(a){if(void 0===a)return this.responsive_;a=!!a;let b=this.responsive_;if(a!==b)return this.responsive_=a,a?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return fR[this.breakpoint_]||""}loadMedia(a,b){if(!a||"object"!=typeof a)return;let c=this.crossOrigin();this.reset(),this.cache_.media=bY(a);let{artist:d,artwork:e,description:f,poster:g,src:h,textTracks:i,title:j}=this.cache_.media;!e&&g&&(this.cache_.media.artwork=[{src:g,type:en(g)}]),c&&this.crossOrigin(c),h&&this.src(h),g&&this.poster(g),Array.isArray(i)&&i.forEach(a=>this.addRemoteTextTrack(a,!1)),this.titleBar&&this.titleBar.update({title:j,description:f||d||""}),this.ready(b)}getMedia(){if(!this.cache_.media){let a=this.poster(),b={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src}))};return a&&(b.poster=a,b.artwork=[{src:b.poster,type:en(b.poster)}]),b}return bY(this.cache_.media)}static getTagSettings(a){let b={sources:[],tracks:[]},c=cA(a),d=c["data-setup"];if(cv(a,"vjs-fill")&&(c.fill=!0),cv(a,"vjs-fluid")&&(c.fluid=!0),null!==d)try{Object.assign(c,JSON.parse(d||"{}"))}catch(a){bQ.error("data-setup",a)}if(Object.assign(b,c),a.hasChildNodes()){let c=a.childNodes;for(let a=0,d=c.length;a<d;a++){let d=c[a],e=d.nodeName.toLowerCase();"source"===e?b.sources.push(cA(d)):"track"===e&&b.tracks.push(cA(d))}}return b}debug(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(a){return void 0===a?this.cache_.playbackRates:Array.isArray(a)?void(a.every(a=>"number"==typeof a)&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange"))):void 0}}fT.prototype.videoTracks=()=>{},fT.prototype.audioTracks=()=>{},fT.prototype.textTracks=()=>{},fT.prototype.remoteTextTracks=()=>{},fT.prototype.remoteTextTrackEls=()=>{},ec.names.forEach(function(a){let b=ec[a];fT.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),fT.prototype.crossorigin=fT.prototype.crossOrigin,fT.players={};let fU=S.default.navigator;fT.prototype.options_={techOrder:ed.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:fU&&(fU.languages&&fU.languages[0]||fU.userLanguage||fU.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},fO.forEach(function(a){fT.prototype[`handleTech${du(a)}_`]=function(){return this.trigger(a)}}),dx.registerComponent("Player",fT);let fV="plugin",fW="activePlugins_",fX={},fY=a=>fX.hasOwnProperty(a)?fX[a]:void 0,fZ=(a,b)=>{a[fW]=a[fW]||{},a[fW][b]=!0},f$=(a,b,c)=>{let d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},f_=function(a,b){let c=function(){f$(this,{name:a,plugin:b,instance:null},!0);let c=b.apply(this,arguments);return fZ(this,a),f$(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c},f0=(a,b)=>(b.prototype.name=a,function(...c){f$(this,{name:a,plugin:b,instance:null},!0);let d=new b(...[this,...c]);return this[a]=()=>d,f$(this,d.getEventHash()),d});class f1{constructor(a){if(this.constructor===f1)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=a,this.log||(this.log=this.player.log.createLogger(this.name)),dq(this),delete this.trigger,ds(this,this.constructor.defaultState),fZ(a,this.name),this.dispose=this.dispose.bind(this),a.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(a={}){return a.name=this.name,a.plugin=this.constructor,a.instance=this,a}trigger(a,b={}){return c7(this.eventBusEl_,a,this.getEventHash(b))}handleStateChanged(a){}dispose(){let{name:a,player:b}=this;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[fW][a]=!1,this.player=this.state=null,b[a]=f0(a,fX[a])}static isBasic(a){let b="string"==typeof a?fY(a):a;return"function"==typeof b&&!f1.prototype.isPrototypeOf(b.prototype)}static registerPlugin(a,b){if("string"!=typeof a)throw Error(`Illegal plugin name, "${a}", must be a string, was ${typeof a}.`);if(fX.hasOwnProperty(a))bQ.warn(`A plugin named "${a}" already exists. You may want to avoid re-registering plugins!`);else if(fT.prototype.hasOwnProperty(a))throw Error(`Illegal plugin name, "${a}", cannot share a name with an existing player method!`);if("function"!=typeof b)throw Error(`Illegal plugin for "${a}", must be a function, was ${typeof b}.`);return fX[a]=b,a!==fV&&(f1.isBasic(b)?fT.prototype[a]=f_(a,b):fT.prototype[a]=f0(a,b)),b}static deregisterPlugin(a){if(a===fV)throw Error("Cannot de-register base plugin.");fX.hasOwnProperty(a)&&(delete fX[a],delete fT.prototype[a])}static getPlugins(a=Object.keys(fX)){let b;return a.forEach(a=>{let c=fY(a);c&&((b=b||{})[a]=c)}),b}static getPluginVersion(a){let b=fY(a);return b&&b.VERSION||""}}function f2(a,b,c,d){var e;let f;return e=`${b} is deprecated and will be removed in ${a}.0; please use ${c} instead.`,f=!1,function(...a){return f||bQ.warn(e),f=!0,d.apply(this,a)}}f1.getPlugin=fY,f1.BASE_PLUGIN_NAME=fV,f1.registerPlugin(fV,f1),fT.prototype.usingPlugin=function(a){return!!this[fW]&&!0===this[fW][a]},fT.prototype.hasPlugin=function(a){return!!fX.hasOwnProperty(a)};let f3=a=>0===a.indexOf("#")?a.slice(1):a;function f4(a,b,c){let d=f4.getPlayer(a);if(d)return b&&bQ.warn(`Player "${a}" is already initialised. Options will not be applied.`),c&&d.ready(c),d;let e="string"==typeof a?cP("#"+f3(a)):a;if(!cp(e))throw TypeError("The element or ID supplied is not valid. (videojs)");let f="getRootNode"in e&&e.getRootNode()instanceof S.default.ShadowRoot?e.getRootNode():e.ownerDocument.body;return e.ownerDocument.defaultView&&f.contains(e)||bQ.warn("The element supplied is not included in the DOM"),!0===(b=b||{}).restoreEl&&(b.restoreEl=(e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),bK("beforesetup").forEach(a=>{let c=a(e,bY(b));!bW(c)||Array.isArray(c)?bQ.error("please return an object in beforesetup hooks"):b=bY(b,c)}),d=new(dx.getComponent("Player"))(e,b,c),bK("setup").forEach(a=>a(d)),d}if(f4.hooks_=bJ,f4.hooks=bK,f4.hook=function(a,b){bK(a,b)},f4.hookOnce=function(a,b){bK(a,[].concat(b).map(b=>{let c=(...d)=>(bL(a,c),b(...d));return c}))},f4.removeHook=bL,!0!==S.default.VIDEOJS_NO_DYNAMIC_STYLE&&co()){let a=cP(".vjs-styles-defaults");if(!a){a=cY("vjs-styles-defaults");let b=cP("head");b&&b.insertBefore(a,b.firstChild),cZ(a,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}cW(1,f4),f4.VERSION=bI,f4.options=fT.prototype.options_,f4.getPlayers=()=>fT.players,f4.getPlayer=a=>{let b,c=fT.players;if("string"==typeof a){let d=f3(a),e=c[d];if(e)return e;b=cP("#"+d)}else b=a;if(cp(b)){let{player:a,playerId:d}=b;if(a||c[d])return a||c[d]}},f4.getAllPlayers=()=>Object.keys(fT.players).map(a=>fT.players[a]).filter(Boolean),f4.players=fT.players,f4.getComponent=dx.getComponent,f4.registerComponent=(a,b)=>(ed.isTech(b)&&bQ.warn(`The ${a} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),dx.registerComponent.call(dx,a,b)),f4.getTech=ed.getTech,f4.registerTech=ed.registerTech,f4.use=function(a,b){ee[a]=ee[a]||[],ee[a].push(b)},Object.defineProperty(f4,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(f4.middleware,"TERMINATOR",{value:eg,writeable:!1,enumerable:!0}),f4.browser=cm,f4.obj=b_,f4.mergeOptions=f2(9,"videojs.mergeOptions","videojs.obj.merge",bY),f4.defineLazyProperty=f2(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",b$),f4.bind=f2(9,"videojs.bind","native Function.prototype.bind",db),f4.registerPlugin=f1.registerPlugin,f4.deregisterPlugin=f1.deregisterPlugin,f4.plugin=(a,b)=>(bQ.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),f1.registerPlugin(a,b)),f4.getPlugins=f1.getPlugins,f4.getPlugin=f1.getPlugin,f4.getPluginVersion=f1.getPluginVersion,f4.addLanguage=function(a,b){return a=(""+a).toLowerCase(),f4.options.languages=bY(f4.options.languages,{[a]:b}),f4.options.languages[a]},f4.log=bQ,f4.createLogger=bR,f4.time=dG,f4.createTimeRange=f2(9,"videojs.createTimeRange","videojs.time.createTimeRanges",dA),f4.createTimeRanges=f2(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",dA),f4.formatTime=f2(9,"videojs.formatTime","videojs.time.formatTime",dF),f4.setFormatTime=f2(9,"videojs.setFormatTime","videojs.time.setFormatTime",dD),f4.resetFormatTime=f2(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",dE),f4.parseUrl=f2(9,"videojs.parseUrl","videojs.url.parseUrl",d_),f4.isCrossOrigin=f2(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",d2),f4.EventTarget=df,f4.any=c9,f4.on=c5,f4.one=c8,f4.off=c6,f4.trigger=c7,f4.xhr=U.default,f4.TrackList=dP,f4.TextTrack=d6,f4.TextTrackList=dU,f4.AudioTrack=d7,f4.AudioTrackList=dR,f4.VideoTrack=d8,f4.VideoTrackList=dT,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(a=>{f4[a]=function(){return bQ.warn(`videojs.${a}() is deprecated; use videojs.dom.${a}() instead`),cT[a].apply(null,arguments)}}),f4.computedStyle=f2(9,"videojs.computedStyle","videojs.dom.computedStyle",cR),f4.dom=cT,f4.fn=de,f4.num=eK,f4.str=dw,f4.url=d3,f4.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class f5{constructor(a){let b=this;return b.id=a.id,b.label=b.id,b.width=a.width,b.height=a.height,b.bitrate=a.bandwidth,b.frameRate=a.frameRate,b.enabled_=a.enabled,Object.defineProperty(b,"enabled",{get:()=>b.enabled_(),set(a){b.enabled_(a)}}),b}}class f6 extends f4.EventTarget{constructor(){super();let a=this;return a.levels_=[],a.selectedIndex_=-1,Object.defineProperty(a,"selectedIndex",{get:()=>a.selectedIndex_}),Object.defineProperty(a,"length",{get:()=>a.levels_.length}),a[Symbol.iterator]=()=>a.levels_.values(),a}addQualityLevel(a){let b=this.getQualityLevelById(a.id);if(b)return b;let c=this.levels_.length;return b=new f5(a),""+c in this||Object.defineProperty(this,c,{get(){return this.levels_[c]}}),this.levels_.push(b),this.trigger({qualityLevel:b,type:"addqualitylevel"}),b}removeQualityLevel(a){let b=null;for(let c=0,d=this.length;c<d;c++)if(this[c]===a){b=this.levels_.splice(c,1)[0],this.selectedIndex_===c?this.selectedIndex_=-1:this.selectedIndex_>c&&this.selectedIndex_--;break}return b&&this.trigger({qualityLevel:a,type:"removequalitylevel"}),b}getQualityLevelById(a){for(let b=0,c=this.length;b<c;b++){let c=this[b];if(c.id===a)return c}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}for(let a in f6.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},f6.prototype.allowedEvents_)f6.prototype["on"+a]=null;var f7="4.1.0";let f8=function(a,b){let c=a.qualityLevels,d=new f6,e=function(){d.dispose(),a.qualityLevels=c,a.off("dispose",e)};return a.on("dispose",e),a.qualityLevels=()=>d,a.qualityLevels.VERSION=f7,d},f9=function(a){return f8(this,f4.obj.merge({},a))};f4.registerPlugin("qualityLevels",f9),f9.VERSION=f7;let ga=(a,b)=>b&&b.responseURL&&a!==b.responseURL?b.responseURL:a,gb=a=>f4.log.debug?f4.log.debug.bind(f4,"VHS:",`${a} >`):function(){};function gc(...a){let b=f4.obj||f4;return(b.merge||b.mergeOptions).apply(b,a)}function gd(...a){let b=f4.time||f4;return(b.createTimeRanges||b.createTimeRanges).apply(b,a)}let ge=1/30,gf=1/30*3,gg=function(a,b){let c,d=[];if(a&&a.length)for(c=0;c<a.length;c++)b(a.start(c),a.end(c))&&d.push([a.start(c),a.end(c)]);return gd(d)},gh=function(a,b){return gg(a,function(a,c){return a-gf<=b&&c+gf>=b})},gi=function(a,b){return gg(a,function(a){return a-ge>=b})},gj=function(a){if(a.length<2)return gd();let b=[];for(let c=1;c<a.length;c++){let d=a.end(c-1),e=a.start(c);b.push([d,e])}return gd(b)},gk=function(a,b){let c=null,d=null,e=0,f=[],g=[];if(!a||!a.length||!b||!b.length)return gd();let h=a.length;for(;h--;)f.push({time:a.start(h),type:"start"}),f.push({time:a.end(h),type:"end"});for(h=b.length;h--;)f.push({time:b.start(h),type:"start"}),f.push({time:b.end(h),type:"end"});for(f.sort(function(a,b){return a.time-b.time}),h=0;h<f.length;h++)"start"===f[h].type?2==++e&&(c=f[h].time):"end"===f[h].type&&1==--e&&(d=f[h].time),null!==c&&null!==d&&(g.push([c,d]),c=null,d=null);return gd(g)},gl=a=>{let b=[];if(!a||!a.length)return"";for(let c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},gm=a=>{let b=[];for(let c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},gn=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a||a.length!==b.length)return!0;for(let c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1},go=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},gp=function(a,b){let c=0;if(!a||!a.length)return c;for(let d=0;d<a.length;d++){let e=a.start(d),f=a.end(d);if(!(b>f)){if(b>e&&b<=f){c+=f-b;continue}c+=f-e}}return c},gq=(a,b)=>{if(!b.preload)return b.duration;let c=0;return(b.parts||[]).forEach(function(a){c+=a.duration}),(b.preloadHints||[]).forEach(function(b){"PART"===b.type&&(c+=a.partTargetDuration)}),c},gr=a=>(a.segments||[]).reduce((a,b,c)=>(b.parts?b.parts.forEach(function(d,e){a.push({duration:d.duration,segmentIndex:c,partIndex:e,part:d,segment:b})}):a.push({duration:b.duration,segmentIndex:c,partIndex:null,segment:b,part:null}),a),[]),gs=a=>{let b=a.segments&&a.segments.length&&a.segments[a.segments.length-1];return b&&b.parts||[]},gt=({preloadSegment:a})=>{if(!a)return;let{parts:b,preloadHints:c}=a,d=(c||[]).reduce((a,b)=>a+ +("PART"===b.type),0);return d+(b&&b.length?b.length:0)},gu=(a,b)=>{if(b.endList)return 0;if(a&&a.suggestedPresentationDelay)return a.suggestedPresentationDelay;let c=gs(b).length>0;return c&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:c&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:b.targetDuration?3*b.targetDuration:0},gv=function(a,b){let c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if(void 0!==e.start)return{result:e.start,precise:!0};if(void 0!==e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if(void 0!==(e=a.segments[d]).end)return{result:c+e.end,precise:!0};if(c+=gq(a,e),void 0!==e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},gw=function(a,b){let c,d=0,e=b-a.mediaSequence;for(;e<a.segments.length;e++){if(void 0!==(c=a.segments[e]).start)return{result:c.start-d,precise:!0};if(d+=gq(a,c),void 0!==c.end)return{result:c.end-d,precise:!0}}return{result:-1,precise:!1}},gx=function(a,b,c){if(void 0===b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence)return 0;let d=gv(a,b);if(d.precise)return d.result;let e=gw(a,b);return e.precise?e.result:d.result+c},gy=function(a,b,c){if(!a)return 0;if("number"!=typeof c&&(c=0),void 0===b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return S.default.Infinity}return gx(a,b,c)},gz=function({defaultDuration:a,durationList:b,startIndex:c,endIndex:d}){let e=0;if(c>d&&([c,d]=[d,c]),c<0){for(let b=c;b<Math.min(0,d);b++)e+=a;c=0}for(let a=c;a<d;a++)e+=b[a].duration;return e},gA=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return gy(a);if(null===b)return null;b=b||0;let e=gx(a,a.mediaSequence+a.segments.length,b);return c&&(e-=d="number"==typeof d?d:gu(null,a)),Math.max(0,e)},gB=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},gC=function(a){return a.excludeUntil&&a.excludeUntil===1/0},gD=function(a){let b=gB(a);return!a.disabled&&!b},gE=function(a,b){return b.attributes&&b.attributes[a]},gF=(a,b)=>{if(1===a.playlists.length)return!0;let c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(a=>!!gD(a)&&(a.attributes.BANDWIDTH||0)<c).length},gG=(a,b)=>(!!a||!!b)&&(!!a||!b)&&(!a||!!b)&&(a===b||!!a.id&&!!b.id&&a.id===b.id||!!a.resolvedUri&&!!b.resolvedUri&&a.resolvedUri===b.resolvedUri||!!a.uri&&!!b.uri&&a.uri===b.uri),gH=function(a,b){let c=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{},d=!1;for(let a in c){for(let e in c[a])if(d=b(c[a][e]))break;if(d)break}return!!d},gI=a=>{if(!a||!a.playlists||!a.playlists.length)return gH(a,a=>a.playlists&&a.playlists.length||a.uri);for(let b=0;b<a.playlists.length;b++){let c=a.playlists[b],d=c.attributes&&c.attributes.CODECS;if(!(d&&d.split(",").every(a=>an(a)))&&!gH(a,a=>gG(c,a)))return!1}return!0};var gJ={liveEdgeDelay:gu,duration:gy,seekable:function(a,b,c){let d=b||0,e=gA(a,b,!0,c);return null===e?gd():(e<d&&(e=d),gd(d,e))},getMediaInfoForTime:function({playlist:a,currentTime:b,startingSegmentIndex:c,startingPartIndex:d,startTime:e,exactManifestTimings:f}){let g=b-e,h=gr(a),i=0;for(let a=0;a<h.length;a++){let b=h[a];if(c===b.segmentIndex&&("number"!=typeof d||"number"!=typeof b.partIndex||d===b.partIndex)){i=a;break}}if(g<0){if(i>0)for(let b=i-1;b>=0;b--){let c=h[b];if(g+=c.duration,f){if(g<0)continue}else if(g+ge<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:e-gz({defaultDuration:a.targetDuration,durationList:h,startIndex:i,endIndex:b})}}return{partIndex:h[0]&&h[0].partIndex||null,segmentIndex:h[0]&&h[0].segmentIndex||0,startTime:b}}if(i<0){for(let c=i;c<0;c++)if((g-=a.targetDuration)<0)return{partIndex:h[0]&&h[0].partIndex||null,segmentIndex:h[0]&&h[0].segmentIndex||0,startTime:b};i=0}for(let b=i;b<h.length;b++){let c=h[b];g-=c.duration;let d=c.duration>ge,j=0===g,k=d&&g+ge>=0;if(!j&&!k||b===h.length-1){if(f){if(g>0)continue}else if(g-ge>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:e+gz({defaultDuration:a.targetDuration,durationList:h,startIndex:i,endIndex:b})}}}return{segmentIndex:h[h.length-1].segmentIndex,partIndex:h[h.length-1].partIndex,startTime:b}},isEnabled:gD,isDisabled:function(a){return a.disabled},isExcluded:gB,isIncompatible:gC,playlistEnd:gA,isAes:function(a){for(let b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},hasAttribute:gE,estimateSegmentRequestTime:function(a,b,c,d=0){return gE("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:gF,isAudioOnly:gI,playlistMatch:gG,segmentDurationWithParts:gq};let{log:gK}=f4,gL=(a,b)=>`${a}-${b}`,gM=(a,b,c)=>`placeholder-uri-${a}-${b}-${c}`,gN=(a,b)=>{a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(c=>{if(a.mediaGroups[c])for(let d in a.mediaGroups[c])for(let e in a.mediaGroups[c][d])b(a.mediaGroups[c][d][e],c,d,e)})},gO=({playlist:a,uri:b,id:c})=>{a.id=c,a.playlistErrors_=0,b&&(a.uri=b),a.attributes=a.attributes||{}},gP=(a,b,c=gM)=>{a.uri=b;for(let b=0;b<a.playlists.length;b++)if(!a.playlists[b].uri){let c=`placeholder-uri-${b}`;a.playlists[b].uri=c}let d=gI(a);gN(a,(b,e,f,g)=>{if(!b.playlists||!b.playlists.length){if(d&&"AUDIO"===e&&!b.uri)for(let b=0;b<a.playlists.length;b++){let c=a.playlists[b];if(c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===f)return}b.playlists=[(0,W.default)({},b)]}b.playlists.forEach(function(b,d){let h=c(e,f,g,b),i=gL(d,h);b.uri?b.resolvedUri=b.resolvedUri||Y(a.uri,b.uri):(b.uri=0===d?h:i,b.resolvedUri=b.uri),b.id=b.id||i,b.attributes=b.attributes||{},a.playlists[b.id]=b,a.playlists[b.uri]=b})});let e=a.playlists.length;for(;e--;){let b=a.playlists[e];gO({playlist:b,id:gL(e,b.uri)}),b.resolvedUri=Y(a.uri,b.uri),a.playlists[b.id]=b,a.playlists[b.uri]=b,b.attributes.BANDWIDTH||gK.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}gN(a,b=>{b.uri&&(b.resolvedUri=Y(a.uri,b.uri))})};class gQ{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(a=[]){if(null!==this.offset_||!a.length)return;let[b]=a;void 0!==b.programDateTime&&(this.offset_=b.programDateTime/1e3)}setPendingDateRanges(a=[]){if(!a.length)return;let[b]=a,c=b.startDate.getTime();this.trimProcessedDateRanges_(c),this.pendingDateRanges_=a.reduce((a,b)=>(a.set(b.id,b),a),new Map)}processDateRange(a){this.pendingDateRanges_.delete(a.id),this.processedDateRanges_.set(a.id,a)}getDateRangesToProcess(){if(null===this.offset_)return[];let a={},b=[];for(let c of(this.pendingDateRanges_.forEach((c,d)=>{if(!this.processedDateRanges_.has(d)&&(c.startTime=c.startDate.getTime()/1e3-this.offset_,c.processDateRange=()=>this.processDateRange(c),b.push(c),c.class))if(a[c.class]){let b=a[c.class].push(c);c.classListIndex=b-1}else a[c.class]=[c],c.classListIndex=0}),b)){let b=a[c.class]||[];c.endDate?c.endTime=c.endDate.getTime()/1e3-this.offset_:c.endOnNext&&b[c.classListIndex+1]?c.endTime=b[c.classListIndex+1].startTime:c.duration?c.endTime=c.startTime+c.duration:c.plannedDuration?c.endTime=c.startTime+c.plannedDuration:c.endTime=c.startTime}return b}trimProcessedDateRanges_(a){new Map(this.processedDateRanges_).forEach((b,c)=>{b.startDate.getTime()<a&&this.processedDateRanges_.delete(c)})}}let gR=({requestType:a,request:b,error:c,parseFailure:d})=>{let e=b.status<200||b.status>299,f=b.status>=400&&b.status<=499,g={uri:b.uri,requestType:a};return c&&f?(g.error=(0,W.default)({},c),g.errorType=f4.Error.NetworkRequestFailed):b.aborted?g.errorType=f4.Error.NetworkRequestAborted:b.timedout?g.errorType=f4.Error.NetworkRequestTimeout:(e&&!f||d)&&(g.errorType=d?f4.Error.NetworkBodyParserFailed:f4.Error.NetworkBadStatus,g.status=b.status,g.headers=b.headers),g},gS=gb("CodecUtils"),gT=function(a){let b=a.attributes||{};if(b.CODECS)return al(b.CODECS)},gU=(a,b)=>{let c=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&c.AUDIO&&a.mediaGroups.AUDIO[c.AUDIO]},gV=function(a){let b={};return a.forEach(({mediaType:a,type:c,details:d})=>{b[a]=b[a]||[],b[a].push(ak(`${c}${d}`))}),Object.keys(b).forEach(function(a){if(b[a].length>1){gS(`multiple ${a} codecs found as attributes: ${b[a].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),b[a]=null;return}b[a]=b[a][0]}),b},gW=function(a){let b=0;return a.audio&&b++,a.video&&b++,b},gX=function(a,b){let c=b.attributes||{},d=gV(gT(b)||[]);if(gU(a,b)&&!d.audio&&!((a,b)=>{if(!gU(a,b))return!0;let c=b.attributes||{},d=a.mediaGroups.AUDIO[c.AUDIO];for(let a in d)if(!d[a].uri&&!d[a].playlists)return!0;return!1})(a,b)){let b=gV(am(a,c.AUDIO)||[]);b.audio&&(d.audio=b.audio)}return d},{EventTarget:gY}=f4,gZ=(a,b)=>{if(!a)return b;let c=gc(a,b);if(a.preloadHints&&!b.preloadHints&&delete c.preloadHints,a.parts&&!b.parts)delete c.parts;else if(a.parts&&b.parts)for(let d=0;d<b.parts.length;d++)a.parts&&a.parts[d]&&(c.parts[d]=gc(a.parts[d],b.parts[d]));return!a.skipped&&b.skipped&&(c.skipped=!1),a.preload&&!b.preload&&(c.preload=!1),c},g$=(a,b)=>{!a.resolvedUri&&a.uri&&(a.resolvedUri=Y(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Y(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Y(b,a.map.uri)),a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=Y(b,a.map.key.uri)),a.parts&&a.parts.length&&a.parts.forEach(a=>{a.resolvedUri||(a.resolvedUri=Y(b,a.uri))}),a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(a=>{a.resolvedUri||(a.resolvedUri=Y(b,a.uri))})},g_=function(a){let b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints){for(let a=0;a<c.preloadHints.length;a++)if("MAP"===c.preloadHints[a].type)return b}c.duration=a.targetDuration,c.preload=!0,b.push(c)}return b},g0=(a,b)=>a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence&&a.preloadSegment===b.preloadSegment,g1=(a,b,c=g0)=>{let d=gc(a,{}),e=d.playlists[b.id];if(!e||c(e,b))return null;b.segments=g_(b);let f=gc(e,b);if(f.preloadSegment&&!b.preloadSegment&&delete f.preloadSegment,e.segments){if(b.skip){b.segments=b.segments||[];for(let a=0;a<b.skip.skippedSegments;a++)b.segments.unshift({skipped:!0})}f.segments=((a,b,c)=>{let d,e=a.slice(),f=b.slice();c=c||0;let g=[];for(let a=0;a<f.length;a++){let b=e[a+c],h=f[a];b?(d=b.map||d,g.push(gZ(b,h))):(d&&!h.map&&(h.map=d),g.push(h))}return g})(e.segments,b.segments,b.mediaSequence-e.mediaSequence)}f.segments.forEach(a=>{g$(a,f.resolvedUri)});for(let a=0;a<d.playlists.length;a++)d.playlists[a].id===b.id&&(d.playlists[a]=f);return d.playlists[b.id]=f,d.playlists[b.uri]=f,gN(a,(a,c,d,e)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)b.id===a.playlists[c].id&&(a.playlists[c]=f)}),d},g2=(a,b)=>{let c=a.segments||[],d=c[c.length-1],e=d&&d.parts&&d.parts[d.parts.length-1],f=e&&e.duration||d&&d.duration;return b&&f?1e3*f:500*(a.partTargetDuration||a.targetDuration||10)},g3=(a,b,c)=>{if(!a)return;let d=[];return a.forEach(a=>{if(!a.attributes)return;let{BANDWIDTH:b,RESOLUTION:c,CODECS:e}=a.attributes;d.push({id:a.id,bandwidth:b,resolution:c,codecs:e})}),{type:b,isLive:c,renditions:d}};class g4 extends gY{constructor(a,b,c={}){if(super(),!a)throw Error("A non-empty playlist URL or object is required");this.logger_=gb("PlaylistLoader");const{withCredentials:d=!1}=c;this.src=a,this.vhs_=b,this.withCredentials=d,this.addDateRangesToTextTrack_=c.addDateRangesToTextTrack;const e=b.options_;this.customTagParsers=e&&e.customTagParsers||[],this.customTagMappers=e&&e.customTagMappers||[],this.llhls=e&&e.llhls,this.dateRangesStorage_=new gQ,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){let a=this.media();if(!a)return;this.dateRangesStorage_.setOffset(a.segments),this.dateRangesStorage_.setPendingDateRanges(a.dateRanges);let b=this.dateRangesStorage_.getDateRangesToProcess();b.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(b)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;let a=this.media(),b=Y(this.main.uri,a.uri);this.llhls&&(b=((a,b)=>{if(b.endList||!b.serverControl)return a;let c={};if(b.serverControl.canBlockReload){let{preloadSegment:a}=b,d=b.mediaSequence+b.segments.length;if(a){let e=a.parts||[],f=gt(b)-1;f>-1&&f!==e.length-1&&(c._HLS_part=f),(f>-1||e.length)&&d--}c._HLS_msn=d}if(b.serverControl&&b.serverControl.canSkipUntil&&(c._HLS_skip=b.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(c).length){let b=new S.default.URL(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(a){c.hasOwnProperty(a)&&b.searchParams.set(a,c[a])}),a=b.toString()}return a})(b,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:b,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,b)=>{if(this.request){if(a)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(a,b,c){let{uri:d,id:e}=b;this.request=null,c&&(this.state=c),this.error={playlist:this.main.playlists[e],status:a.status,message:`HLS playlist request error at URL: ${d}.`,responseText:a.responseText,code:a.status>=500?4:2,metadata:gR({requestType:a.requestType,request:a,error:a.error})},this.trigger("error")}parseManifest_({url:a,manifestString:b}){try{let c=(({onwarn:a,oninfo:b,manifestString:c,customTagParsers:d=[],customTagMappers:e=[],llhls:f})=>{let g=new ag;a&&g.on("warn",a),b&&g.on("info",b),d.forEach(a=>g.addParser(a)),e.forEach(a=>g.addTagMapper(a)),g.push(c),g.end();let h=g.manifest;if(!f&&(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(a){h.hasOwnProperty(a)&&delete h[a]}),h.segments&&h.segments.forEach(function(a){["parts","preloadHints"].forEach(function(b){a.hasOwnProperty(b)&&delete a[b]})})),!h.targetDuration){let b=10;h.segments&&h.segments.length&&(b=h.segments.reduce((a,b)=>Math.max(a,b.duration),0)),a&&a({message:`manifest has no targetDuration defaulting to ${b}`}),h.targetDuration=b}let i=gs(h);if(i.length&&!h.partTargetDuration){let b=i.reduce((a,b)=>Math.max(a,b.duration),0);a&&(a({message:`manifest has no partTargetDuration defaulting to ${b}`}),gK.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=b}return h})({onwarn:({message:b})=>this.logger_(`m3u8-parser warn for ${a}: ${b}`),oninfo:({message:b})=>this.logger_(`m3u8-parser info for ${a}: ${b}`),manifestString:b,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});if(!c.playlists||!c.playlists.length)return c;return this.excludeAudioOnlyVariants(c.playlists),c}catch(a){this.error=a,this.error.metadata={errorType:f4.Error.StreamingHlsPlaylistParserError,error:a}}}excludeAudioOnlyVariants(a){let b=a=>{let{width:b,height:c}=(a.attributes||{}).RESOLUTION||{};return!!b&&!!c||!!gV(gT(a)||[]).video};a.some(b)&&a.forEach(a=>{b(a)||(a.excludeUntil=1/0)})}haveMetadata({playlistString:a,playlistObject:b,url:c,id:d}){this.request=null,this.state="HAVE_METADATA";let e={playlistInfo:{type:"media",uri:c}};this.trigger({type:"playlistparsestart",metadata:e});let f=b||this.parseManifest_({url:c,manifestString:a});f.lastRequest=Date.now(),gO({playlist:f,uri:c,id:d});let g=g1(this.main,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,g?(this.main=g,this.media_=this.main.playlists[d]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(g2(this.media(),!!g)),e.parsedPlaylist=g3(this.main.playlists,e.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:e}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),S.default.clearTimeout(this.mediaUpdateTimeout),S.default.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new gQ,this.off()}stopRequest(){if(this.request){let a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}}media(a,b){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"==typeof a){if(!this.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.main.playlists[a]}if(S.default.clearTimeout(this.finalRenditionTimeout),b){let b=(a.partTargetDuration||a.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=S.default.setTimeout(this.media.bind(this,a,!1),b);return}let c=this.state,d=!this.media_||a.id!==this.media_.id,e=this.main.playlists[a.id];if(e&&e.endList||a.endList&&a.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(g2(a,!0)),!d)return;if(this.state="SWITCHING_MEDIA",this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=a;let f={playlistInfo:{type:"media",uri:a.uri}};this.trigger({type:"playlistrequeststart",metadata:f}),this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(b,d)=>{if(this.request){if(a.lastRequest=Date.now(),a.resolvedUri=ga(a.resolvedUri,d),b)return this.playlistRequestError(this.request,a,c);this.trigger({type:"playlistrequestcomplete",metadata:f}),this.haveMetadata({playlistString:d.responseText,url:a.uri,id:a.id}),"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(a){this.mediaUpdateTimeout&&(S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);let b=this.media();if(a){let a=b?(b.partTargetDuration||b.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=S.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},a);return}this.started?b&&!b.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(a){this.mediaUpdateTimeout&&(S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=S.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(a)},a))}start(){if(this.started=!0,"object"==typeof this.src){this.src.uri||(this.src.uri=S.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}let a={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(b,c)=>{if(!this.request)return;if(this.request=null,b)return this.error={status:c.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:c.responseText,code:2,metadata:gR({requestType:c.requestType,request:c,error:b})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:a}),this.src=ga(this.src,c),this.trigger({type:"playlistparsestart",metadata:a});let d=this.parseManifest_({manifestString:c.responseText,url:this.src});a.parsedPlaylist=g3(d.playlists,a.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:a}),this.setupInitialPlaylist(d)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(a){let b,c;if(this.state="HAVE_MAIN_MANIFEST",a.playlists){this.main=a,gP(this.main,this.srcUri()),a.playlists.forEach(a=>{a.segments=g_(a),a.segments.forEach(b=>{g$(b,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}let d=this.srcUri()||S.default.location.href;this.main=(b=gL(0,d),(c={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:S.default.location.href,resolvedUri:S.default.location.href,playlists:[{uri:d,id:b,resolvedUri:d,attributes:{}}]}).playlists[b]=c.playlists[0],c.playlists[d]=c.playlists[0],c),this.haveMetadata({playlistObject:a,url:d,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(a,b){let c=this.main,d=a.ID,e=c.playlists.length;for(;e--;){let f=c.playlists[e];if(f.attributes["PATHWAY-ID"]===d){let g=f.resolvedUri,h=f.id;if(b){let b=this.createCloneURI_(f.resolvedUri,a),g=gL(d,b),h=this.createCloneAttributes_(d,f.attributes),i=this.createClonePlaylist_(f,g,a,h);c.playlists[e]=i,c.playlists[g]=i,c.playlists[b]=i}else c.playlists.splice(e,1);delete c.playlists[h],delete c.playlists[g]}}this.updateOrDeleteCloneMedia(a,b)}updateOrDeleteCloneMedia(a,b){let c=this.main,d=a.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{if(c.mediaGroups[a]&&c.mediaGroups[a][d]){for(let b in c.mediaGroups[a])if(b===d){for(let d in c.mediaGroups[a][b])c.mediaGroups[a][b][d].playlists.forEach((a,b)=>{let d=c.playlists[a.id],e=d.id,f=d.resolvedUri;delete c.playlists[e],delete c.playlists[f]});delete c.mediaGroups[a][b]}}}),b&&this.createClonedMediaGroups_(a)}addClonePathway(a,b={}){let c=this.main,d=c.playlists.length,e=this.createCloneURI_(b.resolvedUri,a),f=gL(a.ID,e),g=this.createCloneAttributes_(a.ID,b.attributes),h=this.createClonePlaylist_(b,f,a,g);c.playlists[d]=h,c.playlists[f]=h,c.playlists[e]=h,this.createClonedMediaGroups_(a)}createClonedMediaGroups_(a){let b=a.ID,c=a["BASE-ID"],d=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{if(d.mediaGroups[e]&&!d.mediaGroups[e][b]){for(let f in d.mediaGroups[e])if(f===c)for(let c in d.mediaGroups[e][b]={},d.mediaGroups[e][f]){let g=d.mediaGroups[e][f][c];d.mediaGroups[e][b][c]=(0,W.default)({},g);let h=d.mediaGroups[e][b][c],i=this.createCloneURI_(g.resolvedUri,a);h.resolvedUri=i,h.uri=i,h.playlists=[],g.playlists.forEach((f,g)=>{let i=d.playlists[f.id],j=gM(e,b,c),k=gL(b,j);if(i&&!d.playlists[k]){let b=this.createClonePlaylist_(i,k,a),c=b.resolvedUri;d.playlists[k]=b,d.playlists[c]=b}h.playlists[g]=this.createClonePlaylist_(f,k,a)})}}})}createClonePlaylist_(a,b,c,d){let e=this.createCloneURI_(a.resolvedUri,c),f={resolvedUri:e,uri:e,id:b};return a.segments&&(f.segments=[]),d&&(f.attributes=d),gc(a,f)}createCloneURI_(a,b){let c=new URL(a);c.hostname=b["URI-REPLACEMENT"].HOST;let d=b["URI-REPLACEMENT"].PARAMS;for(let a of Object.keys(d))c.searchParams.set(a,d[a]);return c.href}createCloneAttributes_(a,b){let c={"PATHWAY-ID":a};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(d=>{b[d]&&(c[d]=a)}),c}getKeyIdSet(a){let b=new Set;if(!a||!a.contentProtection)return b;for(let c in a.contentProtection)if(a.contentProtection[c]&&a.contentProtection[c].attributes&&a.contentProtection[c].attributes.keyId){let d=a.contentProtection[c].attributes.keyId;b.add(d.toLowerCase())}return b}}let g5=function(a,b,c,d){let e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8e3))),c.headers&&(a.responseHeaders=c.headers),b&&"ETIMEDOUT"===b.code&&(a.timedout=!0),b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=Error("XHR Failed with a response of: "+(a&&(e||a.responseText)))),d(b,a)},g6=function(){let a=function a(b,c){b=gc({timeout:45e3},b);let d=a.beforeRequest||f4.Vhs.xhr.beforeRequest,e=a._requestCallbackSet||f4.Vhs.xhr._requestCallbackSet||new Set,f=a._responseCallbackSet||f4.Vhs.xhr._responseCallbackSet;d&&"function"==typeof d&&(f4.log.warn("beforeRequest is deprecated, use onRequest instead."),e.add(d));let g=!0===f4.Vhs.xhr.original?f4.xhr:f4.Vhs.xhr,h=((a,b)=>{if(!a||!a.size)return;let c=b;return a.forEach(a=>{c=a(c)}),c})(e,b);e.delete(d);let i=g(h||b,function(a,b){return f&&f.size&&f.forEach(c=>{c(i,a,b)}),g5(i,a,b,c)}),j=i.abort;return i.abort=function(){return i.aborted=!0,j.apply(i,arguments)},i.uri=b.uri,i.requestType=b.requestType,i.requestTime=Date.now(),i};return a.original=!0,a},g7=function(a){return"bytes="+a.offset+"-"+("bigint"==typeof a.offset||"bigint"==typeof a.length?S.default.BigInt(a.offset)+S.default.BigInt(a.length)-S.default.BigInt(1):a.offset+a.length-1)},g8=function(a){let b={};return a.byterange&&(b.Range=g7(a.byterange)),b},g9=function(a,b){let c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")},ha=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},hb=function(a){let b={};return Object.keys(a).forEach(c=>{let d=a[c];av(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},hc=function(a){let b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")},hd=function(a){return a.resolvedUri},he=a=>{let b=Array.prototype.slice.call(a),c="";for(let a=0;a<b.length/16;a++)c+=b.slice(16*a,16*a+16).map(g9).join("")+" "+b.slice(16*a,16*a+16).map(ha).join("")+"\n";return c};var hf=Object.freeze({__proto__:null,createTransferableMessage:hb,initSegmentId:hc,segmentKeyId:hd,hexDump:he,tagDump:({bytes:a})=>he(a),textRanges:a=>{let b,c="";for(b=0;b<a.length;b++){var d;c+=(d=b,a.start(d)+"-"+a.end(d)+" ")}return c}});let hg=({programTime:a,playlist:b,retryCount:c=2,seekTo:d,pauseAfterSeek:e=!0,tech:f,callback:g})=>{if(!g)throw Error("seekToProgramTime: callback must be provided");if(void 0===a||!b||!d)return g({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!b.endList&&!f.hasStarted_)return g({message:"player must be playing a live stream to start buffering"});if(!(a=>{if(!a.segments||0===a.segments.length)return!1;for(let b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0})(b))return g({message:"programDateTime tags must be provided in the manifest "+b.resolvedUri});let h=((a,b)=>{let c,d;try{c=new Date(a)}catch(a){return null}if(!b||!b.segments||0===b.segments.length)return null;let e=b.segments[0];if(c<new Date(e.dateTimeObject))return null;for(let a=0;a<b.segments.length-1&&(e=b.segments[a],!(c<new Date(b.segments[a+1].dateTimeObject)));a++);let f=b.segments[b.segments.length-1],g=f.dateTimeObject,h=f.videoTimingInfo?(d=f.videoTimingInfo).transmuxedPresentationEnd-d.transmuxedPresentationStart-d.transmuxerPrependedSeconds:f.duration+.25*f.duration;return c>new Date(g.getTime()+1e3*h)?null:(c>new Date(g)&&(e=f),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:gJ.duration(b,b.mediaSequence+b.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})})(a,b);if(!h)return g({message:`${a} was not found in the stream`});let i=h.segment,j=((a,b)=>{let c,d;try{c=new Date(a),d=new Date(b)}catch(a){}let e=c.getTime();return(d.getTime()-e)/1e3})(i.dateTimeObject,a);if("estimate"===h.type)return 0===c?g({message:`${a} is not buffered yet. Try again`}):(d(h.estimatedStart+j),void f.one("seeked",()=>{hg({programTime:a,playlist:b,retryCount:c-1,seekTo:d,pauseAfterSeek:e,tech:f,callback:g})}));let k=i.start+j;f.one("seeked",()=>g(null,f.currentTime())),e&&f.pause(),d(k)},hh=(a,b)=>{if(4===a.readyState)return b()},{EventTarget:hi}=f4,hj=function(a,b){if(!g0(a,b)||a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length)||!a.sidx&&b.sidx||a.sidx&&!b.sidx||a.segments&&!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(let c=0;c<a.segments.length;c++){let d=a.segments[c],e=b.segments[c];if(d.uri!==e.uri)return!1;if(!d.byterange&&!e.byterange)continue;let f=d.byterange,g=e.byterange;if(f&&!g||!f&&g||f.offset!==g.offset||f.length!==g.length)return!1}return!0},hk=(a,b,c,d)=>{let e=d.attributes.NAME||c;return`placeholder-uri-${a}-${b}-${e}`},hl=(a,b)=>(!!(!a.map&&!b.map)||!!(a.map&&b.map&&a.map.byterange.offset===b.map.byterange.offset&&a.map.byterange.length===b.map.byterange.length))&&a.uri===b.uri&&a.byterange.offset===b.byterange.offset&&a.byterange.length===b.byterange.length,hm=(a,b)=>{let c={};for(let d in a){let e=a[d].sidx;if(e){let a=aX(e);if(!b[a])break;hl(b[a].sidxInfo,e)&&(c[a]=b[a])}}return c};class hn extends hi{constructor(a,b,c={},d){super(),this.isPaused_=!0,this.mainPlaylistLoader_=d||this,d||(this.isMain_=!0);const{withCredentials:e=!1}=c;if(this.vhs_=b,this.withCredentials=e,this.addMetadataToTextTrack=c.addMetadataToTextTrack,!a)throw Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=gb("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=a,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=a}get isPaused(){return this.isPaused_}requestErrored_(a,b,c){return!this.request||((this.request=null,a)?(this.error="object"!=typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2,metadata:a.metadata}:a,c&&(this.state=c),this.trigger("error"),!0):void 0)}addSidxSegments_(a,b,c){var d,e;let f,g,h,i,j,k,l=a.sidx&&aX(a.sidx);if(!a.sidx||!l||this.mainPlaylistLoader_.sidxMapping_[l]){S.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=S.default.setTimeout(()=>c(!1),0);return}let m=ga(a.sidx.resolvedUri),n=(d,e)=>{let f;if(this.requestErrored_(d,e,b))return;let g=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=e;try{f=(0,bk.default)(aw(e.response).subarray(8))}catch(a){a.metadata=gR({requestType:h,request:e,parseFailure:!0}),this.requestErrored_(a,e,b);return}return g[l]={sidxInfo:a.sidx,sidx:f},aR(a,f,a.sidx.resolvedUri),c(!0)};this.request=(d=this.vhs_.xhr,e=(b,c,d,e)=>{if(b)return n(b,c);if(!d||"mp4"!==d)return n({status:c.status,message:`Unsupported ${d||"unknown"} container type for sidx segment at URL: ${m}`,response:"",playlist:a,internal:!0,playlistExclusionDuration:1/0,code:2},c);let{offset:f,length:g}=a.sidx.byterange;if(e.length>=g+f)return n(b,{response:e.subarray(f,f+g),status:c.status,uri:c.uri});this.request=this.vhs_.xhr({uri:m,responseType:"arraybuffer",requestType:"dash-sidx",headers:g8({byterange:a.sidx.byterange})},n)},g=[],h=!1,i=function(a,b,c,d){return b.abort(),h=!0,e(a,b,c,d)},j=function(a,b){if(h)return;if(a)return a.metadata=gR({requestType:"dash-sidx",request:b,error:a}),i(a,b,"",g);let c=b.responseText.substring(g&&g.byteLength||0,b.responseText.length);if(g=aD(g,aC(c,!0)),f=f||bn(g),g.length<10||f&&g.length<f+2)return hh(b,()=>i(a,b,"",g));let d=bG(g);return"ts"===d&&g.length<188||!d&&g.length<376?hh(b,()=>i(a,b,"",g)):i(null,b,d,g)},k=d({uri:m,beforeSend(a){a.overrideMimeType("text/plain; charset=x-user-defined"),a.addEventListener("progress",function({total:b,loaded:c}){return g5(a,null,{statusCode:a.status},j)})}},function(a,b){return g5(k,a,b,j)}))}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},S.default.clearTimeout(this.minimumUpdatePeriodTimeout_),S.default.clearTimeout(this.mediaRequest_),S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){let a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}}media(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);let b=this.state;if("string"==typeof a){if(!this.mainPlaylistLoader_.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.mainPlaylistLoader_.main.playlists[a]}let c=!this.media_||a.id!==this.media_.id;if(c&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList){this.state="HAVE_METADATA",this.media_=a,c&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}c&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,b,c=>{this.haveMetadata({startingState:b,playlist:a})}))}haveMetadata({startingState:a,playlist:b}){this.state="HAVE_METADATA",this.loadedPlaylists_[b.id]=b,S.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(b.id),"HAVE_MAIN_MANIFEST"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(S.default.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(a){this.isPaused_=!1,S.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;let b=this.media();if(a){let a=b?b.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=S.default.setTimeout(()=>this.load(),a);return}this.started?b&&!b.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){if(this.started=!0,!this.isMain_){S.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=S.default.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((a,b)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(a){let b={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:b}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(c,d)=>{if(c){let{requestType:a}=d;c.metadata=gR({requestType:a,request:d,error:c})}if(this.requestErrored_(c,d)){"HAVE_NOTHING"===this.state&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:b});let e=d.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=d.responseText,d.responseHeaders&&d.responseHeaders.date?this.mainLoaded_=Date.parse(d.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=ga(this.mainPlaylistLoader_.srcUrl,d),e){this.handleMain_(),this.syncClientServerClock_(()=>a(d,e));return}return a(d,e)})}syncClientServerClock_(a){let b=(a=>{let b=ba(a,"UTCTiming")[0];if(!b)return null;let c=be(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return c})(bj(this.mainPlaylistLoader_.mainXml_));return null===b?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),a()):"DIRECT"===b.method?(this.mainPlaylistLoader_.clientOffset_=b.value-Date.now(),a()):void(this.request=this.vhs_.xhr({uri:Y(this.mainPlaylistLoader_.srcUrl,b.value),method:b.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(c,d)=>{let e;if(this.request){if(c){let{requestType:b}=d;return this.error.metadata=gR({requestType:b,request:d,error:c}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),a()}e="HEAD"===b.method?d.responseHeaders&&d.responseHeaders.date?Date.parse(d.responseHeaders.date):this.mainLoaded_:Date.parse(d.responseText),this.mainPlaylistLoader_.clientOffset_=e-Date.now(),a()}}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){let a;S.default.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;let b=this.mainPlaylistLoader_.main,c={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:c});try{a=(({mainXml:a,srcUrl:b,clientOffset:c,sidxMapping:d,previousManifest:e})=>{let f=((a,b={})=>{let c=((a,b={})=>{let{manifestUri:c="",NOW:d=Date.now(),clientOffset:e=0,eventHandler:f=function(){}}=b,g=ba(a,"Period");if(!g.length)throw Error("INVALID_NUMBER_OF_PERIOD");let h=ba(a,"Location"),i=be(a),j=bg([{baseUrl:c}],ba(a,"BaseURL")),k=ba(a,"ContentSteering");i.type=i.type||"static",i.sourceDuration=i.mediaPresentationDuration||0,i.NOW=d,i.clientOffset=e,h.length&&(i.locations=h.map(bb));let l=[];return g.forEach((a,b)=>{let c=be(a),d=l[b-1];c.start=(({attributes:a,priorPeriodAttributes:b,mpdType:c})=>"number"==typeof a.start?a.start:b&&"number"==typeof b.start&&"number"==typeof b.duration?b.start+b.duration:b||"static"!==c?null:0)({attributes:c,priorPeriodAttributes:d?d.attributes:null,mpdType:i.type}),l.push({node:a,attributes:c})}),{locations:i.locations,contentSteeringInfo:((a,b)=>{if(a.length>1&&b({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!a.length)return null;let c=aI({serverURL:bb(a[0])},be(a[0]));return c.queryBeforeStart="true"===c.queryBeforeStart,c})(k,f),representationInfo:aK(l.map((a,b)=>{let c=bg(j,ba(a.node,"BaseURL")),d=aI(i,{periodStart:a.attributes.start});"number"==typeof a.attributes.duration&&(d.periodDuration=a.attributes.duration);let e=ba(a.node,"AdaptationSet"),f=bh(a.node);return aK(e.map(a=>{var b;let e,g=be(a),h=bg(c,ba(a,"BaseURL")),i=aI(d,g,{role:be(ba(a,"Role")[0])}),j="urn:scte:dash:cc:cea-608:2015"===(b=be(ba(a,"Accessibility")[0])).schemeIdUri?("string"!=typeof b.value?[]:b.value.split(";")).map(a=>{let b,c;return c=a,/^CC\d=/.test(a)?[b,c]=a.split("="):/^CC\d$/.test(a)&&(b=a),{channel:b,language:c}}):"urn:scte:dash:cc:cea-708:2015"===b.schemeIdUri?("string"!=typeof b.value?[]:b.value.split(";")).map(a=>{let b={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){let[c,d=""]=a.split("=");b.channel=c,b.language=a,d.split(",").forEach(a=>{let[c,d]=a.split(":");"lang"===c?b.language=d:"er"===c?b.easyReader=Number(d):"war"===c?b.aspectRatio=Number(d):"3D"===c&&(b["3D"]=Number(d))})}else b.language=a;return b.channel&&(b.channel="SERVICE"+b.channel),b}):void 0;j&&(i=aI(i,{captionServices:j}));let k=ba(a,"Label")[0];k&&k.childNodes.length&&(i=aI(i,{label:k.childNodes[0].nodeValue.trim()}));let l=ba(a,"ContentProtection").reduce((a,b)=>{let c=be(b);c.schemeIdUri&&(c.schemeIdUri=c.schemeIdUri.toLowerCase());let d=bf[c.schemeIdUri];if(d){a[d]={attributes:c};let e=ba(b,"cenc:pssh")[0];if(e){let b=bb(e);a[d].pssh=b&&$(b)}}return a},{});Object.keys(l).length&&(i=aI(i,{contentProtection:l}));let m=bh(a),n=ba(a,"Representation"),o=aI(f,m);return aK(n.map((e=i,a=>{let b=bg(h,ba(a,"BaseURL")),c=aI(e,be(a)),d=bh(a);return b.map(a=>({segmentInfo:aI(o,d),attributes:aI(c,a)}))})))}))})),eventStream:aK(l.map(bi))}})(bj(a),b);return(({dashPlaylists:a,locations:b,contentSteering:c,sidxMapping:d={},previousManifest:e,eventStream:f})=>{var g;if(!a.length)return{};let{sourceDuration:h,type:i,suggestedPresentationDelay:j,minimumUpdatePeriod:k}=a[0].attributes,l=aY(a.filter(a_)).map(a$),m=aY(a.filter(a0)),n=aY(a.filter(a1)),o=a.map(a=>a.attributes.captionServices).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:h,playlists:((a,b={})=>{if(!Object.keys(b).length)return a;for(let c in a)a[c]=aZ(a[c],b);return a})(l,d)};k>=0&&(p.minimumUpdatePeriod=1e3*k),b&&(p.locations=b),c&&(p.contentSteering=c),"dynamic"===i&&(p.suggestedPresentationDelay=j),f&&f.length>0&&(p.eventStream=f);let q=0===p.playlists.length,r=m.length?((a,b={},c=!1)=>{let d,e=a.reduce((a,e)=>{let f=e.attributes.role&&e.attributes.role.value||"",g=e.attributes.lang||"",h=e.attributes.label||"main";if(g&&!e.attributes.label){let a=f?` (${f})`:"";h=`${e.attributes.lang}${a}`}a[h]||(a[h]={language:g,autoselect:!0,default:"main"===f,playlists:[],uri:""});let i=aZ((({attributes:a,segments:b,sidx:c,mediaSequence:d,discontinuitySequence:e,discontinuityStarts:f},g)=>{let h={attributes:{NAME:a.id,BANDWIDTH:a.bandwidth,CODECS:a.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===a.type,timeline:a.periodStart,resolvedUri:a.baseUrl||"",targetDuration:a.duration,discontinuitySequence:e,discontinuityStarts:f,timelineStarts:a.timelineStarts,mediaSequence:d,segments:b};return a.contentProtection&&(h.contentProtection=a.contentProtection),a.serviceLocation&&(h.attributes.serviceLocation=a.serviceLocation),c&&(h.sidx=c),g&&(h.attributes.AUDIO="audio",h.attributes.SUBTITLES="subs"),h})(e,c),b);return a[h].playlists.push(i),void 0===d&&"main"===f&&((d=e).default=!0),a},{});if(!d){let a=Object.keys(e)[0];e[a].default=!0}return e})(m,d,q):null,s=n.length?((a,b={})=>a.reduce((a,c)=>{let d=c.attributes.label||c.attributes.lang||"text",e=c.attributes.lang||"und";return a[d]||(a[d]={language:e,default:!1,autoselect:!1,playlists:[],uri:""}),a[d].playlists.push(aZ((({attributes:a,segments:b,mediaSequence:c,discontinuityStarts:d,discontinuitySequence:e})=>{void 0===b&&(b=[{uri:a.baseUrl,timeline:a.periodStart,resolvedUri:a.baseUrl||"",duration:a.sourceDuration,number:0}],a.duration=a.sourceDuration);let f={NAME:a.id,BANDWIDTH:a.bandwidth,"PROGRAM-ID":1};a.codecs&&(f.CODECS=a.codecs);let g={attributes:f,uri:"",endList:"static"===a.type,timeline:a.periodStart,resolvedUri:a.baseUrl||"",targetDuration:a.duration,timelineStarts:a.timelineStarts,discontinuityStarts:d,discontinuitySequence:e,mediaSequence:c,segments:b};return a.serviceLocation&&(g.attributes.serviceLocation=a.serviceLocation),g})(c),b)),a},{}))(n,d):null,t=l.concat(a2(r),a2(s));return p.timelineStarts=aU(t.map(({timelineStarts:a})=>a)),g=p.timelineStarts,t.forEach(a=>{a.mediaSequence=0,a.discontinuitySequence=g.findIndex(function({timeline:b}){return b===a.timeline}),a.segments&&a.segments.forEach((a,b)=>{a.number=b})}),r&&(p.mediaGroups.AUDIO.audio=r),s&&(p.mediaGroups.SUBTITLES.subs=s),(o.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=o.reduce((a,b)=>(b&&b.forEach(b=>{let{channel:c,language:d}=b;a[d]={autoselect:!1,default:!1,instreamId:c,language:d},b.hasOwnProperty("aspectRatio")&&(a[d].aspectRatio=b.aspectRatio),b.hasOwnProperty("easyReader")&&(a[d].easyReader=b.easyReader),b.hasOwnProperty("3D")&&(a[d]["3D"]=b["3D"])}),a),{})),e)?(({oldManifest:a,newManifest:b})=>{let c=a.playlists.concat(aV(a)),d=b.playlists.concat(aV(b));return b.timelineStarts=aU([a.timelineStarts,b.timelineStarts]),(({oldPlaylists:a,newPlaylists:b,timelineStarts:c})=>{b.forEach(b=>{b.discontinuitySequence=c.findIndex(function({timeline:a}){return a===b.timeline});let d=((a,b)=>{for(let c=0;c<a.length;c++)if(a[c].attributes.NAME===b)return a[c];return null})(a,b.attributes.NAME);if(!d||b.sidx)return;let e=b.segments[0],f=d.segments.findIndex(function(a){return Math.abs(a.presentationTime-e.presentationTime)<aT});if(-1===f){aW({playlist:b,mediaSequence:d.mediaSequence+d.segments.length}),b.segments[0].discontinuity=!0,b.discontinuityStarts.unshift(0),(!d.segments.length&&b.timeline>d.timeline||d.segments.length&&b.timeline>d.segments[d.segments.length-1].timeline)&&b.discontinuitySequence--;return}d.segments[f].discontinuity&&!e.discontinuity&&(e.discontinuity=!0,b.discontinuityStarts.unshift(0),b.discontinuitySequence--),aW({playlist:b,mediaSequence:d.segments[f].number})})})({oldPlaylists:c,newPlaylists:d,timelineStarts:b.timelineStarts}),b})({oldManifest:e,newManifest:p}):p})({dashPlaylists:c.representationInfo.map(a9),locations:c.locations,contentSteering:c.contentSteeringInfo,sidxMapping:b.sidxMapping,previousManifest:b.previousManifest,eventStream:c.eventStream})})(a,{manifestUri:b,clientOffset:c,sidxMapping:d,previousManifest:e});return gP(f,b,hk),f})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:b})}catch(a){this.error=a,this.error.metadata={errorType:f4.Error.StreamingDashManifestParserError,error:a},this.trigger("error")}b&&(a=((a,b,c)=>{var d;let e=!0,f=gc(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod,timelineStarts:b.timelineStarts});for(let a=0;a<b.playlists.length;a++){let d=b.playlists[a];if(d.sidx){let a=aX(d.sidx);c&&c[a]&&c[a].sidx&&aR(d,c[a].sidx,d.sidx.resolvedUri)}let g=g1(f,d,hj);g&&(f=g,e=!1)}return(gN(b,(a,b,c,d)=>{if(a.playlists&&a.playlists.length){let g=a.playlists[0].id,h=g1(f,a.playlists[0],hj);h&&(d in(f=h).mediaGroups[b][c]||(f.mediaGroups[b][c][d]=a),f.mediaGroups[b][c][d].playlists[0]=f.playlists[g],e=!1)}}),gN(d=f,(a,c,e,f)=>{b.mediaGroups[c][e]&&f in b.mediaGroups[c][e]||delete d.mediaGroups[c][e][f]}),b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(e=!1),e)?null:f})(b,a,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=a||b;let d=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(d&&d!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=d),(!b||a&&a.minimumUpdatePeriod!==b.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(a),a){let{duration:b,endList:d}=a,e=[];a.playlists.forEach(a=>{e.push({id:a.id,bandwidth:a.attributes.BANDWIDTH,resolution:a.attributes.RESOLUTION,codecs:a.attributes.CODECS})}),c.parsedManifest={duration:b,isLive:!d,renditions:e},this.trigger({type:"manifestparsecomplete",metadata:c})}return!!a}updateMinimumUpdatePeriodTimeout_(){let a=this.mainPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null),a.minimumUpdatePeriodTimeout_&&(S.default.clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);let b=a.main&&a.main.minimumUpdatePeriod;if(0===b&&(a.media()?b=1e3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_))),"number"!=typeof b||b<=0){b<0&&this.logger_(`found invalid minimumUpdatePeriod of ${b}, not setting a timeout`);return}this.createMUPTimeout_(b)}createMUPTimeout_(a){let b=this.mainPlaylistLoader_;b.minimumUpdatePeriodTimeout_=S.default.setTimeout(()=>{b.minimumUpdatePeriodTimeout_=null,b.trigger("minimumUpdatePeriod"),b.createMUPTimeout_(a)},a)}refreshXml_(){this.requestMain_((a,b)=>{if(b){var c,d;let a;this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=(c=this.mainPlaylistLoader_.main,d=this.mainPlaylistLoader_.sidxMapping_,a=hm(c.playlists,d),gN(c,(b,c,e,f)=>{if(b.playlists&&b.playlists.length){let c=b.playlists;a=gc(a,hm(c,d))}}),a),this.addSidxSegments_(this.media(),this.state,a=>{this.refreshMedia_(this.media().id)})}})}refreshMedia_(a){if(!a)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();let b=this.mainPlaylistLoader_.main.playlists,c=!this.media_||this.media_!==b[a];if(c?this.media_=b[a]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let a=()=>{this.media().endList||(this.mediaUpdateTimeout=S.default.setTimeout(()=>{this.trigger("mediaupdatetimeout"),a()},g2(this.media(),!!c)))};a()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(a){if(a&&this.mainPlaylistLoader_.main.eventStream){let a=this.mainPlaylistLoader_.main.eventStream.map(a=>({cueTime:a.start,frames:[{data:a.messageData}]}));this.addMetadataToTextTrack("EventStream",a,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(a){if(a.contentProtection){let b=new Set;for(let c in a.contentProtection){let d=a.contentProtection[c].attributes["cenc:default_KID"];d&&b.add(d.replace(/-/g,"").toLowerCase())}return b}}}var ho={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};let hp=function(a){return a.on=a.addEventListener,a.off=a.removeEventListener,a},hq=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(c){let b=new BlobBuilder;return b.append(a),URL.createObjectURL(b.getBlob())}},hr=function(a){return function(){let b=hq(a),c=hp(new Worker(b));c.objURL=b;let d=c.terminate;return c.on=c.addEventListener,c.off=c.removeEventListener,c.terminate=function(){return URL.revokeObjectURL(b),d.call(this)},c}},hs=function(a){return`var browserWorkerPolyFill = ${hp.toString()};
browserWorkerPolyFill(self);
`+a},ht=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)};var hu=hr(hs(ht(function(){var b,c="undefined"!=typeof globalThis?globalThis:a.g,d=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2==arguments.length)for(d=0,e=c.length;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(d=0,e=c.length;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};d.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},d.prototype.push=function(a){this.trigger("data",a)},d.prototype.flush=function(a){this.trigger("done",a)},d.prototype.partialFlush=function(a){this.trigger("partialdone",a)},d.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},d.prototype.reset=function(a){this.trigger("reset",a)};var e=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength);return c.getBigUint64?(b=c.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(b):b:0x100000000*c.getUint32(0)+c.getUint32(4)},f=0x100000000,g=f;if(a1={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(aI in a1)a1.hasOwnProperty(aI)&&(a1[aI]=[aI.charCodeAt(0),aI.charCodeAt(1),aI.charCodeAt(2),aI.charCodeAt(3)]);a2=new Uint8Array([105,115,111,109]),a4=new Uint8Array([97,118,99,49]),a3=new Uint8Array([0,0,0,1]),a5={video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])},a8=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a7=new Uint8Array([0,0,0,0,0,0,0,0]),ba=a9=new Uint8Array([0,0,0,0,0,0,0,0]),bb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),bc=a9,a6=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}aO=function(a){var b,c,d=[],e=0;for(b=1;b<arguments.length;b++)d.push(arguments[b]);for(b=d.length;b--;)e+=d[b].byteLength;for(new DataView((c=new Uint8Array(e+8)).buffer,c.byteOffset,c.byteLength).setUint32(0,c.byteLength),c.set(a,4),b=0,e=8;b<d.length;b++)c.set(d[b],e),e+=d[b].byteLength;return c};aW=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=255&a.samplerate),aO(a1.mdhd,b)},aV=function(a){var b;return aO(a1.mdia,aW(a),(b=a.type,aO(a1.hdlr,a5[b])),aP(a))},aP=function(a){return aO(a1.minf,"video"===a.type?aO(a1.vmhd,a6):aO(a1.smhd,a7),aO(a1.dinf,aO(a1.dref,a8)),aY(a))},aQ=function(a){for(var b=a.length,c=[];b--;)c[b]=aT(a[b]);return aO.apply(null,[a1.moov,aS(0xffffffff)].concat(c).concat(aR(a)))},aR=function(a){for(var b=a.length,c=[];b--;)c[b]=a_(a[b]);return aO.apply(null,[a1.mvex].concat(c))},aS=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return aO(a1.mvhd,b)},aX=function(a){var b,c,d=a.samples||[],e=new Uint8Array(4+d.length);for(c=0;c<d.length;c++)b=d[c].flags,e[c+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return aO(a1.sdtp,e)},aY=function(a){return aO(a1.stbl,aZ(a),aO(a1.stts,bc),aO(a1.stsc,ba),aO(a1.stsz,bb),aO(a1.stco,a9))},aZ=function(a){return aO(a1.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===a.type?aJ(a):aK(a))},aJ=function(a){var b,c,d=a.sps||[],e=a.pps||[],f=[],g=[];for(b=0;b<d.length;b++)f.push((65280&d[b].byteLength)>>>8),f.push(255&d[b].byteLength),f=f.concat(Array.prototype.slice.call(d[b]));for(b=0;b<e.length;b++)g.push((65280&e[b].byteLength)>>>8),g.push(255&e[b].byteLength),g=g.concat(Array.prototype.slice.call(e[b]));if(c=[a1.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),aO(a1.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([d.length],f,[e.length],g))),aO(a1.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var h=a.sarRatio[0],i=a.sarRatio[1];c.push(aO(a1.pasp,new Uint8Array([(0xff000000&h)>>24,(0xff0000&h)>>16,(65280&h)>>8,255&h,(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i])))}return aO.apply(null,c)},aK=function(a){return aO(a1.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),aO(a1.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2])))},aU=function(a){var b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(0xff000000&a.id)>>24,(0xff0000&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(0xff000000&a.duration)>>24,(0xff0000&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return aO(a1.tkhd,b)},a$=function(a){var b,c,d,e,f,h;return(b=aO(a1.tfhd,new Uint8Array([0,0,0,58,(0xff000000&a.id)>>24,(0xff0000&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),f=Math.floor(a.baseMediaDecodeTime/g),h=Math.floor(a.baseMediaDecodeTime%g),c=aO(a1.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,255&f,h>>>24&255,h>>>16&255,h>>>8&255,255&h])),"audio"===a.type)?(d=a0(a,92),aO(a1.traf,b,c,d)):(e=aX(a),d=a0(a,e.length+92),aO(a1.traf,b,c,d,e))},aT=function(a){return a.duration=a.duration||0xffffffff,aO(a1.trak,aU(a),aV(a))},a_=function(a){var b=new Uint8Array([0,0,0,0,(0xff000000&a.id)>>24,(0xff0000&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),aO(a1.trex,b)},aN=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(0xff000000&a.length)>>>24,(0xff0000&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(0xff000000&b)>>>24,(0xff0000&b)>>>16,(65280&b)>>>8,255&b]},aM=function(a,b){var c,d,e,f,g,h;for(b+=20+16*(f=a.samples||[]).length,(d=new Uint8Array((e=aN(f,b)).length+16*f.length)).set(e),c=e.length,h=0;h<f.length;h++)g=f[h],d[c++]=(0xff000000&g.duration)>>>24,d[c++]=(0xff0000&g.duration)>>>16,d[c++]=(65280&g.duration)>>>8,d[c++]=255&g.duration,d[c++]=(0xff000000&g.size)>>>24,d[c++]=(0xff0000&g.size)>>>16,d[c++]=(65280&g.size)>>>8,d[c++]=255&g.size,d[c++]=g.flags.isLeading<<2|g.flags.dependsOn,d[c++]=g.flags.isDependedOn<<6|g.flags.hasRedundancy<<4|g.flags.paddingValue<<1|g.flags.isNonSyncSample,d[c++]=61440&g.flags.degradationPriority,d[c++]=15&g.flags.degradationPriority,d[c++]=(0xff000000&g.compositionTimeOffset)>>>24,d[c++]=(0xff0000&g.compositionTimeOffset)>>>16,d[c++]=(65280&g.compositionTimeOffset)>>>8,d[c++]=255&g.compositionTimeOffset;return aO(a1.trun,d)},aL=function(a,b){var c,d,e,f,g,h;for(b+=20+8*(f=a.samples||[]).length,(c=new Uint8Array((e=aN(f,b)).length+8*f.length)).set(e),d=e.length,h=0;h<f.length;h++)g=f[h],c[d++]=(0xff000000&g.duration)>>>24,c[d++]=(0xff0000&g.duration)>>>16,c[d++]=(65280&g.duration)>>>8,c[d++]=255&g.duration,c[d++]=(0xff000000&g.size)>>>24,c[d++]=(0xff0000&g.size)>>>16,c[d++]=(65280&g.size)>>>8,c[d++]=255&g.size;return aO(a1.trun,c)},a0=function(a,b){return"audio"===a.type?aL(a,b):aM(a,b)};var h=function(a,b){var c={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},i=[33,16,5,32,164,27],j=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],k=function(a){for(var b=[];a--;)b.push(0);return b};be=function(a){return 9e4*a},bf=function(a,b){return a*b},bg=function(a){return a/9e4},bh=function(a,b){return a/b};var l=9e4,m=be,n=bg,o=function(a,b){return be(bh(a,b))},p=function(a,b){return bf(bg(a),b)},q=function(a,b,c){return bg(c?a:a-b)},r=function(){if(!bd){var a;bd=Object.keys(a={96e3:[i,[227,64],k(154),[56]],88200:[i,[231],k(170),[56]],64e3:[i,[248,192],k(240),[56]],48e3:[i,[255,192],k(268),[55,148,128],k(54),[112]],44100:[i,[255,192],k(268),[55,163,128],k(84),[112]],32e3:[i,[255,192],k(268),[55,234],k(226),[112]],24e3:[i,[255,192],k(268),[55,255,128],k(268),[111,112],k(126),[224]],16e3:[i,[255,192],k(268),[55,255,128],k(268),[111,255],k(269),[223,108],k(195),[1,192]],12e3:[j,k(268),[3,127,248],k(268),[6,255,240],k(268),[13,255,224],k(268),[27,253,128],k(259),[56]],11025:[j,k(268),[3,127,248],k(268),[6,255,240],k(268),[13,255,224],k(268),[27,255,192],k(268),[55,175,128],k(108),[112]],8e3:[j,k(268),[3,121,16],k(47),[7]]}).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})}return bd},s=function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].data.byteLength;return c},t=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&4===d){if("GA94"===String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6])){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}c.payload=void 0}b+=e,d=0,e=0}return c},u=function(a){return 181!==a.payload[0]||(a.payload[1]<<8|a.payload[2])!=49||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},v=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(c=0,d=31&b[0];c<d;c++)f={type:3&b[(e=3*c)+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},w=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;c=new Uint8Array(b=d-e.length);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},x=4,y=function(a){a=a||{},y.prototype.init.call(this),this.parse708captions_="boolean"!=typeof a.parse708captions||a.parse708captions,this.captionPackets_=[],this.ccStreams_=[new J(0,0),new J(0,1),new J(1,0),new J(1,1)],this.parse708captions_&&(this.cc708Stream_=new E({captionServices:a.captionServices})),this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};y.prototype=new d,y.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=t(a.escapedRBSP)).payload&&b.payloadType===x&&(c=u(b))){if(a.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}d=v(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},y.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},y.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),this.captionPackets_.length=0),this.flushCCStreams(a)},y.prototype.flush=function(){return this.flushStream("flush")},y.prototype.partialFlush=function(){return this.flushStream("partialFlush")},y.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},y.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},y.prototype.setsChannel1Active=function(a){return(30720&a.ccData)==4096},y.prototype.setsChannel2Active=function(a){return(30720&a.ccData)==6144},y.prototype.setsTextOrXDSActive=function(a){return(28928&a.ccData)==256||(30974&a.ccData)==4138||(30974&a.ccData)==6186},y.prototype.dispatchCea708Packet=function(a){this.parse708captions_&&this.cc708Stream_.push(a)};var z={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},A=function(a){var b=z[a]||a;return 4096&a&&a===b?"":String.fromCharCode(b)},B=function(a){return 32<=a&&a<=127||160<=a&&a<=255},C=function(a){this.windowNum=a,this.reset()};C.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},C.prototype.getText=function(){return this.rows.join("\n")},C.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},C.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(a),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},C.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},C.prototype.addText=function(a){this.rows[this.rowIdx]+=a},C.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}};var D=function(a,b,c){this.serviceNum=a,this.text="",this.currentWindow=new C(-1),this.windows=[],this.stream=c,"string"==typeof b&&this.createTextDecoder(b)};D.prototype.init=function(a,b){this.startPts=a;for(var c=0;c<8;c++)this.windows[c]=new C(c),"function"==typeof b&&(this.windows[c].beforeRowOverflow=b)},D.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]},D.prototype.createTextDecoder=function(a){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(a)}catch(b){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+a+" encoding. "+b})}};var E=function(a){a=a||{},E.prototype.init.call(this);var b,c=this,d=a.captionServices||{},e={};Object.keys(d).forEach(a=>{b=d[a],/^SERVICE/.test(a)&&(e[a]=b.encoding)}),this.serviceEncodings=e,this.current708Packet=null,this.services={},this.push=function(a){3===a.type?c.new708Packet():null===c.current708Packet&&c.new708Packet(),c.add708Bytes(a)}};E.prototype=new d,E.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},E.prototype.add708Bytes=function(a){var b=a.ccData;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(b>>>8),this.current708Packet.data.push(255&b)},E.prototype.push708Packet=function(){var a=this.current708Packet,b=a.data,c=null,d=null,e=0,f=b[e++];for(a.seq=f>>6,a.sizeCode=63&f;e<b.length;e++)c=(f=b[e++])>>5,d=31&f,7===c&&d>0&&(c=f=b[e++]),this.pushServiceBlock(c,e,d),d>0&&(e+=d-1)},E.prototype.pushServiceBlock=function(a,b,c){var d,e=b,f=this.current708Packet.data,g=this.services[a];for(g||(g=this.initService(a,e));e<b+c&&e<f.length;e++)B(d=f[e])?e=this.handleText(e,g):24===d?e=this.multiByteCharacter(e,g):16===d?e=this.extendedCommands(e,g):128<=d&&d<=135?e=this.setCurrentWindow(e,g):152<=d&&d<=159?e=this.defineWindow(e,g):136===d?e=this.clearWindows(e,g):140===d?e=this.deleteWindows(e,g):137===d?e=this.displayWindows(e,g):138===d?e=this.hideWindows(e,g):139===d?e=this.toggleWindows(e,g):151===d?e=this.setWindowAttributes(e,g):144===d?e=this.setPenAttributes(e,g):145===d?e=this.setPenColor(e,g):146===d?e=this.setPenLocation(e,g):143===d?g=this.reset(e,g):8===d?g.currentWindow.backspace():12===d?g.currentWindow.clearText():13===d?g.currentWindow.pendingNewLine=!0:14===d?g.currentWindow.clearText():141===d&&e++},E.prototype.extendedCommands=function(a,b){return B(this.current708Packet.data[++a])&&(a=this.handleText(a,b,{isExtended:!0})),a},E.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},E.prototype.initService=function(a,b){var c,d="SERVICE"+a,e=this;return d in this.serviceEncodings&&(c=this.serviceEncodings[d]),this.services[a]=new D(a,c,e),this.services[a].init(this.getPts(b),function(b){e.flushDisplayed(b,e.services[a])}),this.services[a]},E.prototype.handleText=function(a,b,c){var d,e,f=c&&c.isExtended,g=c&&c.isMultiByte,h=this.current708Packet.data,i=h[a],j=h[a+1],k=b.currentWindow;return g?(e=[i,j],a++):e=[i],d=b.textDecoder_&&!f?b.textDecoder_.decode(new Uint8Array(e)):g?String.fromCharCode(parseInt(e.map(a=>("0"+(255&a).toString(16)).slice(-2)).join(""),16)):A(4096*!!f|i),k.pendingNewLine&&!k.isEmpty()&&k.newLine(this.getPts(a)),k.pendingNewLine=!1,k.addText(d),a},E.prototype.multiByteCharacter=function(a,b){var c=this.current708Packet.data,d=c[a+1],e=c[a+2];return B(d)&&B(e)&&(a=this.handleText(++a,b,{isMultiByte:!0})),a},E.prototype.setCurrentWindow=function(a,b){var c=this.current708Packet.data[a];return b.setCurrentWindow(7&c),a},E.prototype.defineWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;b.setCurrentWindow(e);var f=b.currentWindow;return f.visible=(32&(d=c[++a]))>>5,f.rowLock=(16&d)>>4,f.columnLock=(8&d)>>3,f.priority=7&d,f.relativePositioning=(128&(d=c[++a]))>>7,f.anchorVertical=127&d,f.anchorHorizontal=d=c[++a],f.anchorPoint=(240&(d=c[++a]))>>4,f.rowCount=15&d,f.columnCount=63&(d=c[++a]),f.windowStyle=(56&(d=c[++a]))>>3,f.penStyle=7&d,f.virtualRowCount=f.rowCount+1,a},E.prototype.setWindowAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.winAttr;return e.fillOpacity=(192&(d=c[++a]))>>6,e.fillRed=(48&d)>>4,e.fillGreen=(12&d)>>2,e.fillBlue=3&d,e.borderType=(192&(d=c[++a]))>>6,e.borderRed=(48&d)>>4,e.borderGreen=(12&d)>>2,e.borderBlue=3&d,d=c[++a],e.borderType+=(128&d)>>5,e.wordWrap=(64&d)>>6,e.printDirection=(48&d)>>4,e.scrollDirection=(12&d)>>2,e.justify=3&d,e.effectSpeed=(240&(d=c[++a]))>>4,e.effectDirection=(12&d)>>2,e.displayEffect=3&d,a},E.prototype.flushDisplayed=function(a,b){for(var c=[],d=0;d<8;d++)b.windows[d].visible&&!b.windows[d].isEmpty()&&c.push(b.windows[d].getText());b.endPts=a,b.text=c.join("\n\n"),this.pushCaption(b),b.startPts=a},E.prototype.pushCaption=function(a){""!==a.text&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts)},E.prototype.displayWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=1);return a},E.prototype.hideWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible=0);return a},E.prototype.toggleWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&(b.windows[e].visible^=1);return a},E.prototype.clearWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].clearText();return a},E.prototype.deleteWindows=function(a,b){var c=this.current708Packet.data[++a],d=this.getPts(a);this.flushDisplayed(d,b);for(var e=0;e<8;e++)c&1<<e&&b.windows[e].reset();return a},E.prototype.setPenAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penAttr;return e.textTag=(240&(d=c[++a]))>>4,e.offset=(12&d)>>2,e.penSize=3&d,e.italics=(128&(d=c[++a]))>>7,e.underline=(64&d)>>6,e.edgeType=(56&d)>>3,e.fontStyle=7&d,a},E.prototype.setPenColor=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penColor;return e.fgOpacity=(192&(d=c[++a]))>>6,e.fgRed=(48&d)>>4,e.fgGreen=(12&d)>>2,e.fgBlue=3&d,e.bgOpacity=(192&(d=c[++a]))>>6,e.bgRed=(48&d)>>4,e.bgGreen=(12&d)>>2,e.bgBlue=3&d,e.edgeRed=(48&(d=c[++a]))>>4,e.edgeGreen=(12&d)>>2,e.edgeBlue=3&d,a},E.prototype.setPenLocation=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,e.row=15&c[++a],e.column=63&c[++a],a},E.prototype.reset=function(a,b){var c=this.getPts(a);return this.flushDisplayed(c,b),this.initService(b.serviceNum,a)};var F={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},G=function(a){return null===a?"":String.fromCharCode(a=F[a]||a)},H=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],I=function(){for(var a=[],b=15;b--;)a.push({text:"",indent:0,offset:0});return a},J=function(a,b){J.prototype.init.call(this),this.field_=a||0,this.dataChannel_=b||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if((b=32639&a.ccData)===this.lastControlCode_){this.lastControlCode_=null;return}if((61440&b)==4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=I();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=I();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=I()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))f=G((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),f=G((d=(3&d)<<8)|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,(14&e)==14&&this.addFormatting(a.pts,["i"]),(1&e)==1&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e)){let a=3&e;this.nonDisplayed_[this.row_].offset=a,this.column_+=a}else if(this.isPAC(d,e)){var g=H.indexOf(7968&b);if("rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&g>=0&&g<=14&&(this.clearFormatting(a.pts),this.row_=g),1&e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),(16&b)==16){let a=(14&b)>>1;this.column_=4*a,this.nonDisplayed_[this.row_].indent+=a}this.isColorPAC(e)&&(14&e)==14&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=G(d)+G(e),this[this.mode_](a.pts,f),this.column_+=f.length)}};J.prototype=new d,J.prototype.flushDisplayed=function(a){let b=a=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+a+"."})},c=[];this.displayed_.forEach((a,d)=>{if(a&&a.text&&a.text.length){try{a.text=a.text.trim()}catch(a){b(d)}a.text.length&&c.push({text:a.text,line:d+1,position:10+Math.min(70,10*a.indent)+2.5*a.offset})}else null==a&&b(d)}),c.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,content:c,stream:this.name_})},J.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=I(),this.nonDisplayed_=I(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},J.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},J.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},J.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},J.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},J.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},J.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},J.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},J.prototype.isNormalChar=function(a){return a>=32&&a<=127},J.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=I(),this.displayed_=I()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]={text:"",indent:0,offset:0};void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},J.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},J.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},J.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_].text;c+=b,this.nonDisplayed_[this.row_].text=c},J.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_].text;c+=b,this.displayed_[this.row_].text=c},J.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]={text:"",indent:0,offset:0};for(a=this.row_+1;a<15;a++)this.displayed_[a]={text:"",indent:0,offset:0};for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},J.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_].text;c+=b,this.displayed_[this.row_].text=c};var K=y,L=J,M=E,N={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},O="shared",P=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>0x100000000;)a+=0x200000000*c;return a},Q=function(a){var b,c;Q.prototype.init.call(this),this.type_=a||O,this.push=function(a){"metadata"===a.type?this.trigger("data",a):(this.type_===O||a.type===this.type_)&&(void 0===c&&(c=a.dts),a.dts=P(a.dts,c),a.pts=P(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){c=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Q.prototype=new d;var R=(a,b,c)=>{if(!a)return -1;for(var d=c;d<a.length;d++)if(a[d]===b)return d;return -1},S=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},T=function(a,b,c){return decodeURIComponent(S(a,b,c))},U=function(a,b,c){return unescape(S(a,b,c))},V=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},W={APIC:function(a){var b,c,d=1;3!==a.data[0]||(b=R(a.data,0,d))<0||(a.mimeType=U(a.data,d,b),d=b+1,a.pictureType=a.data[d],d++,(c=R(a.data,0,d))<0||(a.description=T(a.data,d,c),d=c+1,"-->"===a.mimeType?a.url=U(a.data,d,a.data.length):a.pictureData=a.data.subarray(d,a.data.length)))},"T*":function(a){3===a.data[0]&&(a.value=T(a.data,1,a.data.length).replace(/\0*$/,""),a.values=a.value.split("\0"))},TXXX:function(a){var b;3!==a.data[0]||-1!==(b=R(a.data,0,1))&&(a.description=T(a.data,1,b),a.value=T(a.data,b+1,a.data.length).replace(/\0*$/,""),a.data=a.value)},"W*":function(a){a.url=U(a.data,0,a.data.length).replace(/\0.*$/,"")},WXXX:function(a){var b;3!==a.data[0]||-1!==(b=R(a.data,0,1))&&(a.description=T(a.data,1,b),a.url=U(a.data,b+1,a.data.length).replace(/\0.*$/,""))},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=U(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}},X=function(a){var b,c=10,d=0,e=[];if(!(a.length<10)&&73===a[0]&&68===a[1]&&51===a[2]){d=V(a.subarray(6,10))+10,64&a[5]&&(c+=4,c+=V(a.subarray(10,14)),d-=V(a.subarray(16,20)));do{if((b=V(a.subarray(c+4,c+8)))<1)break;var f={id:String.fromCharCode(a[c],a[c+1],a[c+2],a[c+3]),data:a.subarray(c+10,c+b+10)};f.key=f.id,W[f.id]?W[f.id](f):"T"===f.id[0]?W["T*"](f):"W"===f.id[0]&&W["W*"](f),e.push(f),c+=10,c+=b}while(c<d)return e}},Y=V,Z=W;(bi=function(a){var b,c={descriptor:a&&a.descriptor},d=0,e=[],f=0;if(bi.prototype.init.call(this),this.dispatchType=N.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,g,h,i;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=Y(a.data.subarray(6,10))+10),!(f<d)){for(i=0,b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts};i<d;)b.data.set(e[0].data.subarray(0,d-i),i),i+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();c=10,64&b.data[5]&&(c+=4,c+=Y(b.data.subarray(10,14)),d-=Y(b.data.subarray(16,20)));do{if((g=Y(b.data.subarray(c+4,c+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((h={id:String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),data:b.data.subarray(c+10,c+g+10)}).key=h.id,Z[h.id]?Z[h.id](h):"T"===h.id[0]?Z["T*"](h):"W"===h.id[0]&&Z["W*"](h),"com.apple.streaming.transportStreamTimestamp"===h.owner){var j=h.data,k=(1&j[3])<<30|j[4]<<22|j[5]<<14|j[6]<<6|j[7]>>>2;k*=4,h.timeStamp=k+=3&j[7],void 0===b.pts&&void 0===b.dts&&(b.pts=h.timeStamp,b.dts=h.timeStamp),this.trigger("timestamp",h)}b.frames.push(h),c+=10,c+=g}while(c<d)this.trigger("data",b)}}}}).prototype=new d;var $=bi;(bj=function(){var a=new Uint8Array(188),b=0;bj.prototype.init.call(this),this.push=function(c){var d,e=0,f=188;for(b?((d=new Uint8Array(c.byteLength+b)).set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;){if(71===d[e]&&71===d[f]){this.trigger("data",d.subarray(e,f)),e+=188,f+=188;continue}e++,f++}e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}}).prototype=new d,(bk=function(){var a,b,c,d;bk.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=3+((15&a[1])<<8|a[2])-4,e=12+((15&a[10])<<8|a[11]);e<c;){var f=a[e],g=(31&a[e+1])<<8|a[e+2];f===N.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=g:f===N.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=g:f===N.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][g]=f),e+=((15&a[e+3])<<8|a[e+4])+5}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=N.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=N.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}}).prototype=new d,bk.STREAM_TYPES={h264:27,adts:15},(bl=function(){var a,b=this,c=!1,d={data:[],size:0},e={data:[],size:0},f={data:[],size:0},g=function(a,b){var c;let d=a[0]<<16|a[1]<<8|a[2];b.data=new Uint8Array,1===d&&(b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=(4&a[6])!=0,192&(c=a[7])&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8]))},h=function(a,c,d){var e,f=new Uint8Array(a.size),h={type:c},i=0,j=0,k=!1;if(a.data.length&&!(a.size<9)){for(i=0,h.trackId=a.data[0].pid;i<a.data.length;i++)e=a.data[i],f.set(e.data,j),j+=e.data.byteLength;g(f,h),k="video"===c||h.packetLength<=a.size,(d||k)&&(a.size=0,a.data.length=0),k&&b.trigger("data",h)}};bl.prototype.init.call(this),this.push=function(g){({pat:function(){},pes:function(){var a,b;switch(g.streamType){case N.H264_STREAM_TYPE:a=d,b="video";break;case N.ADTS_STREAM_TYPE:a=e,b="audio";break;case N.METADATA_STREAM_TYPE:a=f,b="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&h(a,b,!0),a.data.push(g),a.size+=g.data.byteLength},pmt:function(){var d={type:"metadata",tracks:[]};null!==(a=g.programMapTable).video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),c=!0,b.trigger("data",d)}})[g.type]()},this.reset=function(){d.size=0,d.data.length=0,e.size=0,e.data.length=0,this.trigger("reset")},this.flushStreams_=function(){h(d,"video"),h(e,"audio"),h(f,"timed-metadata")},this.flush=function(){if(!c&&a){var d={type:"metadata",tracks:[]};null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),b.trigger("data",d)}c=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new d;var _={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:bj,TransportParseStream:bk,ElementaryStream:bl,TimestampRolloverStream:Q,CaptionStream:K,Cea608Stream:L,Cea708Stream:M,MetadataStream:$};for(var aa in N)N.hasOwnProperty(aa)&&(_[aa]=N[aa]);var ab=l,ac=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(bm=function(a){var b,c=0;bm.prototype.init.call(this),this.skipWarn_=function(a,b){this.trigger("log",{level:"warn",message:`adts skiping bytes ${a} to ${b} in frame ${c} outside syncword`})},this.push=function(d){var e,f,g,h,i,j,k=0;if(a||(c=0),"audio"===d.type){for(b&&b.length?((b=new Uint8Array((h=b).byteLength+d.data.byteLength)).set(h),b.set(d.data,h.byteLength)):b=d.data;k+7<b.length;){if(255!==b[k]||(246&b[k+1])!=240){"number"!=typeof e&&(e=k),k++;continue}if("number"==typeof e&&(this.skipWarn_(e,k),e=null),g=(1&~b[k+1])*2,f=(3&b[k+3])<<11|b[k+4]<<3|(224&b[k+5])>>5,j=(i=((3&b[k+6])+1)*1024)*ab/ac[(60&b[k+2])>>>2],b.byteLength-k<f)break;this.trigger("data",{pts:d.pts+c*j,dts:d.dts+c*j,sampleCount:i,audioobjecttype:(b[k+2]>>>6&3)+1,channelcount:(1&b[k+2])<<2|(192&b[k+3])>>>6,samplerate:ac[(60&b[k+2])>>>2],samplingfrequencyindex:(60&b[k+2])>>>2,samplesize:16,data:b.subarray(k+7+g,k+f)}),c++,k+=f}"number"==typeof e&&(this.skipWarn_(e,k),e=null),b=b.subarray(k)}},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}}).prototype=new d;var ad=bm,ae=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a||(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord()),c<<=a,d-=a},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return((d-=e)>0?c<<=e:b>0&&this.loadWord(),(e=a-e)>0)?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if((c&0x80000000>>>a)!=0)return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(bo=function(){var a,b,c=0;bo.prototype.init.call(this),this.push=function(d){b?((e=new Uint8Array(b.byteLength+d.data.byteLength)).set(b),e.set(d.data,b.byteLength),b=e):b=d.data;for(var e,f=b.byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<f)c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new d,bp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(bn=function(){var a,b,c,d,e,f,g,h=new bo;bn.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g,nalUnitTypeCode:31&g[0]};switch(h.nalUnitTypeCode){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d=8,e=8;for(c=0;c<a;c++)0!==e&&(e=(d+b.readExpGolomb()+256)%256),d=0===e?d:e},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;c=new Uint8Array(b=d-e.length);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o=0,p=0,q=0,r=0,s=[1,1];if(c=(b=new ae(a)).readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),bp[c]&&(3===(f=b.readUnsignedExpGolomb())&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(n=0,m=3!==f?8:12;n<m;n++)b.readBoolean()&&(n<6?g(16,b):g(64,b));if(b.skipUnsignedExpGolomb(),0===(h=b.readUnsignedExpGolomb()))b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),n=0;n<i;n++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),0===(l=b.readBits(1))&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(o=b.readUnsignedExpGolomb(),p=b.readUnsignedExpGolomb(),q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(b.readUnsignedByte()){case 1:s=[1,1];break;case 2:s=[12,11];break;case 3:s=[10,11];break;case 4:s=[16,11];break;case 5:s=[40,33];break;case 6:s=[24,11];break;case 7:s=[20,11];break;case 8:s=[32,11];break;case 9:s=[80,33];break;case 10:s=[18,11];break;case 11:s=[15,11];break;case 12:s=[64,33];break;case 13:s=[160,99];break;case 14:s=[4,3];break;case 15:s=[3,2];break;case 16:s=[2,1];break;case 255:s=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}s[0],s[1]}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:(j+1)*16-2*o-2*p,height:(2-l)*(k+1)*16-2*q-2*r,sarRatio:s}}}).prototype=new d;var af=bn,ag=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ah=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(c=c>=0?c:0,(16&a[b+5])>>4)?c+20:c+10},ai=function(a,b){return a.length-b<10||73!==a[b]||68!==a[b+1]||51!==a[b+2]?b:(b+=ah(a,b),ai(a,b))},aj=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},ak=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},al={isLikelyAacData:function(a){var b=ai(a,0);return a.length>=b+2&&(255&a[b])==255&&(240&a[b+1])==240&&(22&a[b+1])==16},parseId3TagSize:ah,parseAdtsSize:function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3;return 6144&a[b+3]|d|c},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":!0&a[b]&&(240&a[b+1])==240?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;){if(255!==a[b]||(246&a[b+1])!=240){b++;continue}return ag[(60&a[b+2])>>>2]}return null},parseAacTimestamp:function(a){var b,c,d;b=10,64&a[5]&&(b+=4,b+=aj(a.subarray(10,14)));do{if((c=aj(a.subarray(b+4,b+8)))<1)break;if("PRIV"===String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3])){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){if("com.apple.streaming.transportStreamTimestamp"===unescape(ak(d,0,e))){var f=d.subarray(e+1),g=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;return g*=4,g+=3&f[7]}break}}b+=10,b+=c}while(b<a.byteLength)return null}};(bq=function(){var a=new Uint8Array,b=0;bq.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g=0,h=0;for(a.length?(f=a.length,(a=new Uint8Array(c.byteLength+f)).set(a.subarray(0,f)),a.set(c,f)):a=c;a.length-h>=3;){if(73===a[h]&&68===a[h+1]&&51===a[h+2]){if(a.length-h<10||(g=al.parseId3TagSize(a,h),h+g>a.length))break;d={type:"timed-metadata",data:a.subarray(h,h+g)},this.trigger("data",d),h+=g;continue}if((255&a[h])==255&&(240&a[h+1])==240){if(a.length-h<7||(g=al.parseAdtsSize(a,h),h+g>a.length))break;e={type:"audio",data:a.subarray(h,h+g),pts:b,dts:b},this.trigger("data",e),h+=g;continue}h++}a=a.length-h>0?a.subarray(h):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new d;var am=bq,an=function(a){return aO(a1.mdat,a)},ao=function(a,b){for(var c=[],d=b.length;d--;)c[d]=a$(b[d]);return aO.apply(null,[a1.moof,aO(a1.mfhd,new Uint8Array([0,0,0,0,(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a]))].concat(c))},ap=function(a){var b,c=aO(a1.ftyp,a2,a3,a2,a4),d=aQ(a);return(b=new Uint8Array(c.byteLength+d.byteLength)).set(c),b.set(d,c.byteLength),b},aq=function(a){var b,c,d=[],e=[];for(b=0,e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0;b<a.length;b++)"access_unit_delimiter_rbsp"===(c=a[b]).nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),(d=[c]).byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},ar=function(a){var b,c,d=[],e=[];for(b=0,d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts;b<a.length;b++)(c=a[b]).keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),(d=[c]).nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},as=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},at=function(a,b){var c,d,e,f,g=b||0,i=[];for(c=0;c<a.length;c++)for(d=0,f=a[c];d<f.length;d++)e=h(f[d],g),g+=e.size,i.push(e);return i},au=function(a){var b,c,d,e,f,g,h=0,i=new Uint8Array(a.byteLength+4*a.nalCount),j=new DataView(i.buffer);for(b=0;b<a.length;b++)for(c=0,e=a[b];c<e.length;c++)for(d=0,f=e[c];d<f.length;d++)g=f[d],j.setUint32(h,g.data.byteLength),h+=4,i.set(g.data,h),h+=g.data.byteLength;return i},av=function(a,b,c,d){var e,f,g,h,i=0,j=0,k=0;if(b.length&&(e=o(a.baseMediaDecodeTime,a.samplerate),i=Math.ceil(l/(a.samplerate/1024)),c&&d&&(k=(j=Math.floor((e-Math.max(c,d))/i))*i),!(j<1)&&!(k>l/2))){for((f=r()[a.samplerate])||(f=b[0].data),g=0;g<j;g++)h=b[0],b.splice(0,0,{data:f,dts:h.dts-i,pts:h.pts-i});return a.baseMediaDecodeTime-=Math.floor(p(k,a.samplerate)),k}},aw=function(a){var b,c=[];for(b=0;b<a.length;b++)c.push({size:a[b].data.byteLength,duration:1024});return c},ax=function(a){var b,c,d=0,e=new Uint8Array(s(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},ay=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},az=function(a,b){var c,d=a.minSegmentDts;return b||(d-=a.timelineStartInfo.dts),c=Math.max(0,c=a.timelineStartInfo.baseMediaDecodeTime+d),"audio"===a.type&&(c*=a.samplerate/l,c=Math.floor(c)),c},aA=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},aB=al.isLikelyAacData,aC=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],aD=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],aE=function(a,b){b.stream=a,this.trigger("log",b)},aF=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];"headOfPipeline"!==e&&b[e].on&&b[e].on("log",aE.bind(a,e))}},aG=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},aH=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};(bs=function(a,b){var c,d=[],e=0,f=0,g=1/0;c=(b=b||{}).firstSequenceNumber||0,bs.prototype.init.call(this),this.push=function(b){aA(a,b),a&&aC.forEach(function(c){a[c]=b[c]}),d.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,m,n,p,q,r,s;0===d.length||(q=d,r=a,s=e,h=r.minSegmentDts>=s?q:(r.minSegmentDts=1/0,q.filter(function(a){return a.dts>=s&&(r.minSegmentDts=Math.min(r.minSegmentDts,a.dts),r.minSegmentPts=r.minSegmentDts,!0)})),a.baseMediaDecodeTime=az(a,b.keepOriginalTimestamps),p=av(a,h,f,g),a.samples=aw(h),j=an(ax(h)),d=[],k=new Uint8Array((i=ao(c,[a])).byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),ay(a),m=Math.ceil(1024*l/a.samplerate),h.length&&(n=h.length*m,this.trigger("segmentTimingInfo",aH(o(a.baseMediaDecodeTime,a.samplerate),h[0].dts,h[0].pts,h[0].dts+n,h[0].pts+n,p||0)),this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+n})),this.trigger("data",{track:a,boxes:k})),this.trigger("done","AudioSegmentStream")},this.reset=function(){ay(a),d=[],this.trigger("reset")}}).prototype=new d,(br=function(a,b){var c,d,e,f=[],g=[];c=(b=b||{}).firstSequenceNumber||0,br.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){aA(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.config,a.sps=[b.data],aD.forEach(function(b){a[b]=d[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||e||(e=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var d,e,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if((h=ar(aq(f)))[0][0].keyFrame||((e=this.getGopForFusion_(f[0],a))?(n=e.duration,h.unshift(e),h.byteLength+=e.byteLength,h.nalCount+=e.nalCount,h.pts=e.pts,h.dts=e.dts,h.duration+=e.duration):h=as(h)),g.length){if(!(d=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h))){this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}ay(a),h=d}aA(a,h),a.samples=at(h),j=an(au(h)),a.baseMediaDecodeTime=az(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",aH(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),k=new Uint8Array((i=ao(c,[a])).byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){ay(a),d=void 0,e=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=1/0;for(g=0;g<this.gopCache_.length;g++)e=(f=this.gopCache_[g]).gop,a.pps&&aG(a.pps[0],f.pps[0])&&a.sps&&aG(a.sps[0],f.sps[0])&&!(e.dts<a.timelineStartInfo.dts)&&(c=b.dts-e.dts-e.duration)>=-1e4&&c<=45e3&&(!d||h>c)&&(d=f,h=c);return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);){if(e.pts>d.pts){b++;continue}c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration}return 0===c?a:c===a.length?null:((j=a.slice(c)).byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){for(b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}if(d.pts>e.pts){b--;continue}b===g.length-1&&(f=c),c--}if(!h&&null===f)return null;if(0===(i=h?c:f))return a;var b,c,d,e,f,h,i,j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}}).prototype=new d,(bu=function(a,b){this.numberOfTracks=0,this.metadataStream=b,void 0!==(a=a||{}).remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,bu.prototype.init.call(this),this.push=function(a){return a.content||a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):void(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),"audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes)))}}).prototype=new d,bu.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;else if(this.remuxTracks)return;else if(0===this.pendingTracks.length){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,aD.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,aC.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,g.initSegment=new Uint8Array((d=ap(this.pendingTracks)).byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)(b=this.pendingCaptions[e]).startTime=q(b.startPts,h,this.keepOriginalTimestamps),b.endTime=q(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)(c=this.pendingMetadata[e]).cueTime=q(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},bu.prototype.setRemux=function(a){this.remuxTracks=a},(bt=function(a){var b,c,d=this,e=!0;bt.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new _.MetadataStream,e.aacStream=new am,e.audioTimestampRolloverStream=new _.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new _.TimestampRolloverStream("timed-metadata"),e.adtsStream=new ad,e.coalesceStream=new bu(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type&&"audio"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new bs(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b}))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done")),aF(this,e)},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="ts",e.metadataStream=new _.MetadataStream,e.packetStream=new _.TransportPacketStream,e.parseStream=new _.TransportParseStream,e.elementaryStream=new _.ElementaryStream,e.timestampRolloverStream=new _.TimestampRolloverStream,e.adtsStream=new ad,e.h264Stream=new af,e.captionStream=new _.CaptionStream(a),e.coalesceStream=new bu(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||((c=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(b=f.tracks[g]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime;b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new br(b,a),e.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new bs(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done")),aF(this,e)},this.setBaseMediaDecodeTime=function(d){var e=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d),c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,ay(c),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),b&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,ay(b),e.captionStream.reset()),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.getLogTrigger_=function(a){var b=this;return function(c){c.stream=a,b.trigger("log",c)}},this.push=function(a){if(e){var b=aB(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new d;var aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx=bt,by=function(a){return a>>>0},bz=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},bA=function(a,b){var c,d,e,f,g,h=[];if(!b.length)return null;for(c=0;c<a.byteLength;)d=by(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]),e=bz(a.subarray(c+4,c+8)),f=d>1?c+d:a.byteLength,e===b[0]&&(1===b.length?h.push(a.subarray(c+8,f)):(g=bA(a.subarray(c+8,f),b.slice(1))).length&&(h=h.concat(g))),c=f;return h},bB=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4))};return 1===b.version?b.baseMediaDecodeTime=e(a.subarray(4)):b.baseMediaDecodeTime=by(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),b},bC=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},bD=e,bE=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},bF=function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:bE(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=bE(a.subarray(l,l+4)),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},bG=e,bH=function(a){return new Date(1e3*a-20828448e5)},bI=function(a){var b,c,d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=[];for(b=0;b+4<a.length;b+=c){if(c=d.getUint32(b),b+=4,c<=0){e.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(31&a[b]){case 1:e.push("slice_layer_without_partitioning_rbsp");break;case 5:e.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:e.push("sei_rbsp");break;case 7:e.push("seq_parameter_set_rbsp");break;case 8:e.push("pic_parameter_set_rbsp");break;case 9:e.push("access_unit_delimiter_rbsp");break;default:e.push("UNKNOWN NAL - "+a[b]&31)}}return e},bJ={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:bv(a.subarray(78,a.byteLength))}},avcC:function(a){var b,c,d,e,f=new DataView(a.buffer,a.byteOffset,a.byteLength),g={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:3&a[4],sps:[],pps:[]},h=31&a[5];for(e=0,d=6;e<h;e++)c=f.getUint16(d),d+=2,g.sps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;for(b=a[d],d++,e=0;e<b;e++)c=f.getUint16(d),d+=2,g.pps.push(new Uint8Array(a.subarray(d,d+c))),d+=c;return g},btrt:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:b.getUint32(0),maxBitrate:b.getUint32(4),avgBitrate:b.getUint32(8)}},edts:function(a){return{boxes:bv(a)}},elst:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),edits:[]},e=c.getUint32(4);for(b=8;e;e--)0===d.version?(d.edits.push({segmentDuration:c.getUint32(b),mediaTime:c.getInt32(b+4),mediaRate:c.getUint16(b+8)+c.getUint16(b+10)/65536}),b+=12):(d.edits.push({segmentDuration:bG(a.subarray(b)),mediaTime:bG(a.subarray(b+8)),mediaRate:c.getUint16(b+16)+c.getUint16(b+18)/65536}),b+=20);return d},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:31&a[8],decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(7&a[26])<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){for(var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={majorBrand:bz(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]},d=8;d<a.byteLength;)c.compatibleBrands.push(bz(a.subarray(d,d+4))),d+=4;return c},dinf:function(a){return{boxes:bv(a)}},dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:bv(a.subarray(8))}},hdlr:function(a){var b={version:new DataView(a.buffer,a.byteOffset,a.byteLength).getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:bz(a.subarray(8,12)),name:""},c=8;for(c=24;c<a.byteLength;c++){if(0===a[c]){c++;break}b.name+=String.fromCharCode(a[c])}return b.name=decodeURIComponent(escape(b.name)),b},mdat:function(a){return{byteLength:a.byteLength,nals:bI(a)}},mdhd:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=4,e={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};return 1===e.version?(d+=4,e.creationTime=bH(c.getUint32(d)),d+=8,e.modificationTime=bH(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=8):(e.creationTime=bH(c.getUint32(d)),d+=4,e.modificationTime=bH(c.getUint32(d)),d+=4,e.timescale=c.getUint32(d),d+=4),e.duration=c.getUint32(d),d+=4,b=c.getUint16(d),e.language+=String.fromCharCode((b>>10)+96),e.language+=String.fromCharCode(((992&b)>>5)+96),e.language+=String.fromCharCode((31&b)+96),e},mdia:function(a){return{boxes:bv(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:bv(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};return a.byteLength>28&&(c.streamDescriptor=bv(a.subarray(28))[0]),c},moof:function(a){return{boxes:bv(a)}},moov:function(a){return{boxes:bv(a)}},mvex:function(a){return{boxes:bv(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=bH(b.getUint32(c)),c+=8,d.modificationTime=bH(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8):(d.creationTime=bH(b.getUint32(c)),c+=4,d.modificationTime=bH(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=4),d.duration=b.getUint32(c),c+=4,d.rate=b.getUint16(c)+b.getUint16(c+2)/16,c+=4,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=12,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=60,d.nextTrackId=b.getUint32(c),d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]};for(b=4;b<a.byteLength;b++)c.samples.push({dependsOn:(48&a[b])>>4,isDependedOn:(12&a[b])>>2,hasRedundancy:3&a[b]});return c},sidx:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},d=12;0===c.version?(c.earliestPresentationTime=b.getUint32(d),c.firstOffset=b.getUint32(d+4),d+=8):(c.earliestPresentationTime=bD(a.subarray(d)),c.firstOffset=bD(a.subarray(d+8)),d+=16),d+=2;var e=b.getUint16(d);for(d+=2;e>0;d+=12,e--)c.references.push({referenceType:(128&a[d])>>>7,referencedSize:0x7fffffff&b.getUint32(d),subsegmentDuration:b.getUint32(d+4),startsWithSap:!!(128&a[d+8]),sapType:(112&a[d+8])>>>4,sapDeltaTime:0xfffffff&b.getUint32(d+8)});return c},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:bv(a)}},ctts:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),compositionOffsets:[]},e=c.getUint32(4);for(b=8;e;b+=8,e--)d.compositionOffsets.push({sampleCount:c.getUint32(b),sampleOffset:c[0===d.version?"getUint32":"getInt32"](b+4)});return d},stss:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:c.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),syncSamples:[]},e=c.getUint32(4);for(b=8;e;b+=4,e--)d.syncSamples.push(c.getUint32(b));return d},stco:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]},e=c.getUint32(4);for(b=8;e;b+=4,e--)d.chunkOffsets.push(c.getUint32(b));return d},stsc:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=c.getUint32(4),e={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};for(b=8;d;b+=12,d--)e.sampleToChunks.push({firstChunk:c.getUint32(b),samplesPerChunk:c.getUint32(b+4),sampleDescriptionIndex:c.getUint32(b+8)});return e},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:bv(a.subarray(8))}},stsz:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:c.getUint32(4),entries:[]};for(b=12;b<a.byteLength;b+=4)d.entries.push(c.getUint32(b));return d},stts:function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]},e=c.getUint32(4);for(b=8;e;b+=8,e--)d.timeToSamples.push({sampleCount:c.getUint32(b),sampleDelta:c.getUint32(b+4)});return d},styp:function(a){return bJ.ftyp(a)},tfdt:bB,tfhd:bC,tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return 1===d.version?(c+=4,d.creationTime=bH(b.getUint32(c)),c+=8,d.modificationTime=bH(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=12):(d.creationTime=bH(b.getUint32(c)),c+=4,d.modificationTime=bH(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c+=8),d.duration=b.getUint32(c),c+=12,d.layer=b.getUint16(c),c+=2,d.alternateGroup=b.getUint16(c),c+=2,d.volume=b.getUint8(c)+b.getUint8(c+1)/8,c+=4,d.matrix=new Uint32Array(a.subarray(c,c+36)),c+=36,d.width=b.getUint16(c)+b.getUint16(c+2)/65536,c+=4,d.height=b.getUint16(c)+b.getUint16(c+2)/65536,d},traf:function(a){return{boxes:bv(a)}},trak:function(a){return{boxes:bv(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:3&a[20],sampleIsDependedOn:(192&a[21])>>6,sampleHasRedundancy:(48&a[21])>>4,samplePaddingValue:(14&a[21])>>1,sampleIsDifferenceSample:!!(1&a[21]),sampleDegradationPriority:b.getUint16(22)}},trun:bF,"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}},bK={inspect:bv=function(a){for(var b,c,d,e,f,g=0,h=[],i=new ArrayBuffer(a.length),j=new Uint8Array(i),k=0;k<a.length;++k)j[k]=a[k];for(b=new DataView(i);g<a.byteLength;)c=b.getUint32(g),d=bz(a.subarray(g+4,g+8)),e=c>1?g+c:a.byteLength,(f=(bJ[d]||function(a){return{data:a}})(a.subarray(g+8,e))).size=c,f.type=d,h.push(f),g=e;return h},textify:bw=function(a,b){var c;return c=Array(2*(b=b||0)+1).join(" "),a.map(function(a,d){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ",e=a[b];if(e instanceof Uint8Array||e instanceof Uint32Array){var f=Array.prototype.slice.call(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return f?1===f.length?d+"<"+f.join("").slice(1)+">":d+"<\n"+f.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>"}return d+JSON.stringify(e,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+bw(a.boxes,b+1):"")}).join("\n")},parseType:bz,findBox:bA,parseTraf:bJ.traf,parseTfdt:bJ.tfdt,parseHdlr:bJ.hdlr,parseTfhd:bJ.tfhd,parseTrun:bJ.trun,parseSidx:bJ.sidx},bL=function(a){for(var b=0,c=String.fromCharCode(a[0]),d="";"\0"!==c;)d+=c,c=String.fromCharCode(a[++b]);return d+c},bM=function(a,b){var c="\0"!==b.scheme_id_uri,d=0===a&&bN(b.presentation_time_delta)&&c,e=1===a&&bN(b.presentation_time)&&c;return!(a>1)&&d||e},bN=function(a){return void 0!==a||null!==a},bO=void 0!==c?c:"undefined"!=typeof self?self:{},bP=function(a){return("00"+a.toString(16)).slice(-2)},bQ=function(a){var b,c,d,f,g,h,i,j=4,k=a[0];if(0===k){b=bL(a.subarray(j)),j+=b.length,c=bL(a.subarray(j)),j+=c.length;var l=new DataView(a.buffer);d=l.getUint32(j),j+=4,g=l.getUint32(j),j+=4,h=l.getUint32(j),j+=4,i=l.getUint32(j),j+=4}else if(1===k){var l=new DataView(a.buffer);d=l.getUint32(j),j+=4,f=e(a.subarray(j)),j+=8,h=l.getUint32(j),j+=4,i=l.getUint32(j),j+=4,b=bL(a.subarray(j)),j+=b.length,c=bL(a.subarray(j)),j+=c.length}var m={scheme_id_uri:b,value:c,timescale:d||1,presentation_time:f,presentation_time_delta:g,event_duration:h,id:i,message_data:new Uint8Array(a.subarray(j,a.byteLength))};return bM(k,m)?m:void 0},bR=function(a,b,c,d){return a||0===a?a/b:d+c/b},bS={findBox:bA,parseType:bz,timescale:function(a){return bA(a,["moov","trak"]).reduce(function(a,b){var c,d,e,f;return(c=bA(b,["tkhd"])[0])&&(d=0===c[0]?12:20,e=by(c[d]<<24|c[d+1]<<16|c[d+2]<<8|c[d+3]),f=bA(b,["mdia","mdhd"])[0])?(d=0===f[0]?12:20,a[e]=by(f[d]<<24|f[d+1]<<16|f[d+2]<<8|f[d+3]),a):null},{})},startTime:function(a,b){var c=bA(b,["moof","traf"]).reduce(function(b,c){let d;var f,g=bA(c,["tfhd"])[0],h=a[by(g[4]<<24|g[5]<<16|g[6]<<8|g[7])]||9e4,i=bA(c,["tfdt"])[0],j=new DataView(i.buffer,i.byteOffset,i.byteLength);return"bigint"==typeof(f=1===i[0]?e(i.subarray(4,12)):j.getUint32(4))?d=f/bO.BigInt(h):"number"!=typeof f||isNaN(f)||(d=f/h),d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),d<b&&(b=d),b},1/0);return"bigint"==typeof c||isFinite(c)?c:0},compositionStartTime:function(a,b){var c,d=bA(b,["moof","traf"]),e=0,f=0;if(d&&d.length){var g=bA(d[0],["tfhd"])[0],h=bA(d[0],["trun"])[0],i=bA(d[0],["tfdt"])[0];if(g&&(c=bC(g).trackId),i&&(e=bB(i).baseMediaDecodeTime),h){var j=bF(h);j.samples&&j.samples.length&&(f=j.samples[0].compositionTimeOffset||0)}}var k=a[c]||9e4;"bigint"==typeof e&&(f=bO.BigInt(f),k=bO.BigInt(k));var l=(e+f)/k;return"bigint"==typeof l&&l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),l},videoTrackIds:function(a){var b=bA(a,["moov","trak"]),c=[];return b.forEach(function(a){var b=bA(a,["mdia","hdlr"]),d=bA(a,["tkhd"]);b.forEach(function(a,b){var e,f,g=bz(a.subarray(8,12)),h=d[b];"vide"===g&&(f=0===(e=new DataView(h.buffer,h.byteOffset,h.byteLength)).getUint8(0)?e.getUint32(12):e.getUint32(20),c.push(f))})}),c},tracks:function(a){var c=bA(a,["moov","trak"]),d=[];return c.forEach(function(a){var c={},e=bA(a,["tkhd"])[0];e&&(c.id=0===(i=new DataView(e.buffer,e.byteOffset,e.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20));var f=bA(a,["mdia","hdlr"])[0];if(f){var g=bz(f.subarray(8,12));"vide"===g?c.type="video":"soun"===g?c.type="audio":c.type=g}var h=bA(a,["mdia","minf","stbl","stsd"])[0];if(h){var i,j,k=h.subarray(8);c.codec=bz(k.subarray(4,8));var l=bA(k,[c.codec])[0];l&&(/^[asm]vc[1-9]$/i.test(c.codec)?"avcC"===bz((j=l.subarray(78)).subarray(4,8))&&j.length>11?(c.codec+=".",c.codec+=bP(j[9]),c.codec+=bP(j[10]),c.codec+=bP(j[11])):c.codec="avc1.4d400d":/^mp4[a,v]$/i.test(c.codec)?"esds"===bz((j=l.subarray(28)).subarray(4,8))&&j.length>20&&0!==j[19]?(c.codec+="."+bP(j[19]),c.codec+="."+bP(j[20]>>>2&63).replace(/^0/,"")):c.codec="mp4a.40.2":c.codec=c.codec.toLowerCase())}var m=bA(a,["mdia","mdhd"])[0];m&&(c.timescale=b(m)),d.push(c)}),d},getTimescaleFromMediaHeader:b=function(a){var b=0===a[0]?12:20;return by(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])},getEmsgID3:function(a,b=0){return bA(a,["emsg"]).map(a=>{var c=bQ(new Uint8Array(a)),d=X(c.message_data);return{cueTime:bR(c.presentation_time,c.timescale,c.presentation_time_delta,b),duration:bR(c.event_duration,c.timescale),frames:d}})}};let{parseTrun:bT}=bK,{findBox:bU}=bS;var bV={getMdatTrafPairs:function(a){var b=bU(a,["moof","traf"]),c=bU(a,["mdat"]),d=[];return c.forEach(function(a,c){var e=b[c];d.push({mdat:a,traf:e})}),d},parseSamples:function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=bT(a).samples;b.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),"bigint"==typeof d?(a.pts=d+bO.BigInt(a.compositionTimeOffset),d+=bO.BigInt(a.duration)):(a.pts=d+a.compositionTimeOffset,d+=a.duration)}),h=h.concat(b)}),h}},bW=w,{getMdatTrafPairs:bX,parseSamples:bY}=bV,bZ=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null},b$=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i={logs:[],seiNals:[]};for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=bZ(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:bW(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else if(g)d.pts=g.pts,d.dts=g.dts;else{i.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+e+" for trackId "+c+". See mux.js#223."});break}i.seiNals.push(d)}return i},b_=function(a,b){var c={};return bX(a).forEach(function(a){var d,e=a.mdat,f=a.traf,g=bC(bA(f,["tfhd"])[0]),h=g.trackId,i=bA(f,["tfdt"]),j=i.length>0?bB(i[0]).baseMediaDecodeTime:0,k=bA(f,["trun"]);b===h&&k.length>0&&(d=b$(e,bY(k,j,g),h),c[h]||(c[h]={seiNals:[],logs:[]}),c[h].seiNals=c[h].seiNals.concat(d.seiNals),c[h].logs=c[h].logs.concat(d.logs))}),c},b0=function(a,b,c){if(null===b)return null;var d=b_(a,b)[b]||{};return{seiNals:d.seiNals,logs:d.logs,timescale:c}},b1=function(){var a,b,c,d,e,f,g=!1;this.isInitialized=function(){return g},this.init=function(b){a=new K,g=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0}),a.on("log",function(a){e.logs.push(a)})},this.isNewInit=function(a,b){return(!a||0!==a.length)&&(!b||"object"!=typeof b||0!==Object.keys(b).length)&&(c!==a[0]||d!==b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized()||!f||!g)return null;if(this.isNewInit(f,g))d=g[c=f[0]];else if(null===c||!d)return b.push(a),null;for(;b.length>0;){var i=b.shift();this.parse(i,f,g)}return((h=b0(a,c,d))&&h.logs&&(e.logs=e.logs.concat(h.logs)),null!==h&&h.seiNals)?(this.pushNals(h.seiNals),this.flushStream(),e):e.logs.length?{logs:e.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(b){if(!this.isInitialized()||!b||0===b.length)return null;b.forEach(function(b){a.push(b)})},this.flushStream=function(){if(!this.isInitialized())return null;f?a.partialFlush():a.flush()},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={},e.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;a.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],c=null,d=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()};let{parseTfdt:b2}=bK,{getTimescaleFromMediaHeader:b3}=bS,{parseSamples:b4,getMdatTrafPairs:b5}=bV;var b6=function(){let a=9e4;this.init=function(b){let c=bA(b,["moov","trak","mdia","mdhd"])[0];c&&(a=b3(c))},this.parseSegment=function(b){let c=[],d=b5(b),e=0;return d.forEach(function(b){let d=b.mdat,f=b.traf,g=bA(f,["tfdt"])[0],h=bA(f,["tfhd"])[0],i=bA(f,["trun"]);if(g&&(e=b2(g).baseMediaDecodeTime),i.length&&h){let b=b4(i,e,h),f=0;b.forEach(function(b){let e=new TextDecoder("utf-8"),g=d.slice(f,f+b.size);if(bA(g,["vtte"])[0]){f+=b.size;return}bA(g,["vttc"]).forEach(function(d){let f,g,h=bA(d,["payl"])[0],i=bA(d,["sttg"])[0],j=b.pts/a,k=(b.pts+b.duration)/a;if(h)try{f=e.decode(h)}catch(a){console.error(a)}if(i)try{g=e.decode(i)}catch(a){console.error(a)}b.duration&&f&&c.push({cueText:f,start:j,end:k,settings:g})}),f+=b.size})}}),c}},b7=function(a){var b=31&a[1];return b<<=8,b|=a[2]},b8=function(a){return!!(64&a[1])},b9=function(a){var b=0;return(48&a[3])>>>4>1&&(b+=a[4]+1),b},ca=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},cb={};cb.ts={parseType:function(a,b){var c=b7(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},parsePat:function(a){var b=b8(a),c=4+b9(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},parsePmt:function(a){var b,c={},d=b8(a),e=4+b9(a);if(d&&(e+=a[e]+1),1&a[e+5]){b=3+((15&a[e+1])<<8|a[e+2])-4;for(var f=12+((15&a[e+10])<<8|a[e+11]);f<b;){var g=e+f;c[(31&a[g+1])<<8|a[g+2]]=a[g],f+=((15&a[g+3])<<8|a[g+4])+5}return c}},parsePayloadUnitStartIndicator:b8,parsePesType:function(a,b){switch(b[b7(a)]){case N.H264_STREAM_TYPE:return"video";case N.ADTS_STREAM_TYPE:return"audio";case N.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!b8(a))return null;var b,c=4+b9(a);if(c>=a.byteLength)return null;var d=null;return 192&(b=a[c+7])&&((d={}).pts=(14&a[c+9])<<27|(255&a[c+10])<<20|(254&a[c+11])<<12|(255&a[c+12])<<5|(254&a[c+13])>>>3,d.pts*=4,d.pts+=(6&a[c+13])>>>1,d.dts=d.pts,64&b&&(d.dts=(14&a[c+14])<<27|(255&a[c+15])<<20|(254&a[c+16])<<12|(255&a[c+17])<<5|(254&a[c+18])>>>3,d.dts*=4,d.dts+=(6&a[c+18])>>>1)),d},videoPacketContainsKeyFrame:function(a){for(var b,c=4+b9(a),d=a.subarray(c),e=0,f=0,g=!1;f<d.byteLength-3;f++)if(1===d[f+2]){e=f+5;break}for(;e<d.byteLength;)switch(d[e]){case 0:if(0!==d[e-1]){e+=2;break}if(0!==d[e-2]){e++;break}f+3!==e-2&&"slice_layer_without_partitioning_rbsp_idr"===ca(31&d[f+3])&&(g=!0);do e++;while(1!==d[e]&&e<d.length)f=e-2,e+=3;break;case 1:if(0!==d[e-1]||0!==d[e-2]){e+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ca(31&d[f+3])&&(g=!0),f=e-2,e+=3;break;default:e+=3}return d=d.subarray(f),e-=f,f=0,d&&d.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===ca(31&d[f+3])&&(g=!0),g}},cb.aac=al;var cc=l,cd=function(a,b){for(var c,d=0,e=188;e<a.byteLength;){if(71===a[d]&&71===a[e]){switch(c=a.subarray(d,e),cb.ts.parseType(c,b.pid)){case"pat":b.pid=cb.ts.parsePat(c);break;case"pmt":var f=cb.ts.parsePmt(c);b.table=b.table||{},Object.keys(f).forEach(function(a){b.table[a]=f[a]})}d+=188,e+=188;continue}d++,e++}},ce=function(a,b,c){for(var d,e,f,g,h,i=0,j=188,k=!1;j<=a.byteLength;){if(71===a[i]&&(71===a[j]||j===a.byteLength)){if(d=a.subarray(i,j),"pes"===cb.ts.parseType(d,b.pid)&&(f=cb.ts.parsePesType(d,b.table),g=cb.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=cb.ts.parsePesTime(d))&&(h.type="audio",c.audio.push(h),k=!0)),k)break;i+=188,j+=188;continue}i++,j++}for(i=(j=a.byteLength)-188,k=!1;i>=0;){if(71===a[i]&&(71===a[j]||j===a.byteLength)){if(d=a.subarray(i,j),"pes"===cb.ts.parseType(d,b.pid)&&(f=cb.ts.parsePesType(d,b.table),g=cb.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=cb.ts.parsePesTime(d))&&(h.type="audio",c.audio.push(h),k=!0)),k)break;i-=188,j-=188;continue}i--,j--}},cf=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=0,m=188,n=!1,o={data:[],size:0};m<a.byteLength;){if(71===a[l]&&71===a[m]){if(d=a.subarray(l,m),"pes"===cb.ts.parseType(d,b.pid)&&(f=cb.ts.parsePesType(d,b.table),g=cb.ts.parsePayloadUnitStartIndicator(d),"video"===f)&&(g&&!n&&(h=cb.ts.parsePesTime(d))&&(h.type="video",c.video.push(h),n=!0),!c.firstKeyFrame)){if(g&&0!==o.size){for(i=new Uint8Array(o.size),j=0;o.data.length;)k=o.data.shift(),i.set(k,j),j+=k.byteLength;if(cb.ts.videoPacketContainsKeyFrame(i)){var p=cb.ts.parsePesTime(i);p?(c.firstKeyFrame=p,c.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}o.size=0}o.data.push(d),o.size+=d.byteLength}if(n&&c.firstKeyFrame)break;l+=188,m+=188;continue}l++,m++}for(l=(m=a.byteLength)-188,n=!1;l>=0;){if(71===a[l]&&71===a[m]){if(d=a.subarray(l,m),"pes"===cb.ts.parseType(d,b.pid)&&(f=cb.ts.parsePesType(d,b.table),g=cb.ts.parsePayloadUnitStartIndicator(d),"video"===f&&g&&(h=cb.ts.parsePesTime(d))&&(h.type="video",c.video.push(h),n=!0)),n)break;l-=188,m-=188;continue}l--,m--}},cg=function(a,b){if(a.audio&&a.audio.length){var c=b;(void 0===c||isNaN(c))&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=P(a.dts,c),a.pts=P(a.pts,c),a.dtsTime=a.dts/cc,a.ptsTime=a.pts/cc})}if(a.video&&a.video.length){var d=b;if((void 0===d||isNaN(d))&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=P(a.dts,d),a.pts=P(a.pts,d),a.dtsTime=a.dts/cc,a.ptsTime=a.pts/cc}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=P(e.dts,d),e.pts=P(e.pts,d),e.dtsTime=e.dts/cc,e.ptsTime=e.pts/cc}}},ch=function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;a.length-h>=3;){switch(cb.aac.parseType(a,h)){case"timed-metadata":if(a.length-h<10||(g=cb.aac.parseId3TagSize(a,h))>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=cb.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7||(g=cb.aac.parseAdtsSize(a,h))>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=cb.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var i=cc/e;return{audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*i,pts:f+1024*d*i}]}},ci=function(a){var b={pid:null,table:null},c={};for(var d in cd(a,b),b.table)if(b.table.hasOwnProperty(d))switch(b.table[d]){case N.H264_STREAM_TYPE:c.video=[],cf(a,b,c),0===c.video.length&&delete c.video;break;case N.ADTS_STREAM_TYPE:c.audio=[],ce(a,b,c),0===c.audio.length&&delete c.audio}return c},cj=function(a,b){var c;return(c=cb.aac.isLikelyAacData(a)?ch(a):ci(a))&&(c.audio||c.video)?(cg(c,b),c):null};let ck=function(a,b){b.on("data",function(b){let c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};let d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){let c={start:{decode:n(b.start.dts),presentation:n(b.start.pts)},end:{decode:n(b.end.dts),presentation:n(b.end.pts)},baseMediaDecodeTime:n(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=n(b.prependedContentDuration)),a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:c})}),b.on("audioSegmentTimingInfo",function(b){let c={start:{decode:n(b.start.dts),presentation:n(b.start.pts)},end:{decode:n(b.end.dts),presentation:n(b.end.pts)},baseMediaDecodeTime:n(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=n(b.prependedContentDuration)),a.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:c})}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:n(b.start),end:n(b.end)}})}),b.on("videoTimingInfo",function(b){a.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:n(b.start),end:n(b.end)}})}),b.on("log",function(b){a.postMessage({action:"log",log:b})})};class cl{constructor(a,b){this.options=b||{},this.self=a,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bx(this.options),ck(this.self,this.transmuxer)}pushMp4Captions(a){this.captionParser||(this.captionParser=new b1,this.captionParser.init());let b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.captionParser.parse(b,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],logs:c&&c.logs||[],data:b.buffer},[b.buffer])}initMp4WebVttParser(a){this.webVttParser||(this.webVttParser=new b6);let b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.webVttParser.init(b)}getMp4WebVttText(a){this.webVttParser||(this.webVttParser=new b6);let b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.webVttParser.parseSegment(b);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:c||[],data:b.buffer},[b.buffer])}probeMp4StartTime({timescales:a,data:b}){let c=bS.startTime(a,b);this.self.postMessage({action:"probeMp4StartTime",startTime:c,data:b},[b.buffer])}probeMp4Tracks({data:a}){let b=bS.tracks(a);this.self.postMessage({action:"probeMp4Tracks",tracks:b,data:a},[a.buffer])}probeEmsgID3({data:a,offset:b}){let c=bS.getEmsgID3(a,b);this.self.postMessage({action:"probeEmsgID3",id3Frames:c,emsgData:a},[a.buffer])}probeTs({data:a,baseStartTime:b}){let c=cj(a,"number"!=typeof b||isNaN(b)?void 0:b*l),d=null;c&&((d={hasVideo:c.video&&2===c.video.length||!1,hasAudio:c.audio&&2===c.audio.length||!1}).hasVideo&&(d.videoStart=c.video[0].ptsTime),d.hasAudio&&(d.audioStart=c.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:d,data:a},[a.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(a){let b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)}reset(){this.transmuxer.reset()}setTimestampOffset(a){let b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(m(b)))}setAudioAppendStart(a){this.transmuxer.setAudioAppendStart(Math.ceil(m(a.appendStart)))}setRemux(a){this.transmuxer.setRemux(a.remux)}flush(a){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}self.onmessage=function(a){if("init"===a.data.action&&a.data.options){this.messageHandlers=new cl(self,a.data.options);return}this.messageHandlers||(this.messageHandlers=new cl(self)),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data)}})));let hv=a=>{let{transmuxer:b,bytes:c,audioAppendStart:d,gopsToAlignWith:e,remux:f,onData:g,onTrackInfo:h,onAudioTimingInfo:i,onVideoTimingInfo:j,onVideoSegmentTimingInfo:k,onAudioSegmentTimingInfo:l,onId3:m,onCaptions:n,onDone:o,onEndedTimeline:p,onTransmuxerLog:q,isEndOfTimeline:r,segment:s,triggerSegmentEventFn:t}=a,u={buffer:[]},v=r;if(b.onmessage=c=>{b.currentTransmux===a&&("data"===c.data.action&&((a,b,c)=>{let{type:d,initSegment:e,captions:f,captionStreams:g,metadata:h,videoFrameDtsTime:i,videoFramePtsTime:j}=a.data.segment;b.buffer.push({captions:f,captionStreams:g,metadata:h});let k=a.data.segment.boxes||{data:a.data.segment.data},l={type:d,data:new Uint8Array(k.data,k.data.byteOffset,k.data.byteLength),initSegment:new Uint8Array(e.data,e.byteOffset,e.byteLength)};void 0!==i&&(l.videoFrameDtsTime=i),void 0!==j&&(l.videoFramePtsTime=j),c(l)})(c,u,g),"trackinfo"===c.data.action&&h(c.data.trackInfo),"gopInfo"===c.data.action&&(u.gopInfo=c.data.gopInfo),"audioTimingInfo"===c.data.action&&i(c.data.audioTimingInfo),"videoTimingInfo"===c.data.action&&j(c.data.videoTimingInfo),"videoSegmentTimingInfo"===c.data.action&&k(c.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===c.data.action&&l(c.data.audioSegmentTimingInfo),"id3Frame"===c.data.action&&m([c.data.id3Frame],c.data.id3Frame.dispatchType),"caption"===c.data.action&&n(c.data.caption),"endedtimeline"===c.data.action&&(v=!1,p()),"log"===c.data.action&&q(c.data.log),"transmuxed"!==c.data.type||v||(b.onmessage=null,(({transmuxedData:a,callback:b})=>{a.buffer=[],b(a)})({transmuxedData:u,callback:o}),hw(b)))},b.onerror=()=>{o(null,{message:"Received an error message from the transmuxer worker",metadata:{errorType:f4.Error.StreamingFailedToTransmuxSegment,segmentInfo:h5({segment:s})}})},d&&b.postMessage({action:"setAudioAppendStart",appendStart:d}),Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e}),void 0!==f&&b.postMessage({action:"setRemux",remux:f}),c.byteLength){let a=c instanceof ArrayBuffer?c:c.buffer,d=c instanceof ArrayBuffer?0:c.byteOffset;t({type:"segmenttransmuxingstart",segment:s}),b.postMessage({action:"push",data:a,byteOffset:d,byteLength:c.byteLength},[a])}r&&b.postMessage({action:"endTimeline"}),b.postMessage({action:"flush"})},hw=a=>{a.currentTransmux=null,a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"==typeof a.currentTransmux?a.currentTransmux():hv(a.currentTransmux))},hx=(a,b)=>{a.postMessage({action:b}),hw(a)};var hy=a=>{((a,b)=>{if(!b.currentTransmux){b.currentTransmux=a,hx(b,a);return}b.transmuxQueue.push(hx.bind(null,b,a))})("reset",a)};let hz=function(a){let b=a.transmuxer,c=a.endAction||a.action,d=a.callback,e=(0,W.default)({},a,{endAction:null,transmuxer:null,callback:null}),f=e=>{e.data.action===c&&(b.removeEventListener("message",f),e.data.data&&(e.data.data=new Uint8Array(e.data.data,a.byteOffset||0,a.byteLength||e.data.data.byteLength),a.data&&(a.data=e.data.data)),d(e.data))};if(b.addEventListener("message",f),a.data){let c=a.data instanceof ArrayBuffer;e.byteOffset=c?0:a.data.byteOffset,e.byteLength=a.data.byteLength;let d=[c?a.data:a.data.buffer];b.postMessage(e,d)}else b.postMessage(e)},hA="wvtt",hB=a=>{a.forEach(a=>{a.abort()})},hC=(a,b)=>{let{requestType:c}=b,d=gR({requestType:c,request:b,error:a});return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b,metadata:d}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b,metadata:d}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b,metadata:d}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+b.uri,code:2,xhr:b,metadata:d}:null},hD=(a,b,c,d)=>(e,f)=>{let g=f.response,h=hC(e,f);if(h)return c(h,a);if(16!==g.byteLength)return c({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:2,xhr:f},a);let i=new DataView(g),j=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]);for(let a=0;a<b.length;a++)b[a].bytes=j;return d({type:"segmentkeyloadcomplete",segment:a,keyInfo:{uri:f.uri}}),c(null,a)},hE=(a,b)=>{let c=bG(a.map.bytes);if("mp4"!==c){let d=a.map.resolvedUri||a.map.uri,e=c||"unknown";return b({internal:!0,message:`Found unsupported ${e} container for initialization segment at URL: ${d}`,code:2,metadata:{mediaType:e}})}hz({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:({tracks:c,data:d})=>(a.map.bytes=d,c.forEach(function(b){(a.map.tracks=a.map.tracks||{},!a.map.tracks[b.type])&&(a.map.tracks[b.type]=b,"number"==typeof b.id&&b.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[b.id]=b.timescale),"text"===b.type&&b.codec===hA&&a.transmuxer.postMessage({action:"initMp4WebVttParser",data:a.map.bytes}))}),b(null))})},hF=({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})=>{let o=new Uint8Array(b);if(bq(o,["moof"]).length>0){a.isFmp4=!0;let{tracks:e}=a.map;if(e.text&&(!e.audio||!e.video)){var p;k(a,{data:o,type:"text"}),p=e.text.codec,p===hA&&hz({action:"getMp4WebVttText",data:a.bytes,transmuxer:a.transmuxer,callback:({data:b,mp4VttCues:c})=>{a.bytes=b,l(null,a,{mp4VttCues:c})}});return}let f={isFmp4:!0,hasVideo:!!e.video,hasAudio:!!e.audio};e.audio&&e.audio.codec&&"enca"!==e.audio.codec&&(f.audioCodec=e.audio.codec),e.video&&e.video.codec&&"encv"!==e.video.codec&&(f.videoCodec=e.video.codec),e.video&&e.audio&&(f.isMuxed=!0),c(a,f);let i=(b,c)=>{k(a,{data:o,type:f.hasAudio&&!f.isMuxed?"audio":"video"}),c&&c.length&&g(a,c),b&&b.length&&h(a,b),l(null,a,{})};hz({action:"probeMp4StartTime",timescales:a.map.timescales,data:o,transmuxer:a.transmuxer,callback:({data:c,startTime:g})=>{b=c.buffer,a.bytes=o=c,f.hasAudio&&!f.isMuxed&&d(a,"audio","start",g),f.hasVideo&&d(a,"video","start",g),hz({action:"probeEmsgID3",data:o,transmuxer:a.transmuxer,offset:g,callback:({emsgData:c,id3Frames:d})=>{(b=c.buffer,a.bytes=o=c,e.video&&c.byteLength&&a.transmuxer)?hz({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:o,timescales:a.map.timescales,trackIds:[e.video.id],callback:c=>{b=c.data.buffer,a.bytes=o=c.data,c.logs.forEach(function(a){m(gc(a,{stream:"mp4CaptionParser"}))}),i(c.captions,d)}}):i(void 0,d)}})}});return}if(!a.transmuxer)return void l(null,a,{});if(void 0===a.container&&(a.container=bG(o)),"ts"!==a.container&&"aac"!==a.container){c(a,{hasAudio:!1,hasVideo:!1}),l(null,a,{});return}(({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})=>{let o=a.map&&a.map.tracks||{},p=!!(o.audio&&o.video),q=d.bind(null,a,"audio","start"),r=d.bind(null,a,"audio","end"),s=d.bind(null,a,"video","start"),t=d.bind(null,a,"video","end");hz({action:"probeTs",transmuxer:a.transmuxer,data:b,baseStartTime:a.baseStartTime,callback:d=>{a.bytes=b=d.data;let o=d.result;o&&(c(a,{hasAudio:o.hasAudio,hasVideo:o.hasVideo,isMuxed:p}),c=null),(a=>{if(!a.transmuxer.currentTransmux){a.transmuxer.currentTransmux=a,hv(a);return}a.transmuxer.transmuxQueue.push(a)})({bytes:b,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:p,onData:b=>{b.type="combined"===b.type?"video":b.type,k(a,b)},onTrackInfo:b=>{c&&(p&&(b.isMuxed=!0),c(a,b))},onAudioTimingInfo:a=>{q&&void 0!==a.start&&(q(a.start),q=null),r&&void 0!==a.end&&r(a.end)},onVideoTimingInfo:a=>{s&&void 0!==a.start&&(s(a.start),s=null),t&&void 0!==a.end&&t(a.end)},onVideoSegmentTimingInfo:b=>{n({type:"segmenttransmuxingtiminginfoavailable",segment:a,timingInfo:{pts:{start:b.start.presentation,end:b.end.presentation},dts:{start:b.start.decode,end:b.end.decode}}}),e(b)},onAudioSegmentTimingInfo:b=>{n({type:"segmenttransmuxingtiminginfoavailable",segment:a,timingInfo:{pts:{start:b.start.pts,end:b.end.pts},dts:{start:b.start.dts,end:b.end.dts}}}),f(b)},onId3:(b,c)=>{g(a,b,c)},onCaptions:b=>{h(a,[b])},isEndOfTimeline:i,onEndedTimeline:()=>{j()},onTransmuxerLog:m,onDone:(b,c)=>{l&&(b.type="combined"===b.type?"video":b.type,n({type:"segmenttransmuxingcomplete",segment:a}),l(c,a,b))},segment:a,triggerSegmentEventFn:n})}})})({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})},hG=function({id:a,key:b,encryptedBytes:c,decryptionWorker:d,segment:e,doneFn:f},g){let h,i=b=>{if(b.data.source===a){d.removeEventListener("message",i);let a=b.data.decrypted;g(new Uint8Array(a.bytes,a.byteOffset,a.byteLength))}};d.onerror=()=>{let a="An error occurred in the decryption worker",b=h5({segment:e});f({message:a,metadata:{error:Error(a),errorType:f4.Error.StreamingFailedToDecryptSegment,segmentInfo:b,keyInfo:{uri:e.key.resolvedUri||e.map.key.resolvedUri}}},e)},d.addEventListener("message",i),h=b.bytes.slice?b.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.bytes)),d.postMessage(hb({source:a,encrypted:c,key:h,iv:b.iv}),[c.buffer,h.buffer])},hH=gb("PlaylistSelector"),hI=function(a){if(!a||!a.playlist)return;let b=a.playlist;return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})},hJ=function(a,b){if(!a)return"";let c=S.default.getComputedStyle(a);return c?c[b]:""},hK=function(a,b){let c=a.slice();a.sort(function(a,d){let e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},hL=function(a,b){let c,d;return a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH),c=c||S.default.Number.MAX_VALUE,b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),c-(d=d||S.default.Number.MAX_VALUE)},hM=function(a){let b,c,d,e,{main:f,bandwidth:g,playerWidth:h,playerHeight:i,playerObjectFit:j,limitRenditionByPlayerDimensions:k,playlistController:l}=a;if(!f)return;let m={bandwidth:g,width:h,height:i,limitRenditionByPlayerDimensions:k},n=f.playlists;gJ.isAudioOnly(f)&&(n=l.getAudioTrackPlaylists_(),m.audioOnly=!0);let o=n.map(a=>{let b=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,c=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;return{bandwidth:a.attributes&&a.attributes.BANDWIDTH||S.default.Number.MAX_VALUE,width:b,height:c,playlist:a}});hK(o,(a,b)=>a.bandwidth-b.bandwidth);let p=(o=o.filter(a=>!gJ.isIncompatible(a.playlist))).filter(a=>gJ.isEnabled(a.playlist));p.length||(p=o.filter(a=>!gJ.isDisabled(a.playlist)));let q=p.filter(a=>a.bandwidth*ho.BANDWIDTH_VARIANCE<g),r=q[q.length-1],s=q.filter(a=>a.bandwidth===r.bandwidth)[0];if(!1===k){let a=s||p[0]||o[0];if(a&&a.playlist){let b="sortedPlaylistReps";return s&&(b="bandwidthBestRep"),p[0]&&(b="enabledPlaylistReps"),hH(`choosing ${hI(a)} using ${b} with options`,m),a.playlist}return hH("could not choose a playlist with options",m),null}let t=q.filter(a=>a.width&&a.height);hK(t,(a,b)=>a.width-b.width);let u=t.filter(a=>a.width===h&&a.height===i);r=u[u.length-1];let v=u.filter(a=>a.bandwidth===r.bandwidth)[0];if(v||(r=(c=(b=t.filter(a=>"cover"===j?a.width>h&&a.height>i:a.width>h||a.height>i)).filter(a=>a.width===b[0].width&&a.height===b[0].height))[c.length-1],d=c.filter(a=>a.bandwidth===r.bandwidth)[0]),l.leastPixelDiffSelector){let a=t.map(a=>(a.pixelDiff=Math.abs(a.width-h)+Math.abs(a.height-i),a));hK(a,(a,b)=>a.pixelDiff===b.pixelDiff?b.bandwidth-a.bandwidth:a.pixelDiff-b.pixelDiff),e=a[0]}let w=e||d||v||s||p[0]||o[0];if(w&&w.playlist){let a="sortedPlaylistReps";return e?a="leastPixelDiffRep":d?a="resolutionPlusOneRep":v?a="resolutionBestRep":s?a="bandwidthBestRep":p[0]&&(a="enabledPlaylistReps"),hH(`choosing ${hI(w)} using ${a} with options`,m),w.playlist}return hH("could not choose a playlist with options",m),null},hN=function(){let a=this.useDevicePixelRatio&&S.default.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(a=this.customPixelRatio),hM({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(hJ(this.tech_.el(),"width"),10)*a,playerHeight:parseInt(hJ(this.tech_.el(),"height"),10)*a,playerObjectFit:this.usePlayerObjectFit?hJ(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},hO=function(a){let{main:b,currentTime:c,bandwidth:d,duration:e,segmentDuration:f,timeUntilRebuffer:g,currentTimeline:h,syncController:i}=a,j=b.playlists.filter(a=>!gJ.isIncompatible(a)),k=j.filter(gJ.isEnabled);k.length||(k=j.filter(a=>!gJ.isDisabled(a)));let l=k.filter(gJ.hasAttribute.bind(null,"BANDWIDTH")).map(a=>{let b=i.getSyncPoint(a,e,h,c),j=gJ.estimateSegmentRequestTime(f,d,a);return{playlist:a,rebufferingImpact:j*(b?1:2)-g}}),m=l.filter(a=>a.rebufferingImpact<=0);return(hK(m,(a,b)=>hL(b.playlist,a.playlist)),m.length)?m[0]:(hK(l,(a,b)=>a.rebufferingImpact-b.rebufferingImpact),l[0]||null)};function hP(a){try{return new URL(a).pathname.split("/").slice(-2).join("/")}catch(a){return""}}let hQ=function(a,b,c){if(!a[c]){b.trigger({type:"usage",name:"vhs-608"});let d=c;/^cc708_/.test(c)&&(d="SERVICE"+c.split("_")[1]);let e=b.textTracks().getTrackById(d);if(e)a[c]=e;else{let e=b.options_.vhs&&b.options_.vhs.captionServices||{},f=c,g=c,h=!1,i=e[d];i&&(f=i.label,g=i.language,h=i.default),a[c]=b.addRemoteTextTrack({kind:"captions",id:d,default:h,label:f,language:g},!1).track}}},hR=function({inbandTextTracks:a,captionArray:b,timestampOffset:c}){if(!b)return;let d=S.default.WebKitDataCue||S.default.VTTCue;b.forEach(b=>{let e=b.stream;b.content?b.content.forEach(f=>{let g=new d(b.startTime+c,b.endTime+c,f.text);g.line=f.line,g.align="left",g.position=f.position,g.positionAlign="line-left",a[e].addCue(g)}):a[e].addCue(new d(b.startTime+c,b.endTime+c,b.text))})},hS=function(a){Object.defineProperties(a.frame,{id:{get:()=>(f4.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key)},value:{get:()=>(f4.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data)},privateData:{get:()=>(f4.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data)}})},hT={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},hU=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),hV=(a,b,c)=>{!a.metadataTrack_&&(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,f4.browser.IS_ANY_SAFARI||(a.metadataTrack_.inBandMetadataTrackDispatchType=b))},hW=function(a,b,c){let d,e;if(c&&c.cues)for(d=c.cues.length;d--;)(e=c.cues[d]).startTime>=a&&e.endTime<=b&&c.removeCue(e)},hX=function(a){let b=a.cues;if(!b)return;let c={};for(let d=b.length-1;d>=0;d--){let e=b[d],f=`${e.startTime}-${e.endTime}-${e.text}`;c[f]?a.removeCue(e):c[f]=e}},hY=function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;let c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(let e=0;e<c.length;e++){let f=c[e];if(f!==d[e]||a[f]!==b[f])return!1}return!0},hZ=function(a,b,c){b=b||[];let d=[],e=0;for(let f=0;f<b.length;f++){let g=b[f];if(a===g.timeline&&(d.push(f),(e+=g.duration)>c))return f}return 0===d.length?0:d[d.length-1]},h$=a=>"number"==typeof a&&isFinite(a),h_=1/60,h0=a=>{let{startOfSegment:b,duration:c,segment:d,part:e,playlist:{mediaSequence:f,id:g,segments:h=[]},mediaIndex:i,partIndex:j,timeline:k}=a,l=h.length-1,m="mediaIndex/partIndex increment";a.getMediaInfoForTime?m=`getMediaInfoForTime (${a.getMediaInfoForTime})`:a.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),a.independent&&(m+=` with independent ${a.independent}`);let n="number"==typeof j,o=a.segment.uri?"segment":"pre-segment",p=n?gt({preloadSegment:d})-1:0;return`${o} [${f+i}/${f+l}]`+(n?` part [${j}/${p}]`:"")+` segment start/end [${d.start} => ${d.end}]`+(n?` part start/end [${e.start} => ${e.end}]`:"")+` startOfSegment [${b}]`+` duration [${c}]`+` timeline [${k}]`+` selected by [${m}]`+` playlist [${g}]`},h1=a=>`${a}TimingInfo`,h2=({timelineChangeController:a,currentTimeline:b,segmentTimeline:c,loaderType:d,audioDisabled:e})=>{if(b===c)return!1;if("audio"===d){let b=a.lastTimelineChange({type:"main"});return!b||b.to!==c}if("main"===d&&e){let b=a.pendingTimelineChange({type:"audio"});return!b||b.to!==c}return!1},h3=a=>{let b=a.pendingSegment_;if(b&&h2({timelineChangeController:a.timelineChangeController_,currentTimeline:a.currentTimeline_,segmentTimeline:b.timeline,loaderType:a.loaderType_,audioDisabled:a.audioDisabled_})&&(a=>{if(!a)return!1;let b=a.pendingTimelineChange({type:"audio"}),c=a.pendingTimelineChange({type:"main"}),d=b&&c,e=d&&b.to!==c.to;return!!d&&-1!==b.from&&-1!==c.from&&!!e})(a.timelineChangeController_)){let b,c;if(b=a.timelineChangeController_.pendingTimelineChange({type:"audio"}),c=a.timelineChangeController_.pendingTimelineChange({type:"main"}),b&&c&&b.to<c.to)return void a.timelineChangeController_.trigger("audioTimelineBehind");a.timelineChangeController_.trigger("fixBadTimelineChange")}},h4=({segmentDuration:a,maxDuration:b})=>!!a&&Math.round(a)>b+ge,h5=({type:a,segment:b})=>{if(!b)return;let c=!!(b.key||b.map&&b.map.ke),d=!!(b.map&&!b.map.bytes),e=void 0===b.startOfSegment?b.start:b.startOfSegment;return{type:a||b.type,uri:b.resolvedUri||b.uri,start:e,duration:b.duration,isEncrypted:c,isMediaInitialization:d}};class h6 extends f4.EventTarget{constructor(a,b={}){if(super(),!a)throw TypeError("Initialization settings are required");if("function"!=typeof a.currentTime)throw TypeError("No currentTime getter specified");if(!a.mediaSource)throw TypeError("No MediaSource specified");this.bandwidth=a.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=a.hasPlayed,this.currentTime_=a.currentTime,this.seekable_=a.seekable,this.seeking_=a.seeking,this.duration_=a.duration,this.mediaSource_=a.mediaSource,this.vhs_=a.vhs,this.loaderType_=a.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=a.segmentMetadataTrack,this.goalBufferLength_=a.goalBufferLength,this.sourceType_=a.sourceType,this.sourceUpdater_=a.sourceUpdater,this.inbandTextTracks_=a.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=a.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=a.parse708captions,this.useDtsForTimestampOffset_=a.useDtsForTimestampOffset,this.captionServices_=a.captionServices,this.exactManifestTimings=a.exactManifestTimings,this.addMetadataToTextTrack=a.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=a.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=a.decrypter,this.syncController_=a.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=gb(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(a){a!==this.state_&&(this.logger_(`${this.state_} -> ${a}`),this.state_=a,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():h3(this)}),this.sourceUpdater_.on("codecschange",a=>{this.trigger((0,W.default)({type:"codecschange"},a))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():h3(this)}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",a=>{this.trigger((0,W.default)({type:"timelinechange"},a)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():h3(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():h3(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){var a;let b,c;return a={remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_},(b=new hu).currentTransmux=null,b.transmuxQueue=[],c=b.terminate,b.terminate=()=>(b.currentTransmux=null,b.transmuxQueue.length=0,c.call(b)),b.postMessage({action:"init",options:a}),b}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&S.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(a){this.audioDisabled_=!a,a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if("WAITING"!==this.state){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,S.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(a){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==a:(this.state="READY",!0)}error(a){return void 0!==a&&(this.logger_("error occurred:",a),this.error_=a),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&hy(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){let a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return gd();if("main"===this.loaderType_){let{hasAudio:b,hasVideo:c,isMuxed:d}=a;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(a,b=!1){if(!a)return null;let c=hc(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales}),d||a}segmentKey(a,b=!1){if(!a)return null;let c=hd(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});let e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();this.couldBeginLoading_()&&("READY"===this.state||"INIT"===this.state)&&(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(a,b={}){if(!a||this.playlist_&&this.playlist_.endList&&a.endList&&this.playlist_.uri===a.uri)return;let c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));let e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_(`playlist update [${e} => ${a.id||a.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(a,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${go(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri){null!==this.mediaIndex&&(a.endList||"number"!=typeof a.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}let f=a.mediaSequence-c.mediaSequence;if(this.logger_(`live window shift [${f}]`),null!==this.mediaIndex)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{let a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){let a=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=a}}d&&(d.mediaIndex-=f,d.mediaIndex<0?(d.mediaIndex=null,d.partIndex=null):(d.mediaIndex>=0&&(d.segment=a.segments[d.mediaIndex]),d.partIndex>=0&&d.segment.parts&&(d.part=d.segment.parts[d.partIndex]))),this.syncController_.saveExpiredSegmentInfo(c,a)}pause(){this.checkBufferTimeout_&&(S.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(a){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,a),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&hy(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;let a=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;"hls"!==this.sourceType_||a||(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(a,b,c=()=>{},d=!1){if(b===1/0&&(b=this.duration_()),b<=a)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let e=1,f=()=>{0==--e&&c()};for(let c in(d||!this.audioDisabled_)&&(e++,this.sourceUpdater_.removeAudio(a,b,f)),(d||"main"===this.loaderType_)&&(this.gopBuffer_=((a,b,c,d)=>{let e=Math.ceil((b-d)*bH.ONE_SECOND_IN_TS),f=Math.ceil((c-d)*bH.ONE_SECOND_IN_TS),g=a.slice(),h=a.length;for(;h--&&!(a[h].pts<=f););if(-1===h)return g;let i=h+1;for(;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g})(this.gopBuffer_,a,b,this.timeMapping_),e++,this.sourceUpdater_.removeVideo(a,b,f)),this.inbandTextTracks_)hW(a,b,this.inbandTextTracks_[c]);hW(a,b,this.segmentMetadataTrack_),f()}monitorBuffer_(){this.checkBufferTimeout_&&S.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=S.default.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&S.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=S.default.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;let a=this.chooseNextRequest_();if(!a)return;let b={segmentInfo:h5({type:this.loaderType_,segment:a})};this.trigger({type:"segmentselected",metadata:b}),"number"==typeof a.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline})),this.loadSegment_(a)}isEndOfStream_(a=this.mediaIndex,b=this.playlist_,c=this.partIndex){if(!b||!this.mediaSource_)return!1;let d="number"==typeof a&&b.segments[a],e=a+1===b.segments.length,f=!d||!d.parts||c+1===d.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&e&&f}chooseNextRequest_(){let a=this.buffered_(),b=go(a)||0,c=gp(a,this.currentTime_()),d=!this.hasPlayed_()&&c>=1,e=c>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||d||e)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);let g={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(g.isSyncRequest)g.mediaIndex=hZ(this.currentTimeline_,f,b),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${g.mediaIndex}`);else if(null!==this.mediaIndex){let a=f[this.mediaIndex],c="number"==typeof this.partIndex?this.partIndex:-1;g.startOfSegment=a.end?a.end:b,a.parts&&a.parts[c+1]?(g.mediaIndex=this.mediaIndex,g.partIndex=c+1):g.mediaIndex=this.mediaIndex+1}else{let a,c,d,e=this.fetchAtBuffer_?b:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${e}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${b}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){let b=this.getSyncInfoFromMediaSequenceSync_(e);if(!b){let a="No sync info found while using media sequence sync";return this.error({message:a,metadata:{errorType:f4.Error.StreamingFailedToSelectNextSegment,error:Error(a)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${b.start} --> ${b.end})`),a=b.segmentIndex,c=b.partIndex,d=b.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");let b=gJ.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:e,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});a=b.segmentIndex,c=b.partIndex,d=b.startTime}g.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${e}`:`currentTime ${e}`,g.mediaIndex=a,g.startOfSegment=d,g.partIndex=c,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${g.mediaIndex} `)}let h=f[g.mediaIndex],i=h&&"number"==typeof g.partIndex&&h.parts&&h.parts[g.partIndex];if(!h||"number"==typeof g.partIndex&&!i)return null;"number"!=typeof g.partIndex&&h.parts&&(g.partIndex=0,i=h.parts[0]);let j=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!c&&i&&!j&&!i.independent)if(0===g.partIndex){let a=f[g.mediaIndex-1],b=a.parts&&a.parts.length&&a.parts[a.parts.length-1];b&&b.independent&&(g.mediaIndex-=1,g.partIndex=a.parts.length-1,g.independent="previous segment")}else h.parts[g.partIndex-1].independent&&(g.partIndex-=1,g.independent="previous part");let k=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return g.mediaIndex>=f.length-1&&k&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,g.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(g))}getSyncInfoFromMediaSequenceSync_(a){if(!this.mediaSequenceSync_)return null;let b=Math.max(a,this.mediaSequenceSync_.start);a!==b&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${a} to ${b}`);let c=this.mediaSequenceSync_.getSyncInfoForTime(b);if(!c)return null;if(!c.isAppended)return c;let d=this.mediaSequenceSync_.getSyncInfoForTime(c.end);return d?(d.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),d):null}generateSegmentInfo_(a){let{independent:b,playlist:c,mediaIndex:d,startOfSegment:e,isSyncRequest:f,partIndex:g,forceTimestampOffset:h,getMediaInfoForTime:i}=a,j=c.segments[d],k="number"==typeof g&&j.parts[g],l={requestId:"segment-loader-"+Math.random(),uri:k&&k.resolvedUri||j.resolvedUri,mediaIndex:d,partIndex:k?g:null,isSyncRequest:f,startOfSegment:e,playlist:c,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:j.timeline,duration:k&&k.duration||j.duration,segment:j,part:k,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:i,independent:b},m=void 0!==h?h:this.isPendingTimestampOffset_;l.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:j.timeline,currentTimeline:this.currentTimeline_,startOfSegment:e,buffered:this.buffered_(),overrideCheck:m});let n=go(this.sourceUpdater_.audioBuffered());return"number"==typeof n&&(l.audioAppendStart=n-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(l.gopsToAlignWith=((a,b,c)=>{let d;if(null==b||!a.length)return[];let e=Math.ceil((b-c+3)*bH.ONE_SECOND_IN_TS);for(d=0;d<a.length&&!(a[d].pts>e);d++);return a.slice(d)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),l}timestampOffsetForSegment_(a){return(({segmentTimeline:a,currentTimeline:b,startOfSegment:c,buffered:d,overrideCheck:e})=>e||a!==b?a<b?c:d.length?d.end(d.length-1):c:null)(a)}earlyAbortWhenNeeded_(a){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)return;let b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=gJ.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=function(a,b,c=1){return((a.length?a.end(a.length-1):0)-b)/c}(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;if(e<=f)return;let g=hO({main:this.vhs_.playlists.main,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!g)return;let h=e-f-g.rebufferingImpact,i=.5;f<=ge&&(i=1),g.playlist&&g.playlist.uri!==this.playlist_.uri&&!(h<i)&&(this.bandwidth=g.playlist.attributes.BANDWIDTH*ho.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(a){this.logger_(`Aborting ${h0(a)}`),this.mediaRequestsAborted+=1}handleProgress_(a,b){this.earlyAbortWhenNeeded_(b.stats),this.checkForAbort_(b.requestId)||this.trigger("progress")}handleTrackInfo_(a,b){let{hasAudio:c,hasVideo:d}=b,e={segmentInfo:h5({type:this.loaderType_,segment:a}),trackInfo:{hasAudio:c,hasVideo:d}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:e}),this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},hY(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=b,this.currentMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()?this.processCallQueue_():h3(this)))}handleTimingInfo_(a,b,c,d){if(this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId))return;let e=this.pendingSegment_,f=h1(b);e[f]=e[f]||{},e[f][c]=d,this.logger_(`timinginfo: ${b} - ${c} - ${d}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():h3(this)}handleCaptions_(a,b){if(this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId))return;if(0===b.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b));let c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),d={};b.forEach(a=>{d[a.stream]=d[a.stream]||{startTime:1/0,captions:[],endTime:0};let b=d[a.stream];b.startTime=Math.min(b.startTime,a.startTime+c),b.endTime=Math.max(b.endTime,a.endTime+c),b.captions.push(a)}),Object.keys(d).forEach(a=>{let{startTime:b,endTime:e,captions:f}=d[a],g=this.inbandTextTracks_;this.logger_(`adding cues from ${b} -> ${e} for ${a}`),hQ(g,this.vhs_.tech_,a),hW(b,e,g[a]),hR({captionArray:f,inbandTextTracks:g,timestampOffset:c})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(a,b,c){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(c,b,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(a=>a()),this.metadataQueue_.caption.forEach(a=>a()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){let a=this.callQueue_;this.callQueue_=[],a.forEach(a=>a())}processLoadQueue_(){let a=this.loadQueue_;this.loadQueue_=[],a.forEach(a=>a())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;let a=this.pendingSegment_;return!!a&&(!this.getCurrentMediaInfo_()||!h2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(a=this.pendingSegment_){return a&&a.trackInfo||this.currentMediaInfo_}getMediaInfo_(a=this.pendingSegment_){return this.getCurrentMediaInfo_(a)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;let a=this.pendingSegment_,b=this.getCurrentMediaInfo_();if(!a||!b)return!1;let{hasAudio:c,hasVideo:d,isMuxed:e}=b;return!(d&&!a.videoTimingInfo||c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo||h2({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(a,b){if(this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){h3(this),this.callQueue_.push(this.handleData_.bind(this,a,b));return}let c=this.pendingSegment_;if(this.setTimeMapping_(c.timeline),this.updateMediaSecondsLoaded_(c.part||c.segment),"closed"!==this.mediaSource_.readyState){if(a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map),a.key&&this.segmentKey(a.key,!0),c.isFmp4=a.isFmp4,c.timingInfo=c.timingInfo||{},c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[h1(b.type)].start;else{let a,b=this.getCurrentMediaInfo_(),d="main"===this.loaderType_&&b&&b.hasVideo;d&&(a=c.videoTimingInfo.start),c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:d,firstVideoFrameTimeForData:a,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(c,b.type),this.updateSourceBufferTimestampOffset_(c),c.isSyncRequest){this.updateTimingInfoEnd_(c),this.syncController_.saveSegmentTimingInfo({segmentInfo:c,shouldSaveTimelineMapping:"main"===this.loaderType_});let a=this.chooseNextRequest_();if(a.mediaIndex!==c.mediaIndex||a.partIndex!==c.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}c.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(c,b)}}updateAppendInitSegmentStatus(a,b){"main"!==this.loaderType_||"number"!=typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)}getInitSegmentAndUpdateState_({type:a,initSegment:b,map:c,playlist:d}){if(c){let a=hc(c);if(this.activeInitSegmentId_===a)return null;b=this.initSegmentForMap(c,!0).bytes,this.activeInitSegmentId_=a}return b&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=d,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,b):null}handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c},d){let e=this.sourceUpdater_.audioBuffered(),f=this.sourceUpdater_.videoBuffered();e.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+gm(e).join(", ")),f.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+gm(f).join(", "));let g=e.length?e.start(0):0,h=e.length?e.end(e.length-1):0,i=f.length?f.start(0):0,j=f.length?f.end(f.length-1):0;if(h-g<=1&&j-i<=1){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${c.byteLength}, audio buffer: ${gm(e).join(", ")}, video buffer: ${gm(f).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:a,type:b,bytes:c}));let k=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${k}`),this.remove(0,k,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=S.default.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:a,type:b,bytes:c},d){if(d){if(22===d.code)return void this.handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",d),this.error({message:`${b} append of ${c.length}b failed for segment #${a.mediaIndex} in playlist ${a.playlist.id}`,metadata:{errorType:f4.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:a,type:b,initSegment:c,data:d,bytes:e}){if(!e){var f;let a,b,g=[d],h=d.byteLength;c&&(g.unshift(c),h+=c.byteLength),b=0,(f={bytes:h,segments:g}).bytes&&(a=new Uint8Array(f.bytes),f.segments.forEach(c=>{a.set(c,b),b+=c.byteLength})),e=a}let g={segmentInfo:h5({type:this.loaderType_,segment:a})};this.trigger({type:"segmentappendstart",metadata:g}),this.sourceUpdater_.appendBuffer({segmentInfo:a,type:b,bytes:e},this.handleAppendError_.bind(this,{segmentInfo:a,type:b,bytes:e}))}handleSegmentTimingInfo_(a,b,c){if(!this.pendingSegment_||b!==this.pendingSegment_.requestId)return;let d=this.pendingSegment_.segment,e=`${a}TimingInfo`;d[e]||(d[e]={}),d[e].transmuxerPrependedSeconds=c.prependedContentDuration||0,d[e].transmuxedPresentationStart=c.start.presentation,d[e].transmuxedDecodeStart=c.start.decode,d[e].transmuxedPresentationEnd=c.end.presentation,d[e].transmuxedDecodeEnd=c.end.decode,d[e].baseMediaDecodeTime=c.baseMediaDecodeTime}appendData_(a,b){let{type:c,data:d}=b;if(!d||!d.byteLength||"audio"===c&&this.audioDisabled_)return;let e=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null});this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:e,data:d})}loadSegment_(a){if(this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),"number"==typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){h3(this),this.loadQueue_.push(()=>{let b=(0,W.default)({},a,{forceTimestampOffset:!0});(0,W.default)(a,this.generateSegmentInfo_(b)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(a)});return}this.updateTransmuxerAndRequestSegment_(a)}updateTransmuxerAndRequestSegment_(a){this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));let b=this.createSimplifiedSegmentObj_(a),c=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex),d=null!==this.mediaIndex,e=a.timeline!==this.currentTimeline_&&a.timeline>0;this.logger_(`Requesting
${hP(a.uri)}
${h0(a)}`),b.map&&!b.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),a.abortRequests=(({xhr:a,xhrOptions:b,decryptionWorker:c,segment:d,abortFn:e,progressFn:f,trackInfoFn:g,timingInfoFn:h,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:j,id3Fn:k,captionsFn:l,isEndOfTimeline:m,endedTimelineFn:n,dataFn:o,doneFn:p,onTransmuxerLog:q,triggerSegmentEventFn:r})=>{let s=[],t=(({activeXhrs:a,decryptionWorker:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})=>{let o=0,p=!1;return(q,r)=>{if(!p){if(q)return p=!0,hB(a),l(q,r);if((o+=1)===a.length){let o=function(){if(r.encryptedBytes)return(({decryptionWorker:a,segment:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})=>{n({type:"segmentdecryptionstart"}),hG({id:b.requestId,key:b.key,encryptedBytes:b.encryptedBytes,decryptionWorker:a,segment:b,doneFn:l},a=>{b.bytes=a,n({type:"segmentdecryptioncomplete",segment:b}),hF({segment:b,bytes:b.bytes,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})})})({decryptionWorker:b,segment:r,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n});hF({segment:r,bytes:r.bytes,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k,doneFn:l,onTransmuxerLog:m,triggerSegmentEventFn:n})};if(r.endOfAllRequests=Date.now(),r.map&&r.map.encryptedBytes&&!r.map.bytes)return n({type:"segmentdecryptionstart",segment:r}),hG({decryptionWorker:b,id:r.requestId+"-init",encryptedBytes:r.map.encryptedBytes,key:r.map.key,segment:r,doneFn:l},b=>{r.map.bytes=b,n({type:"segmentdecryptioncomplete",segment:r}),hE(r,b=>{if(b)return hB(a),l(b,r);o()})});o()}}}})({activeXhrs:s,decryptionWorker:c,trackInfoFn:g,timingInfoFn:h,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:j,id3Fn:k,captionsFn:l,isEndOfTimeline:m,endedTimelineFn:n,dataFn:o,doneFn:p,onTransmuxerLog:q,triggerSegmentEventFn:r});if(d.key&&!d.key.bytes){let c=[d.key];d.map&&!d.map.bytes&&d.map.key&&d.map.key.resolvedUri===d.key.resolvedUri&&c.push(d.map.key);let e=gc(b,{uri:d.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),f=hD(d,c,t,r),g={uri:d.key.resolvedUri};r({type:"segmentkeyloadstart",segment:d,keyInfo:g});let h=a(e,f);s.push(h)}if(d.map&&!d.map.bytes){if(d.map.key&&(!d.key||d.key.resolvedUri!==d.map.key.resolvedUri)){let c=gc(b,{uri:d.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),e=hD(d,[d.map.key],t,r),f={uri:d.map.key.resolvedUri};r({type:"segmentkeyloadstart",segment:d,keyInfo:f});let g=a(c,e);s.push(g)}let c=gc(b,{uri:d.map.resolvedUri,responseType:"arraybuffer",headers:g8(d.map),requestType:"segment-media-initialization"}),e=(({segment:a,finishProcessingFn:b,triggerSegmentEventFn:c})=>(d,e)=>{let f=hC(d,e);if(f)return b(f,a);let g=new Uint8Array(e.response);if(c({type:"segmentloaded",segment:a}),a.map.key)return a.map.encryptedBytes=g,b(null,a);a.map.bytes=g,hE(a,function(c){if(c)return c.xhr=e,c.status=e.status,b(c,a);b(null,a)})})({segment:d,finishProcessingFn:t,triggerSegmentEventFn:r});r({type:"segmentloadstart",segment:d});let f=a(c,e);s.push(f)}let u=gc(b,{uri:d.part&&d.part.resolvedUri||d.resolvedUri,responseType:"arraybuffer",headers:g8(d),requestType:"segment"}),v=(({segment:a,finishProcessingFn:b,responseType:c,triggerSegmentEventFn:d})=>(e,f)=>{let g=hC(e,f);if(g)return b(g,a);d({type:"segmentloaded",segment:a});let h="arraybuffer"!==c&&f.responseText?(a=>{let b=new Uint8Array(new ArrayBuffer(a.length));for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer})(f.responseText.substring(a.lastReachedChar||0)):f.response;return a.stats={bandwidth:f.bandwidth,bytesReceived:f.bytesReceived||0,roundTripTime:f.roundTripTime||0},a.key?a.encryptedBytes=new Uint8Array(h):a.bytes=new Uint8Array(h),b(null,a)})({segment:d,finishProcessingFn:t,responseType:u.responseType,triggerSegmentEventFn:r});r({type:"segmentloadstart",segment:d});let w=a(u,v);w.addEventListener("progress",(({segment:a,progressFn:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:f,id3Fn:g,captionsFn:h,isEndOfTimeline:i,endedTimelineFn:j,dataFn:k})=>c=>{if(!c.target.aborted){let d,e;return a.stats=gc(a.stats,(d=c.target,(e={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-d.requestTime||0}).bytesReceived=c.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8e3),e)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),b(c,a)}})({segment:d,progressFn:f,trackInfoFn:g,timingInfoFn:h,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:j,id3Fn:k,captionsFn:l,isEndOfTimeline:m,endedTimelineFn:n,dataFn:o})),s.push(w);let x={};return s.forEach(a=>{a.addEventListener("loadend",(({loadendState:a,abortFn:b})=>c=>{c.target.aborted&&b&&!a.calledAbortFn&&(b(),a.calledAbortFn=!0)})({loadendState:x,abortFn:e}))}),()=>hB(s)})({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:b,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c||d&&e,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:b,level:c,stream:d})=>{this.logger_(`${h0(a)} logged from transmuxer stream ${d} as a ${c}: ${b}`)},triggerSegmentEventFn:({type:a,segment:b,keyInfo:c,trackInfo:d,timingInfo:e})=>{let f={segmentInfo:h5({segment:b})};c&&(f.keyInfo=c),d&&(f.trackInfo=d),e&&(f.timingInfo=e),this.trigger({type:a,metadata:f})}})}trimBackBuffer_(a){var b,c,d;let e,f=(b=this.seekable_(),c=this.currentTime_(),d=this.playlist_.targetDuration||10,e=c-ho.BACK_BUFFER_LENGTH,b.length&&(e=Math.max(e,b.start(0))),Math.min(c-d,e));f>0&&this.remove(0,f)}createSimplifiedSegmentObj_(a){let b=a.segment,c=a.part,d=a.segment.key||a.segment.map&&a.segment.map.key,e=a.segment.map&&!a.segment.map.bytes,f={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part,type:this.loaderType_,start:a.startOfSegment,duration:a.duration,isEncrypted:d,isMediaInitialization:e},g=a.playlist.segments[a.mediaIndex-1];if(g&&g.timeline===b.timeline&&(g.videoTimingInfo?f.baseStartTime=g.videoTimingInfo.transmuxedDecodeEnd:g.audioTimingInfo&&(f.baseStartTime=g.audioTimingInfo.transmuxedDecodeEnd)),b.key){let c=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);f.key=this.segmentKey(b.key),f.key.iv=c}return b.map&&(f.map=this.initSegmentForMap(b.map)),f}saveTransferStats_(a){this.mediaRequests+=1,a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)}saveBandwidthRelatedStats_(a,b){if(this.pendingSegment_.byteLength=b.bytesReceived,a<h_)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${a} is less than the min to record ${h_}`);let c={bandwidthInfo:{from:this.bandwidth,to:b.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:c}),this.bandwidth=b.bandwidth,this.roundTrip=b.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(a,b,c){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));if(this.saveTransferStats_(b.stats),!this.pendingSegment_||b.requestId!==this.pendingSegment_.requestId)return;if(a)return(this.pendingSegment_=null,this.state="READY",-102===a.code)?void 0:(this.pause(),-101===a.code)?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error"));let d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats),d.endOfAllRequests=b.endOfAllRequests,c.gopInfo&&(this.gopBuffer_=((a,b,c)=>{if(!b.length)return a;if(c)return b.slice();let d=b[0].pts,e=0;for(;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)})(this.gopBuffer_,c.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(d)}setTimeMapping_(a){let b=this.syncController_.mappingForTimeline(a);null!==b&&(this.timeMapping_=b)}updateMediaSecondsLoaded_(a){"number"==typeof a.start&&"number"==typeof a.end?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration}shouldUpdateTransmuxerTimestampOffset_(a){return null!==a&&("main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:a,playlist:b,mediaIndex:c,firstVideoFrameTimeForData:d,currentVideoTimestampOffset:e,useVideoTimingInfo:f,videoTimingInfo:g,audioTimingInfo:h}){if(void 0!==a)return a;if(!f)return h.start;let i=b.segments[c-1];return 0!==c&&i&&void 0!==i.start&&i.end===d+e?g.start:d}waitForAppendsToComplete_(a){let b=this.getCurrentMediaInfo_(a);if(!b){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}let{hasAudio:c,hasVideo:d,isMuxed:e}=b,f="main"===this.loaderType_&&d,g=!this.audioDisabled_&&c&&!e;if(a.waitingOnAppends=0,!a.hasAppendedData_){a.timingInfo||"number"!=typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),this.checkAppendsDone_(a);return}f&&a.waitingOnAppends++,g&&a.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a))}checkAppendsDone_(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(a){var b,c;let d=(b=this.loaderType_,c=this.getCurrentMediaInfo_(),"main"===b&&c&&a?a.hasAudio||a.hasVideo?c.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!c.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);return!!d&&(this.error({message:d,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(a){if(null===a.timestampOffset||"number"!=typeof a.timingInfo.start||a.changedTimestampOffset||"main"!==this.loaderType_)return;let b=!1;a.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a.segment.videoTimingInfo,audioTimingInfo:a.segment.audioTimingInfo,timingInfo:a.timingInfo}),a.changedTimestampOffset=!0,a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0),a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0),b&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a,audioTimingInfo:b,timingInfo:c}){return this.useDtsForTimestampOffset_?a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:b&&"number"==typeof b.transmuxedDecodeStart?b.transmuxedDecodeStart:c.start:c.start}updateTimingInfoEnd_(a){a.timingInfo=a.timingInfo||{};let b=this.getMediaInfo_(),c="main"===this.loaderType_&&b&&b.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo;c&&(a.timingInfo.end="number"==typeof c.end?c.end:c.start+a.duration)}handleAppendsDone_(){if(this.pendingSegment_){let a={segmentInfo:h5({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:a})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}let a=this.pendingSegment_;a.part&&a.part.syncInfo?a.part.syncInfo.markAppended():a.segment.syncInfo&&a.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(a),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});let b=((a,b)=>{var c;let d;if("hls"!==b)return null;let e=(c={audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo},d=0,["video","audio"].forEach(function(a){let b,e=c[`${a}TimingInfo`];if(!e)return;let{start:f,end:g}=e;"bigint"==typeof f||"bigint"==typeof g?b=S.default.BigInt(g)-S.default.BigInt(f):"number"==typeof f&&"number"==typeof g&&(b=g-f),void 0!==b&&b>d&&(d=b)}),"bigint"==typeof d&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),d);if(!e)return null;let f=a.playlist.targetDuration,g=h4({segmentDuration:e,maxDuration:2*f}),h=h4({segmentDuration:e,maxDuration:f}),i=`Segment with index ${a.mediaIndex} from playlist ${a.playlist.id} has a duration of ${e} when the reported duration is ${a.duration} and the target duration is ${f}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return g||h?{severity:g?"warn":"info",message:i}:null})(a,this.sourceType_);if(b&&("warn"===b.severity?f4.log.warn(b.message):this.logger_(b.message)),this.recordThroughput_(a),this.pendingSegment_=null,this.state="READY",a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${h0(a)}`);this.logger_(`Appended ${h0(a)}`),this.addSegmentMetadataCue_(a),this.fetchAtBuffer_=!0,this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline})),this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate");let c=a.segment,d=a.part,e=c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration,f=d&&d.end&&this.currentTime_()-d.end>3*a.playlist.partTargetDuration;if(e||f){this.logger_(`bad ${e?"segment":"part"} ${h0(a)}`),this.resetEverything();return}null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(a){if(a.duration<h_)return void this.logger_(`Ignoring segment's throughput because its duration of ${a.duration} is less than the min to record ${h_}`);let b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8e3);this.throughput.rate+=(d-b)/++this.throughput.count}addSegmentMetadataCue_(a){if(!this.segmentMetadataTrack_)return;let b=a.segment,c=b.start,d=b.end;if(!h$(c)||!h$(d))return;hW(c,d,this.segmentMetadataTrack_);let e=S.default.WebKitDataCue||S.default.VTTCue,f={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,programDateTime:b.programDateTime,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d},g=new e(c,d,JSON.stringify(f));g.value=f,this.segmentMetadataTrack_.addCue(g)}}function h7(){}let h8=function(a){return"string"!=typeof a?a:a.replace(/./,a=>a.toUpperCase())},h9=["video","audio"],ia=(a,b)=>{let c=b[`${a}Buffer`];return c&&c.updating||b.queuePending[a]},ib=(a,b)=>{if(0===b.queue.length)return;let c=0,d=b.queue[c];if("mediaSource"===d.type){b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),ib("audio",b),ib("video",b));return}if("mediaSource"!==a&&!(!b.ready()||"closed"===b.mediaSource.readyState||ia(a,b))){if(d.type!==a){if(null===(c=((a,b)=>{for(let c=0;c<b.length;c++){let d=b[c];if("mediaSource"===d.type)break;if(d.type===a)return c}return null})(a,b.queue)))return;d=b.queue[c]}if(b.queue.splice(c,1),b.queuePending[a]=d,d.action(a,b),!d.doneFn){b.queuePending[a]=null,ib(a,b);return}}},ic=(a,b)=>{let c=b[`${a}Buffer`],d=h8(a);c&&(c.removeEventListener("updateend",b[`on${d}UpdateEnd_`]),c.removeEventListener("error",b[`on${d}Error_`]),b.codecs[a]=null,b[`${a}Buffer`]=null)},id=(a,b)=>a&&b&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,b),ie=(a,b)=>(c,d)=>{let e=d[`${c}Buffer`];if(id(d.mediaSource,e)){d.logger_(`Removing ${a} to ${b} from ${c}Buffer`);try{e.remove(a,b)}catch(e){d.logger_(`Remove ${a} to ${b} from ${c}Buffer failed`)}}},ig=a=>(b,c)=>{let d=c[`${b}Buffer`];id(c.mediaSource,d)&&(c.logger_(`Setting ${b}timestampOffset to ${a}`),d.timestampOffset=a)},ih=a=>(b,c)=>{a()},ii=({type:a,sourceUpdater:b,action:c,doneFn:d,name:e})=>{b.queue.push({type:a,action:c,doneFn:d,name:e}),ib(a,b)},ij=(a,b)=>c=>{let d=function(a){if(0===a.length)return"Buffered Ranges are empty";let b="Buffered Ranges: \n";for(let c=0;c<a.length;c++){let d=a.start(c),e=a.end(c);b+=`${d} --> ${e}. Duration (${e-d})
`}return b}(b[`${a}Buffered`]());if(b.logger_(`received "updateend" event for ${a} Source Buffer: `,d),b.queuePending[a]){let c=b.queuePending[a].doneFn;b.queuePending[a]=null,c&&c(b[`${a}Error_`])}ib(a,b)};class ik extends f4.EventTarget{constructor(a){super(),this.mediaSource=a,this.sourceopenListener_=()=>ib("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=gb("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=ij("video",this),this.onAudioUpdateEnd_=ij("audio",this),this.onVideoError_=a=>{this.videoError_=a},this.onAudioError_=a=>{this.audioError_=a},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(a,b){let c,d;ii({type:"mediaSource",sourceUpdater:this,action:(c=a,d=b,a=>{let b=h8(c),e=ao(d);a.logger_(`Adding ${c}Buffer with codec ${d} to mediaSource`);let f=a.mediaSource.addSourceBuffer(e);f.addEventListener("updateend",a[`on${b}UpdateEnd_`]),f.addEventListener("error",a[`on${b}Error_`]),a.codecs[c]=d,a[`${c}Buffer`]=f}),name:"addSourceBuffer"})}abort(a){ii({type:a,sourceUpdater:this,action:(a,b)=>{if("open"!==b.mediaSource.readyState)return;let c=b[`${a}Buffer`];if(id(b.mediaSource,c)){b.logger_(`calling abort on ${a}Buffer`);try{c.abort()}catch(b){f4.log.warn(`Failed to abort on ${a}Buffer`,b)}}},name:"abort"})}removeSourceBuffer(a){let b;this.canRemoveSourceBuffer()?ii({type:"mediaSource",sourceUpdater:this,action:(b=a,a=>{let c=a[`${b}Buffer`];if(ic(b,a),id(a.mediaSource,c)){a.logger_(`Removing ${b}Buffer with codec ${a.codecs[b]} from mediaSource`);try{a.mediaSource.removeSourceBuffer(c)}catch(a){f4.log.warn(`Failed to removeSourceBuffer ${b}Buffer`,a)}}}),name:"removeSourceBuffer"}):f4.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!f4.browser.IS_FIREFOX&&S.default.MediaSource&&S.default.MediaSource.prototype&&"function"==typeof S.default.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return S.default.SourceBuffer&&S.default.SourceBuffer.prototype&&"function"==typeof S.default.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(a,b){let c;this.canChangeType()?ii({type:a,sourceUpdater:this,action:(c=b,(a,b)=>{let d=b[`${a}Buffer`],e=ao(c);if(!id(b.mediaSource,d))return;let f=c.substring(0,c.indexOf(".")),g=b.codecs[a];if(g.substring(0,g.indexOf("."))===f)return;let h={codecsChangeInfo:{from:g,to:c}};b.trigger({type:"codecschange",metadata:h}),b.logger_(`changing ${a}Buffer codec from ${g} to ${c}`);try{d.changeType(e),b.codecs[a]=c}catch(c){h.errorType=f4.Error.StreamingCodecsChangeError,h.error=c,c.metadata=h,b.error_=c,b.trigger("error"),f4.log.warn(`Failed to changeType on ${a}Buffer`,c)}}),name:"changeType"}):f4.log.error("changeType is not supported!")}addOrChangeSourceBuffers(a){if(!a||"object"!=typeof a||0===Object.keys(a).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(b=>{let c=a[b];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(b,c);this.canChangeType()&&this.changeType(b,c)})}appendBuffer(a,b){let c,d,e,{segmentInfo:f,type:g,bytes:h}=a;if(this.processedAppend_=!0,"audio"===g&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([a,b]),this.logger_(`delayed audio append of ${h.length} until video append`);return}if(ii({type:g,sourceUpdater:this,action:(c=h,d=f||{mediaIndex:-1},e=b,(a,b)=>{let f=b[`${a}Buffer`];if(id(b.mediaSource,f)){b.logger_(`Appending segment ${d.mediaIndex}'s ${c.length} bytes to ${a}Buffer`);try{f.appendBuffer(c)}catch(c){b.logger_(`Error with code ${c.code} `+(22===c.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${d.mediaIndex} to ${a}Buffer`),b.queuePending[a]=null,e(c)}}}),doneFn:b,name:"appendBuffer"}),"video"===g){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;let a=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,a.forEach(a=>{this.appendBuffer.apply(this,a)})}}audioBuffered(){return id(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:gd()}videoBuffered(){return id(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:gd()}buffered(){let a=id(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=id(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():gk(this.audioBuffered(),this.videoBuffered())}setDuration(a,b=h7){let c;ii({type:"mediaSource",sourceUpdater:this,action:(c=a,a=>{a.logger_(`Setting mediaSource duration to ${c}`);try{a.mediaSource.duration=c}catch(a){f4.log.warn("Failed to set media source duration",a)}}),name:"duration",doneFn:b})}endOfStream(a=null,b=h7){let c;"string"!=typeof a&&(a=void 0),ii({type:"mediaSource",sourceUpdater:this,action:(c=a,a=>{if("open"===a.mediaSource.readyState){a.logger_(`Calling mediaSource endOfStream(${c||""})`);try{a.mediaSource.endOfStream(c)}catch(a){f4.log.warn("Failed to call media source endOfStream",a)}}}),name:"endOfStream",doneFn:b})}removeAudio(a,b,c=h7){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?ii({type:"audio",sourceUpdater:this,action:ie(a,b),doneFn:c,name:"remove"}):c()}removeVideo(a,b,c=h7){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?ii({type:"video",sourceUpdater:this,action:ie(a,b),doneFn:c,name:"remove"}):c()}updating(){return!!(ia("audio",this)||ia("video",this))}audioTimestampOffset(a){return void 0!==a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(ii({type:"audio",sourceUpdater:this,action:ig(a),name:"timestampOffset"}),this.audioTimestampOffset_=a),this.audioTimestampOffset_}videoTimestampOffset(a){return void 0!==a&&this.videoBuffer&&this.videoTimestampOffset_!==a&&(ii({type:"video",sourceUpdater:this,action:ig(a),name:"timestampOffset"}),this.videoTimestampOffset_=a),this.videoTimestampOffset_}audioQueueCallback(a){this.audioBuffer&&ii({type:"audio",sourceUpdater:this,action:ih(a),name:"callback"})}videoQueueCallback(a){this.videoBuffer&&ii({type:"video",sourceUpdater:this,action:ih(a),name:"callback"})}dispose(){this.trigger("dispose"),h9.forEach(a=>{this.abort(a),this.canRemoveSourceBuffer()?this.removeSourceBuffer(a):this[`${a}QueueCallback`](()=>ic(a,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}let il=a=>decodeURIComponent(escape(String.fromCharCode.apply(null,a))),im=new Uint8Array("\n\n".split("").map(a=>a.charCodeAt(0)));class io extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class ip extends h6{constructor(a,b={}){super(a,b),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=a.featuresNativeTextTracks,this.loadVttJs=a.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return gd();let a=this.subtitlesTrack_.cues;return gd([[a[0].startTime,a[a.length-1].startTime]])}initSegmentForMap(a,b=!1){if(!a)return null;let c=hc(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){let b=new Uint8Array(im.byteLength+a.bytes.byteLength);b.set(a.bytes),b.set(im,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b}}return d||a}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(a){return void 0===a||(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(a,b){hW(a,b,this.subtitlesTrack_)}fillBuffer_(){let a=this.chooseNextRequest_();if(a){if(null===this.syncController_.timestampOffsetForTimeline(a.timeline)){let a=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a}stopForError(a){this.error(a),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(a,b,c){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(b.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(a){-101===a.code&&this.handleTimeout_(),-102===a.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(a);return}let d=this.pendingSegment_,e=c.mp4VttCues&&c.mp4VttCues.length;e&&(d.mp4VttCues=c.mp4VttCues),this.saveBandwidthRelatedStats_(d.duration,b.stats),b.key&&this.segmentKey(b.key,!0),this.state="APPENDING",this.trigger("appending");let f=d.segment;if(f.map&&(f.map.bytes=b.map.bytes),d.bytes=b.bytes,"function"!=typeof S.default.WebVTT&&"function"==typeof this.loadVttJs){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(a,b,c),()=>this.stopForError({message:"Error loading vtt.js"}));return}f.requested=!0;try{this.parseVTTCues_(d)}catch(a){this.stopForError({message:a.message,metadata:{errorType:f4.Error.StreamingVttParserError,error:a}});return}if(e||this.updateTimeMapping_(d,this.syncController_.timelines[d.timeline],this.playlist_),d.cues.length?d.timingInfo={start:d.cues[0].startTime,end:d.cues[d.cues.length-1].endTime}:d.timingInfo={start:d.startOfSegment,end:d.startOfSegment+d.duration},d.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}d.byteLength=d.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,d.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new S.default.VTTCue(a.startTime,a.endTime,a.text):a)}),hX(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(a,b){let c=a&&"vtt"===a.type,d=b&&"text"===b.type;c&&d&&super.handleData_(a,b)}updateTimingInfoEnd_(){}parseMp4VttCues_(a){let b=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();a.mp4VttCues.forEach(c=>{let d=c.start+b,e=c.end+b,f=new S.default.VTTCue(d,e,c.cueText);c.settings&&c.settings.split(" ").forEach(a=>{let b=a.split(":"),c=b[0],d=b[1];f[c]=isNaN(d)?d:Number(d)}),a.cues.push(f)})}parseVTTCues_(a){let b,c=!1;if("function"!=typeof S.default.WebVTT)throw new io;if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},a.mp4VttCues)return void this.parseMp4VttCues_(a);"function"==typeof S.default.TextDecoder?b=new S.default.TextDecoder("utf8"):(b=S.default.WebVTT.StringDecoder(),c=!0);let d=new S.default.WebVTT.Parser(S.default,S.default.vttjs,b);if(d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=b=>{a.timestampmap=b},d.onparsingerror=a=>{f4.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){let b=a.segment.map.bytes;c&&(b=il(b)),d.parse(b)}let e=a.bytes;c&&(e=il(e)),d.parse(e),d.flush()}updateTimeMapping_(a,b,c){let d=a.segment;if(!b)return;if(!a.cues.length){d.empty=!0;return}let{MPEGTS:e,LOCAL:f}=a.timestampmap,g=e/bH.ONE_SECOND_IN_TS-f+b.mapping;if(a.cues.forEach(a=>{let c=a.endTime-a.startTime,d=this.handleRollover_(a.startTime+g,b.time);a.startTime=Math.max(d,0),a.endTime=Math.max(d+c,0)}),!c.syncInfo){let b=a.cues[0].startTime,e=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(b,e-d.duration)}}}handleRollover_(a,b){let c;if(null===b)return a;let d=a*bH.ONE_SECOND_IN_TS,e=b*bH.ONE_SECOND_IN_TS;for(c=e<d?-0x200000000:0x200000000;Math.abs(d-e)>0x100000000;)d+=c;return d/bH.ONE_SECOND_IN_TS}}let iq=function(a,b){let c=a.cues;for(let a=0;a<c.length;a++){let d=c[a];if(b>=d.adStartTime&&b<=d.adEndTime)return d}return null},ir=function(a,b,c=0){let d;if(!a.segments)return;let e=c;for(let c=0;c<a.segments.length;c++){let f=a.segments[c];if(d||(d=iq(b,e+f.duration/2)),d){if("cueIn"in f){d.endTime=e,d.adEndTime=e,e+=f.duration,d=null;continue}if(e<d.endTime){e+=f.duration;continue}d.endTime+=f.duration}else if("cueOut"in f&&((d=new S.default.VTTCue(e,e+f.duration,f.cueOut)).adStartTime=e,d.adEndTime=e+parseFloat(f.cueOut),b.addCue(d)),"cueOutCont"in f){let[a,c]=f.cueOutCont.split("/").map(parseFloat);(d=new S.default.VTTCue(e,e+f.duration,"")).adStartTime=e-a,d.adEndTime=d.adStartTime+c,b.addCue(d)}e+=f.duration}};class is{constructor({start:a,end:b,segmentIndex:c,partIndex:d=null,appended:e=!1}){this.start_=a,this.end_=b,this.segmentIndex_=c,this.partIndex_=d,this.appended_=e}isInRange(a){return a>=this.start&&a<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class it{constructor(a,b=[]){this.segmentSyncInfo_=a,this.partsSyncInfo_=b}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(a=>a.resetAppendedStatus())}}class iu{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(a=>a.resetAppendStatus())}update(a,b){let{mediaSequence:c,segments:d}=a;if(this.isReliable_=this.isReliablePlaylist_(c,d),this.isReliable_)return this.updateStorage_(d,c,this.calculateBaseTime_(c,d,b))}getSyncInfoForTime(a){for(let{segmentSyncInfo:b,partsSyncInfo:c}of this.storage_.values())if(c.length){for(let b of c)if(b.isInRange(a))return b}else if(b.isInRange(a))return b;return null}getSyncInfoForMediaSequence(a){return this.storage_.get(a)}updateStorage_(a,b,c){let d=new Map,e="\n",f=c,g=b;this.start_=f,a.forEach((a,b)=>{let c=this.storage_.get(g),h=f,i=h+a.duration,j=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),k=new is({start:h,end:i,appended:j,segmentIndex:b});a.syncInfo=k;let l=f,m=(a.parts||[]).map((a,d)=>{let f=l,h=l+a.duration,i=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[d]&&c.partsSyncInfo[d].isAppended),j=new is({start:f,end:h,appended:i,segmentIndex:b,partIndex:d});return l=h,e+=`Media Sequence: ${g}.${d} | Range: ${f} --> ${h} | Appended: ${i}
`,a.syncInfo=j,j});d.set(g,new it(k,m)),e+=`${hP(a.resolvedUri)} | Media Sequence: ${g} | Range: ${h} --> ${i} | Appended: ${j}
`,g++,f=i}),this.end_=f,this.storage_=d,this.diagnostics_=e}calculateBaseTime_(a,b,c){if(!this.storage_.size)return 0;if(this.storage_.has(a))return this.storage_.get(a).segmentSyncInfo.start;let d=Math.min(...this.storage_.keys());if(a<d){let c=d-a,e=this.storage_.get(d).segmentSyncInfo.start;for(let a=0;a<c;a++)e-=b[a].duration;return e}return c}isReliablePlaylist_(a,b){return null!=a&&Array.isArray(b)&&b.length}}class iv extends iu{constructor(a){super(),this.parent_=a}calculateBaseTime_(a,b,c){if(!this.storage_.size){let b=this.parent_.getSyncInfoForMediaSequence(a);return b?b.segmentSyncInfo.start:0}return super.calculateBaseTime_(a,b,c)}}let iw=[{name:"VOD",run:(a,b,c,d,e)=>c!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(a,b,c,d,e,f)=>{let g=a.getMediaSequenceSync(f);if(!g||!g.isReliable)return null;let h=g.getSyncInfoForTime(e);return h?{time:h.start,partIndex:h.partIndex,segmentIndex:h.segmentIndex}:null}},{name:"ProgramDateTime",run:(a,b,c,d,e)=>{if(!Object.keys(a.timelineToDatetimeMappings).length)return null;let f=null,g=null,h=gr(b);e=e||0;for(let c=0;c<h.length;c++){let d=b.endList||0===e?c:h.length-(c+1),i=h[d],j=i.segment,k=a.timelineToDatetimeMappings[j.timeline];if(!k||!j.dateTimeObject)continue;let l=j.dateTimeObject.getTime()/1e3+k;if(j.parts&&"number"==typeof i.partIndex)for(let a=0;a<i.partIndex;a++)l+=j.parts[a].duration;let m=Math.abs(e-l);if(null!==g&&(0===m||g<m))break;g=m,f={time:l,segmentIndex:i.segmentIndex,partIndex:i.partIndex}}return f}},{name:"Segment",run:(a,b,c,d,e)=>{let f=null,g=null;e=e||0;let h=gr(b);for(let a=0;a<h.length;a++){let c=b.endList||0===e?a:h.length-(a+1),i=h[c],j=i.segment,k=i.part&&i.part.start||j&&j.start;if(j.timeline===d&&void 0!==k){let a=Math.abs(e-k);if(null!==g&&g<a)break;(!f||null===g||g>=a)&&(g=a,f={time:k,segmentIndex:i.segmentIndex,partIndex:i.partIndex})}}return f}},{name:"Discontinuity",run:(a,b,c,d,e)=>{let f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length){let c=null;for(let d=0;d<b.discontinuityStarts.length;d++){let g=b.discontinuityStarts[d],h=b.discontinuitySequence+d+1,i=a.discontinuities[h];if(i){let a=Math.abs(e-i.time);if(null!==c&&c<a)break;(!f||null===c||c>=a)&&(c=a,f={time:i.time,segmentIndex:g,partIndex:null})}}}return f}},{name:"Playlist",run:(a,b,c,d,e)=>b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null}:null}];class ix extends f4.EventTarget{constructor(a={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const b=new iu,c=new iv(b),d=new iv(b);this.mediaSequenceStorage_={main:b,audio:c,vtt:d},this.logger_=gb("SyncController")}getMediaSequenceSync(a){return this.mediaSequenceStorage_[a]||null}getSyncPoint(a,b,c,d,e){if(b!==1/0)return iw.find(({name:a})=>"VOD"===a).run(this,a,b);let f=this.runStrategies_(a,b,c,d,e);if(!f.length)return null;for(let b of f){let{syncPoint:c,strategy:e}=b,{segmentIndex:f,time:g}=c;if(f<0)continue;let h=g+a.segments[f].duration;if(this.logger_(`Strategy: ${e}. Current time: ${d}. selected segment: ${f}. Time: [${g} -> ${h}]}`),d>=g&&d<h)return this.logger_("Found sync point with exact match: ",c),c}return this.selectSyncPoint_(f,{key:"time",value:d})}getExpiredTime(a,b){if(!a||!a.segments)return null;let c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;let d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return d.segmentIndex>0&&(d.time*=-1),Math.abs(d.time+gz({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:d.segmentIndex,endIndex:0}))}runStrategies_(a,b,c,d,e){let f=[];for(let g=0;g<iw.length;g++){let h=iw[g],i=h.run(this,a,b,c,d,e);i&&(i.strategy=h.name,f.push({strategy:h.name,syncPoint:i}))}return f}selectSyncPoint_(a,b){let c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy;for(let f=1;f<a.length;f++){let g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_(`syncPoint for [${b.key}: ${b.value}] chosen with strategy [${e}]: [time:${c.time}, segmentIndex:${c.segmentIndex}`+("number"==typeof c.partIndex?`,partIndex:${c.partIndex}`:"")+"]"),c}saveExpiredSegmentInfo(a,b){let c=b.mediaSequence-a.mediaSequence;if(c>86400)return void f4.log.warn(`Not saving expired segment info. Media sequence gap ${c} is too large.`);for(let d=c-1;d>=0;d--){let c=a.segments[d];if(c&&void 0!==c.start){b.syncInfo={mediaSequence:a.mediaSequence+d,time:c.start},this.logger_(`playlist refresh sync: [time:${b.syncInfo.time}, mediaSequence: ${b.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(a){if(this.timelineToDatetimeMappings={},a.segments&&a.segments.length&&a.segments[0].dateTimeObject){let b=a.segments[0],c=b.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[b.timeline]=-c}}saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:b}){let c=this.calculateSegmentTimeMapping_(a,a.timingInfo,b),d=a.segment;c&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:d.start}));let e=d.dateTimeObject;d.discontinuity&&b&&e&&(this.timelineToDatetimeMappings[d.timeline]=-(e.getTime()/1e3))}timestampOffsetForTimeline(a){return void 0===this.timelines[a]?null:this.timelines[a].time}mappingForTimeline(a){return void 0===this.timelines[a]?null:this.timelines[a].mapping}calculateSegmentTimeMapping_(a,b,c){let d,e,f=a.segment,g=a.part,h=this.timelines[a.timeline];if("number"==typeof a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${a.timeline}: [time: ${h.time}] [mapping: ${h.mapping}]`)),d=a.startOfSegment,e=b.end+h.mapping;else{if(!h)return!1;d=b.start+h.mapping,e=b.end+h.mapping}return g&&(g.start=d,g.end=e),(!f.start||d<f.start)&&(f.start=d),f.end=e,!0}saveDiscontinuitySyncInfo_(a){let b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(let d=0;d<b.discontinuityStarts.length;d++){let e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){let d;d=g<0?c.start-gz({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:e}):c.end+gz({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:e}),this.discontinuities[f]={time:d,accuracy:h}}}}dispose(){this.trigger("dispose"),this.off()}}class iy extends f4.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(a){this.pendingTimelineChanges_[a]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:a,from:b,to:c}){return"number"==typeof b&&"number"==typeof c&&(this.pendingTimelineChanges_[a]={type:a,from:b,to:c},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]}lastTimelineChange({type:a,from:b,to:c}){return"number"==typeof b&&"number"==typeof c&&(this.lastTimelineChanges_[a]={type:a,from:b,to:c},delete this.pendingTimelineChanges_[a],this.trigger({type:"timelinechange",metadata:{timelineChangeInfo:{from:b,to:c}}})),this.lastTimelineChanges_[a]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}var iz=hr(hs(ht(function(){var b,c,d=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2==arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}();let e=function(){let a,b,c,d,e,f,g,h,i=[[[],[],[],[],[]],[[],[],[],[],[]]],j=i[0],k=i[1],l=j[4],m=k[4],n=[],o=[];for(a=0;a<256;a++)o[(n[a]=a<<1^(a>>7)*283)^a]=a;for(b=c=0;!l[b];b^=d||1,c=o[c]||1)for(a=0,f=(f=c^c<<1^c<<2^c<<3^c<<4)>>8^255&f^99,l[b]=f,m[f]=b,h=0x1010101*n[e=n[d=n[b]]]^65537*e^257*d^0x1010100*b,g=257*n[f]^0x1010100*f;a<4;a++)j[a][b]=g=g<<24^g>>>8,k[a][f]=h=h<<24^h>>>8;for(a=0;a<5;a++)j[a]=j[a].slice(0),k[a]=k[a].slice(0);return i},f=null;class g{constructor(a){let b,c,d;f||(f=e()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];const g=this._tables[0][4],h=this._tables[1],i=a.length;let j=1;if(4!==i&&6!==i&&8!==i)throw Error("Invalid aes key size");const k=a.slice(0),l=[];for(this._key=[k,l],b=i;b<4*i+28;b++)d=k[b-1],(b%i==0||8===i&&b%i==4)&&(d=g[d>>>24]<<24^g[d>>16&255]<<16^g[d>>8&255]<<8^g[255&d],b%i==0&&(d=d<<8^d>>>24^j<<24,j=j<<1^(j>>7)*283)),k[b]=k[b-i]^d;for(c=0;b;c++,b--)d=k[3&c?b:b-4],b<=4||c<4?l[c]=d:l[c]=h[0][g[d>>>24]]^h[1][g[d>>16&255]]^h[2][g[d>>8&255]]^h[3][g[255&d]]}decrypt(a,b,c,d,e,f){let g,h,i,j,k=this._key[1],l=a^k[0],m=d^k[1],n=c^k[2],o=b^k[3],p=k.length/4-2,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(j=0;j<p;j++)g=s[l>>>24]^t[m>>16&255]^u[n>>8&255]^v[255&o]^k[q],h=s[m>>>24]^t[n>>16&255]^u[o>>8&255]^v[255&l]^k[q+1],i=s[n>>>24]^t[o>>16&255]^u[l>>8&255]^v[255&m]^k[q+2],o=s[o>>>24]^t[l>>16&255]^u[m>>8&255]^v[255&n]^k[q+3],q+=4,l=g,m=h,n=i;for(j=0;j<4;j++)e[(3&-j)+f]=w[l>>>24]<<24^w[m>>16&255]<<16^w[n>>8&255]<<8^w[255&o]^k[q++],g=l,l=m,m=n,n=o,o=g}}class h extends d{constructor(){super(d),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}let i=function(a){return a<<24|(65280&a)<<8|(0xff0000&a)>>8|a>>>24},j=function(a,b,c){let d,e,f,h,j,k,l,m,n,o=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),p=new g(Array.prototype.slice.call(b)),q=new Uint8Array(a.byteLength),r=new Int32Array(q.buffer);for(n=0,d=c[0],e=c[1],f=c[2],h=c[3];n<o.length;n+=4)j=i(o[n]),k=i(o[n+1]),l=i(o[n+2]),m=i(o[n+3]),p.decrypt(j,k,l,m,r,n),r[n]=i(r[n]^d),r[n+1]=i(r[n+1]^e),r[n+2]=i(r[n+2]^f),r[n+3]=i(r[n+3]^h),d=j,e=k,f=l,h=m;return q};class k{constructor(a,b,c,d){const e=k.STEP,f=new Int32Array(a.buffer),g=new Uint8Array(a.byteLength);let j=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(f.subarray(j,j+e),b,c,g)),j=e;j<f.length;j+=e)c=new Uint32Array([i(f[j-4]),i(f[j-3]),i(f[j-2]),i(f[j-1])]),this.asyncStream_.push(this.decryptChunk_(f.subarray(j,j+e),b,c,g));this.asyncStream_.push(function(){d(null,g.subarray(0,g.byteLength-g[g.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(a,b,c,d){return function(){let e=j(a,b,c);d.set(e,a.byteOffset)}}}var l="undefined"!=typeof globalThis?globalThis:a.g,m=(void 0!==l?l:"undefined"!=typeof self?self:{}).BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),255===(c=new Uint8Array((b=new Uint16Array([65484])).buffer,b.byteOffset,b.byteLength))[0]||c[0];let n=function(a){let b={};return Object.keys(a).forEach(c=>{let d=a[c];("function"===ArrayBuffer.isView?ArrayBuffer.isView(d):d&&d.buffer instanceof ArrayBuffer)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b};self.onmessage=function(a){let b=a.data;new k(new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4),function(a,c){self.postMessage(n({source:b.source,decrypted:c}),[c.buffer])})}})));let iA=a=>{let b=a.default?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(b="main-desc"),b},iB=(a,b)=>{a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},iC=(a,b)=>{b.activePlaylistLoader=a,a.load()},iD={AUDIO:(a,b)=>()=>{let{mediaTypes:{[a]:c},excludePlaylist:d}=b,e=c.activeTrack(),f=c.activeGroup(),g=(f.filter(a=>a.default)[0]||f[0]).id,h=c.tracks[g];if(e===h)return void d({error:{message:"Problem encountered loading the default audio track."}});for(let a in f4.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),c.tracks)c.tracks[a].enabled=c.tracks[a]===h;c.onTrackChanged()},SUBTITLES:(a,b)=>()=>{let{mediaTypes:{[a]:c}}=b;f4.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");let d=c.activeTrack();d&&(d.mode="disabled"),c.onTrackChanged()}},iE={AUDIO:(a,b,c)=>{if(!b)return;let{tech:d,requestOptions:e,segmentLoaders:{[a]:f}}=c;b.on("loadedmetadata",()=>{let a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",()=>{f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",iD[a](a,c))},SUBTITLES:(a,b,c)=>{let{tech:d,requestOptions:e,segmentLoaders:{[a]:f},mediaTypes:{[a]:g}}=c;b.on("loadedmetadata",()=>{let a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",()=>{f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",iD[a](a,c))}},iF={AUDIO:(a,b)=>{let{vhs:c,sourceType:d,segmentLoaders:{[a]:e},requestOptions:f,main:{mediaGroups:g},mediaTypes:{[a]:{groups:h,tracks:i,logger_:j}},mainPlaylistLoader:k}=b,l=gI(k.main);for(let e in(!g[a]||0===Object.keys(g[a]).length)&&(g[a]={main:{default:{default:!0}}},l&&(g[a].main.default.playlists=k.main.playlists)),g[a])for(let m in h[e]||(h[e]=[]),g[a][e]){let n,o=g[a][e][m];if(l?(j(`AUDIO group '${e}' label '${m}' is a main playlist`),o.isMainPlaylist=!0,n=null):n="vhs-json"===d&&o.playlists?new g4(o.playlists[0],c,f):o.resolvedUri?new g4(o.resolvedUri,c,f):o.playlists&&"dash"===d?new hn(o.playlists[0],c,f,k):null,o=gc({id:m,playlistLoader:n},o),iE[a](a,o.playlistLoader,b),h[e].push(o),void 0===i[m]){let a=new f4.AudioTrack({id:m,kind:iA(o),enabled:!1,language:o.language,default:o.default,label:m});i[m]=a}}e.on("error",iD[a](a,b))},SUBTITLES:(a,b)=>{let{tech:c,vhs:d,sourceType:e,segmentLoaders:{[a]:f},requestOptions:g,main:{mediaGroups:h},mediaTypes:{[a]:{groups:i,tracks:j}},mainPlaylistLoader:k}=b;for(let f in h[a])for(let l in i[f]||(i[f]=[]),h[a][f]){let m;if(!d.options_.useForcedSubtitles&&h[a][f][l].forced)continue;let n=h[a][f][l];if("hls"===e)m=new g4(n.resolvedUri,d,g);else if("dash"===e){if(!n.playlists.filter(a=>a.excludeUntil!==1/0).length)return;m=new hn(n.playlists[0],d,g,k)}else"vhs-json"===e&&(m=new g4(n.playlists?n.playlists[0]:n.resolvedUri,d,g));if(n=gc({id:l,playlistLoader:m},n),iE[a](a,n.playlistLoader,b),i[f].push(n),void 0===j[l]){let a=c.addRemoteTextTrack({id:l,kind:"subtitles",default:n.default&&n.autoselect,language:n.language,label:l},!1).track;j[l]=a}}f.on("error",iD[a](a,b))},"CLOSED-CAPTIONS":(a,b)=>{let{tech:c,main:{mediaGroups:d},mediaTypes:{[a]:{groups:e,tracks:f}}}=b;for(let b in d[a])for(let g in e[b]||(e[b]=[]),d[a][b]){let h=d[a][b][g];if(!/^(?:CC|SERVICE)/.test(h.instreamId))continue;let i=c.options_.vhs&&c.options_.vhs.captionServices||{},j={label:g,language:h.language,instreamId:h.instreamId,default:h.default&&h.autoselect};if(i[j.instreamId]&&(j=gc(j,i[j.instreamId])),void 0===j.default&&delete j.default,e[b].push(gc({id:g},h)),void 0===f[g]){let a=c.addRemoteTextTrack({id:j.instreamId,kind:"captions",default:j.default,language:j.language,label:j.label},!1).track;f[g]=a}}}},iG=(a,b)=>{for(let c=0;c<a.length;c++)if(gG(b,a[c])||a[c].playlists&&iG(a[c].playlists,b))return!0;return!1},iH={AUDIO:(a,b)=>()=>{let{mediaTypes:{[a]:{tracks:c}}}=b;for(let a in c)if(c[a].enabled)return c[a];return null},SUBTITLES:(a,b)=>()=>{let{mediaTypes:{[a]:{tracks:c}}}=b;for(let a in c)if("showing"===c[a].mode||"hidden"===c[a].mode)return c[a];return null}};class iI{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(a){1===a&&(this.version_=a)}set ttl(a){this.ttl_=a||300}set reloadUri(a){a&&(this.reloadUri_=Y(this.reloadUri_,a))}set priority(a){a&&a.length&&(this.priority_=a)}set pathwayClones(a){a&&a.length&&(this.pathwayClones_=new Map(a.map(a=>[a.ID,a])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class iJ extends f4.EventTarget{constructor(a,b){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new iI,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=gb("Content Steering"),this.xhr_=a,this.getBandwidth_=b}assignTagProperties(a,b){this.manifestType_=b.serverUri?"HLS":"DASH";let c=b.serverUri||b.serverURL;if(!c){this.logger_(`steering manifest URL is ${c}, cannot request steering manifest.`),this.trigger("error");return}c.startsWith("data:")?this.decodeDataUriManifest_(c.substring(c.indexOf(",")+1)):(this.steeringManifest.reloadUri=Y(a,c),this.defaultPathway=b.pathwayId||b.defaultServiceLocation,this.queryBeforeStart=b.queryBeforeStart,this.proxyServerUrl_=b.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(a){let b=this.steeringManifest.reloadUri;if(!b)return;let c=a?b:this.getRequestURI(b);if(!c){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}let d={contentSteeringInfo:{uri:c}};this.trigger({type:"contentsteeringloadstart",metadata:d}),this.request_=this.xhr_({uri:c,requestType:"content-steering-manifest"},(a,b)=>{let e;if(a){if(410===b.status){this.logger_(`manifest request 410 ${a}.`),this.logger_(`There will be no more content steering requests to ${c} this session.`),this.excludedSteeringManifestURLs.add(c);return}if(429===b.status){let c=b.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${a}.`),this.logger_(`content steering will retry in ${c} seconds.`),this.startTTLTimeout_(parseInt(c,10));return}this.logger_(`manifest failed to load ${a}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:d});try{e=JSON.parse(this.request_.responseText)}catch(b){let a={errorType:f4.Error.StreamingContentSteeringParserError,error:b};this.trigger({type:"error",metadata:a})}this.assignSteeringProperties_(e);let f={contentSteeringInfo:d.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:f}),this.startTTLTimeout_()})}setProxyServerUrl_(a){let b=new S.default.URL(a),c=new S.default.URL(this.proxyServerUrl_);return c.searchParams.set("url",encodeURI(b.toString())),this.setSteeringParams_(c.toString())}decodeDataUriManifest_(a){let b=JSON.parse(S.default.atob(a));this.assignSteeringProperties_(b)}setSteeringParams_(a){let b=new S.default.URL(a),c=this.getPathway(),d=this.getBandwidth_();if(c){let a=`_${this.manifestType_}_pathway`;b.searchParams.set(a,c)}if(d){let a=`_${this.manifestType_}_throughput`;b.searchParams.set(a,d)}return b.toString()}assignSteeringProperties_(a){if(this.steeringManifest.version=a.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${a.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=a.TTL,this.steeringManifest.reloadUri=a["RELOAD-URI"],this.steeringManifest.priority=a["PATHWAY-PRIORITY"]||a["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=a["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());let b=(a=>{for(let b of a)if(this.availablePathways_.has(b))return b;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==b&&(this.currentPathway=b,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(a){if(!a)return null;let b=a=>this.excludedSteeringManifestURLs.has(a);if(this.proxyServerUrl_){let c=this.setProxyServerUrl_(a);if(!b(c))return c}let c=this.setSteeringParams_(a);return b(c)?null:c}startTTLTimeout_(a=this.steeringManifest.ttl){this.ttlTimeout_=S.default.setTimeout(()=>{this.requestSteeringManifest()},1e3*a)}clearTTLTimeout_(){S.default.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new iI}addAvailablePathway(a){a&&this.availablePathways_.add(a)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(a){return this.availablePathways_.delete(a)}didDASHTagChange(a,b){return!b&&this.steeringManifest.reloadUri||b&&(Y(a,b.serverURL)!==this.steeringManifest.reloadUri||b.defaultServiceLocation!==this.defaultPathway||b.queryBeforeStart!==this.queryBeforeStart||b.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let iK=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],iL=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},iM=function({currentPlaylist:a,buffered:b,currentTime:c,nextPlaylist:d,bufferLowWaterLine:e,bufferHighWaterLine:f,duration:g,bufferBasedABR:h,log:i}){if(!d)return f4.log.warn("We received no playlist to switch to. Please check your stream."),!1;let j=`allowing switch ${a&&a.id||"null"} -> ${d.id}`;if(!a)return i(`${j} as current playlist is not set`),!0;if(d.id===a.id)return!1;let k=!!gh(b,c).length;if(!a.endList)return k||"number"!=typeof a.partTargetDuration?(i(`${j} as current playlist is live`),!0):(i(`not ${j} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);let l=gp(b,c),m=h?ho.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:ho.MAX_BUFFER_LOW_WATER_LINE;if(g<m)return i(`${j} as duration < max low water line (${g} < ${m})`),!0;let n=d.attributes.BANDWIDTH,o=a.attributes.BANDWIDTH;if(n<o&&(!h||l<f)){let a=`${j} as next bandwidth < current bandwidth (${n} < ${o})`;return h&&(a+=` and forwardBuffer < bufferHighWaterLine (${l} < ${f})`),i(a),!0}if((!h||n>o)&&l>=e){let a=`${j} as forwardBuffer >= bufferLowWaterLine (${l} >= ${e})`;return h&&(a+=` and next bandwidth > current bandwidth (${n} > ${o})`),i(a),!0}return i(`not ${j} as no switching criteria met`),!1};class iN extends f4.EventTarget{constructor(a){super(),this.fastQualityChange_=((a,b)=>{let c=null;return(...d)=>{clearTimeout(c),c=setTimeout(()=>{a.apply(null,d)},b)}})(this.fastQualityChange_.bind(this),100);const{src:b,withCredentials:c,tech:d,bandwidth:e,externVhs:f,useCueTags:h,playlistExclusionDuration:i,enableLowInitialPlaylist:j,sourceType:k,cacheEncryptionKeys:l,bufferBasedABR:m,leastPixelDiffSelector:n,captionServices:o,experimentalUseMMS:p}=a;if(!b)throw Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:q}=a;null==q&&(q=1/0),g=f,this.bufferBasedABR=!!m,this.leastPixelDiffSelector=!!n,this.withCredentials=c,this.tech_=d,this.vhs_=d.vhs,this.player_=a.player_,this.sourceType_=k,this.useCueTags_=h,this.playlistExclusionDuration=i,this.maxPlaylistRetries=q,this.enableLowInitialPlaylist=j,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:c,maxPlaylistRetries:q,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{let a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(b=>{a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:h7,activeTrack:h7,getActiveGroup:h7,onGroupChanged:h7,onTrackChanged:h7,lastTrack_:null,logger_:gb(`MediaGroups[${b}]`)}}),a})(),p&&S.default.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new S.default.ManagedMediaSource,this.usingManagedMediaSource_=!0,f4.log("Using ManagedMediaSource")):S.default.MediaSource&&(this.mediaSource=new S.default.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=gd(),this.hasPlayed_=!1,this.syncController_=new ix(a),this.segmentMetadataTrack_=d.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new iz,this.sourceUpdater_=new ik(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new iy,this.keyStatusMap_=new Map;const r={vhs:this.vhs_,parse708captions:a.parse708captions,useDtsForTimestampOffset:a.useDtsForTimestampOffset,captionServices:o,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:e,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:l,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:a.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new hn(b,this.vhs_,gc(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new g4(b,this.vhs_,gc(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new h6(gc(r,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a),this.audioSegmentLoader_=new h6(gc(r,{loaderType:"audio"}),a),this.subtitleSegmentLoader_=new ip(gc(r,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((a,b)=>{function c(){d.off("vttjserror",e),a()}function e(){d.off("vttjsloaded",c),b()}d.one("vttjsloaded",c),d.one("vttjserror",e),d.addWebVttScript_()})}),a);const s=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new iJ(this.vhs_.xhr,s),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),iK.forEach(a=>{this[a+"_"]=iL.bind(this,a)}),this.logger_=gb("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const t="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(t,()=>{let a=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-a,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){let a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return -1===a||-1===b?-1:a+b}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(a="abr"){let b=this.selectPlaylist();b&&this.shouldSwitchToMedia_(b)&&this.switchMedia_(b,a)}switchMedia_(a,b,c){let d=this.media(),e=d&&(d.id||d.uri),f=a&&(a.id||a.uri);if(e&&e!==f){this.logger_(`switch media ${e} -> ${f} from ${b}`);let c={renditionInfo:{id:f,bandwidth:a.attributes.BANDWIDTH,resolution:a.attributes.RESOLUTION,codecs:a.attributes.CODECS},cause:b};this.trigger({type:"renditionselected",metadata:c}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${b}`})}this.mainPlaylistLoader_.media(a,c)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{let b=this.mediaTypes_[a],c=b?b.activeGroup():null,d=this.contentSteeringController_.getPathway();if(c&&d){let b=(c.length?c[0].playlists:c.playlists).filter(a=>a.attributes.serviceLocation===d);b.length&&this.mediaTypes_[a].activePlaylistLoader.media(b[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=S.default.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(S.default.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){let a,b=this.main(),c=b&&b.playlists||[];if(!b||!b.mediaGroups||!b.mediaGroups.AUDIO)return c;let d=b.mediaGroups.AUDIO,e=Object.keys(d);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{let b=d.main||e.length&&d[e[0]];for(let c in b)if(b[c].default){a={label:c};break}}if(!a)return c;let f=[];for(let c in d)if(d[c][a.label]){let e=d[c][a.label];if(e.playlists&&e.playlists.length)f.push.apply(f,e.playlists);else if(e.uri)f.push(e);else if(b.playlists.length)for(let a=0;a<b.playlists.length;a++){let d=b.playlists[a];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===c&&f.push(d)}}return f.length?f:c}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{let a=this.mainPlaylistLoader_.media(),b=1.5*a.targetDuration*1e3;gF(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b,a.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.mainSegmentLoader_.load()),(a=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(b=>{iF[b](b,a)});let{mediaTypes:b,mainPlaylistLoader:c,tech:d,vhs:e,segmentLoaders:{AUDIO:f,main:g}}=a;["AUDIO","SUBTITLES"].forEach(c=>{b[c].activeGroup=b=>{let{mainPlaylistLoader:d,mediaTypes:{[c]:{groups:e}}}=a,f=d.media();if(!f)return null;let g=null;f.attributes[c]&&(g=e[f.attributes[c]]);let h=Object.keys(e);if(!g)if("AUDIO"===c&&h.length>1&&gI(a.main))for(let a=0;a<h.length;a++){let b=e[h[a]];if(iG(b,f)){g=b;break}}else e.main?g=e.main:1===h.length&&(g=e[h[0]]);return void 0===b?g:null!==b&&g&&g.filter(a=>a.id===b.id)[0]||null},b[c].activeTrack=iH[c](c,a),b[c].onGroupChanged=()=>{let{segmentLoaders:{[c]:b,main:d},mediaTypes:{[c]:e}}=a,f=e.activeTrack(),g=e.getActiveGroup(),h=e.activePlaylistLoader,i=e.lastGroup_;if((!g||!i||g.id!==i.id)&&(e.lastGroup_=g,e.lastTrack_=f,iB(b,e),g&&!g.isMainPlaylist)){if(!g.playlistLoader){h&&d.resetEverything();return}b.resyncLoader(),iC(g.playlistLoader,e)}},b[c].onGroupChanging=()=>{let{segmentLoaders:{[c]:b},mediaTypes:{[c]:d}}=a;d.lastGroup_=null,b.abort(),b.pause()},b[c].onTrackChanged=()=>{let{mainPlaylistLoader:b,segmentLoaders:{[c]:d,main:e},mediaTypes:{[c]:f}}=a,g=f.activeTrack(),h=f.getActiveGroup(),i=f.activePlaylistLoader,j=f.lastTrack_;if((!j||!g||j.id!==g.id)&&(f.lastGroup_=h,f.lastTrack_=g,iB(d,f),h)){if(h.isMainPlaylist){if(!g||!j||g.id===j.id)return;let c=a.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;f.logger_(`track change. Switching main audio from ${j.id} to ${g.id}`),b.pause(),e.resetEverything(),c.fastQualityChange_(d);return}if("AUDIO"===c){if(!h.playlistLoader){e.setAudio(!0),e.resetEverything();return}d.setAudio(!0),e.setAudio(!1)}if(i===h.playlistLoader)return void iC(h.playlistLoader,f);d.track&&d.track(g),d.resetEverything(),iC(h.playlistLoader,f)}},b[c].getActiveGroup=((a,{mediaTypes:b})=>()=>{let c=b[a].activeTrack();return c?b[a].activeGroup(c):null})(c,a)});let h=b.AUDIO.activeGroup();if(h){let a=(h.filter(a=>a.default)[0]||h[0]).id;b.AUDIO.tracks[a].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged(),b.AUDIO.getActiveGroup().playlistLoader?(g.setAudio(!1),f.setAudio(!0)):g.setAudio(!0)}c.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(a=>b[a].onGroupChanged())}),c.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(a=>b[a].onGroupChanging())});let i=()=>{b.AUDIO.onTrackChanged(),d.trigger({type:"usage",name:"vhs-audio-change"})};for(let a in d.audioTracks().addEventListener("change",i),d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged),e.on("dispose",()=>{d.audioTracks().removeEventListener("change",i),d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)}),d.clearTracks("audio"),b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[a])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),a),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let a=this.mainPlaylistLoader_.media();if(!a){let b;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(b=this.selectInitialPlaylist()),b||(b=this.selectPlaylist()),!b||!this.shouldSwitchToMedia_(b)||(this.initialMedia_=b,this.switchMedia_(this.initialMedia_,"initial"),!("vhs-json"===this.sourceType_&&this.initialMedia_.segments)))return;a=this.initialMedia_}this.handleUpdatedMediaPlaylist(a)}),this.mainPlaylistLoader_.on("error",()=>{let a=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:a.playlist,error:a})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{let a=this.mainPlaylistLoader_.media(),b=1.5*a.targetDuration*1e3;gF(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b,"dash"===this.sourceType_&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{let a=this.mainPlaylistLoader_.media();"playlist-unchanged"===a.lastExcludeReason_||this.stuckAtPlaylistEnd_(a)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(a=>{this.mainPlaylistLoader_.on(a,a=>{this.player_.trigger((0,W.default)({},a))})})}handleUpdatedMediaPlaylist(a){this.useCueTags_&&this.updateAdCues_(a),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!a.endList),!this.tech_.paused()&&(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(a,b){let c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(let a in c.AUDIO)for(let b in c.AUDIO[a])c.AUDIO[a][b].uri||(d=!1);d&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(c.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),g.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),e.length&&Object.keys(c.AUDIO[e[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(a){let b=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,c=this.tech_.currentTime(),d=this.bufferLowWaterLine(),e=this.bufferHighWaterLine();return iM({buffered:this.tech_.buffered(),currentTime:c,currentPlaylist:b,nextPlaylist:a,bufferLowWaterLine:d,bufferHighWaterLine:e,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{let a=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:a.playlist,error:a})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{let a=this.audioSegmentLoader_.pendingSegment_;if(!a||!a.segment||!a.segment.syncInfo)return;let b=a.segment.syncInfo.end+.01;this.tech_.setCurrentTime(b)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",a=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});let a=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();let a=this.getCodecsOrExclude_();a&&this.sourceUpdater_.addOrChangeSourceBuffers(a)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(a=>{this.mainSegmentLoader_.on(a,a=>{this.player_.trigger((0,W.default)({},a))}),this.audioSegmentLoader_.on(a,a=>{this.player_.trigger((0,W.default)({},a))}),this.subtitleSegmentLoader_.on(a,a=>{this.player_.trigger((0,W.default)({},a))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(a=this.selectPlaylist()){a&&a===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(a,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();let a=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}setupFirstPlay(){let a=this.mainPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList||a.start){let b=this.seekable();if(!b.length)return!1;let c=b.end(0),d=c;if(a.start){let e=a.start.timeOffset;d=e<0?Math.max(c+e,b.start(0)):Math.min(c,e)}this.trigger("firstplay"),this.tech_.setCurrentTime(d)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){let a=this.tech_.play();void 0!==a&&"function"==typeof a.then&&a.then(null,a=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;let a=this.inbandTextTracks_.metadataTrack_.cues;if(!a||!a.length)return;let b=this.duration();a[a.length-1].endTime=isNaN(b)||Math.abs(b)===1/0?Number.MAX_VALUE:b}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){let b=this.mainSegmentLoader_.getCurrentMediaInfo_();a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(a){if(!this.seekable().length)return!1;let b=this.syncController_.getExpiredTime(a,this.duration());if(null===b)return!1;let c=g.Playlist.playlistEnd(a,b),d=this.tech_.currentTime(),e=this.tech_.buffered();if(!e.length)return c-d<=gf;let f=e.end(e.length-1);return f-d<=gf&&c-f<=gf}excludePlaylist({playlistToExclude:a=this.mainPlaylistLoader_.media(),error:b={},playlistExclusionDuration:c}){let d;if(a=a||this.mainPlaylistLoader_.media(),c=c||b.playlistExclusionDuration||this.playlistExclusionDuration,!a){this.error=b,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;let e=this.mainPlaylistLoader_.main.playlists,f=e.filter(gD),g=1===f.length&&f[0]===a;if(1===e.length&&c!==1/0)return f4.log.warn(`Problem encountered with playlist ${a.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(g);if(g){if(this.main().contentSteering){let b=this.pathwayAttribute_(a),c=1e3*this.contentSteeringController_.steeringManifest.ttl;this.contentSteeringController_.excludePathway(b),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(b)},c);return}let b=!1;e.forEach(c=>{if(c===a)return;let d=c.excludeUntil;void 0!==d&&d!==1/0&&(b=!0,delete c.excludeUntil)}),b&&(f4.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}d=a.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*c,a.excludeUntil=d,b.reason&&(a.lastExcludeReason_=b.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});let h=this.selectPlaylist();if(!h){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}let i=b.internal?this.logger_:f4.log.warn,j=b.message?" "+b.message:"";i(`${b.internal?"Internal problem":"Problem"} encountered with playlist ${a.id}.${j} Switching to playlist ${h.id}.`),h.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);let k=h.targetDuration/2*1e3||5e3,l="number"==typeof h.lastRequest&&Date.now()-h.lastRequest<=k;return this.switchMedia_(h,"exclude",g||l)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(a,b){let c=[],d="all"===a;(d||"main"===a)&&c.push(this.mainPlaylistLoader_);let e=[];(d||"audio"===a)&&e.push("AUDIO"),(d||"subtitle"===a)&&(e.push("CLOSED-CAPTIONS"),e.push("SUBTITLES")),e.forEach(a=>{let b=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;b&&c.push(b)}),["main","audio","subtitle"].forEach(b=>{let d=this[`${b}SegmentLoader_`];d&&(a===b||"all"===a)&&c.push(d)}),c.forEach(a=>b.forEach(b=>{"function"==typeof a[b]&&a[b]()}))}setCurrentTime(a){let b=gh(this.tech_.buffered(),a);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?b&&b.length?a:void(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;let a=this.mainPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:g.Playlist.duration(a):1/0:0}seekable(){return this.seekable_}getSeekableRange_(a,b){let c=a.media();if(!c)return null;let d=this.syncController_.getMediaSequenceSync(b);if(d&&d.isReliable){let a=d.start,b=d.end;if(!isFinite(a)||!isFinite(b))return null;let e=Math.max(a,b-g.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,c));return gd([[a,e]])}let e=this.syncController_.getExpiredTime(c,this.duration());if(null===e)return null;let f=g.Playlist.seekable(c,e,g.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,c));return f.length?f:null}computeFinalSeekable_(a,b){if(!b)return a;let c=a.start(0),d=a.end(0),e=b.start(0),f=b.end(0);return e>d||c>f?a:gd([[Math.max(c,e),Math.min(d,f)]])}onSyncInfoUpdate_(){let a;if(!this.mainPlaylistLoader_)return;let b=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!b||this.mediaTypes_.AUDIO.activePlaylistLoader&&!(a=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio")))return;let c=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(b,a),!this.seekable_||c&&c.length&&this.seekable_.length&&c.start(0)===this.seekable_.start(0)&&c.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${gl(this.seekable_)}]`);let d={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:d}),this.tech_.trigger("seekablechanged")}updateDuration(a){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState){this.updateDuration_=this.updateDuration.bind(this,a),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(a){let a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}let b=this.tech_.buffered(),c=g.Playlist.duration(this.mainPlaylistLoader_.media());b.length>0&&(c=Math.max(c,b.end(b.length-1))),this.mediaSource.duration!==c&&this.sourceUpdater_.setDuration(c)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(a=>{let b=this.mediaTypes_[a].groups;for(let a in b)b[a].forEach(a=>{a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){let a=!!this.mediaTypes_.AUDIO.activePlaylistLoader,b=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),c=!a||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!!b&&!!c}getCodecsOrExclude_(){let a,b={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},c=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();b.video=b.main;let d=gX(this.main(),c),e={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(b.main.hasVideo&&(e.video=d.video||b.main.videoCodec||"avc1.4d400d"),b.main.isMuxed&&(e.video+=`,${d.audio||b.main.audioCodec||ar}`),(b.main.hasAudio&&!b.main.isMuxed||b.audio.hasAudio||f)&&(e.audio=d.audio||b.main.audioCodec||b.audio.audioCodec||ar,b.audio.isFmp4=b.main.hasAudio&&!b.main.isMuxed?b.main.isFmp4:b.audio.isFmp4),!e.audio&&!e.video)return void this.excludePlaylist({playlistToExclude:c,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});let g=(a,b)=>a?ap(b,this.usingManagedMediaSource_):aq(b),h={};if(["video","audio"].forEach(function(c){if(e.hasOwnProperty(c)&&!g(b[c].isFmp4,e[c])){let d=b[c].isFmp4?"browser":"muxer";h[d]=h[d]||[],h[d].push(e[c]),"audio"===c&&(a=d)}}),f&&a&&c.attributes.AUDIO){let b=c.attributes.AUDIO;this.main().playlists.forEach(a=>{(a.attributes&&a.attributes.AUDIO)===b&&a!==c&&(a.excludeUntil=1/0)}),this.logger_(`excluding audio group ${b} as ${a} does not support codec(s): "${e.audio}"`)}if(Object.keys(h).length){let a=Object.keys(h).reduce((a,b)=>(a&&(a+=", "),a+=`${b} does not support codec(s): "${h[b].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:c,error:{internal:!0,message:a},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let a=[];if(["video","audio"].forEach(b=>{let c=(al(this.sourceUpdater_.codecs[b]||"")[0]||{}).type,d=(al(e[b]||"")[0]||{}).type;c&&d&&c.toLowerCase()!==d.toLowerCase()&&a.push(`"${this.sourceUpdater_.codecs[b]}" -> "${e[b]}"`)}),a.length)return void this.excludePlaylist({playlistToExclude:c,error:{message:`Codec switching not supported: ${a.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return e}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;let a=this.getCodecsOrExclude_();if(!a)return;this.sourceUpdater_.createSourceBuffers(a);let b=[a.video,a.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(b)}excludeUnsupportedVariants_(){let a=this.main().playlists,b=[];Object.keys(a).forEach(c=>{let d=a[c];if(-1!==b.indexOf(d.id))return;b.push(d.id);let e=gX(this.main,d),f=[];!e.audio||aq(e.audio)||ap(e.audio,this.usingManagedMediaSource_)||f.push(`audio codec ${e.audio}`),!e.video||aq(e.video)||ap(e.video,this.usingManagedMediaSource_)||f.push(`video codec ${e.video}`),e.text&&"stpp.ttml.im1t"===e.text&&f.push(`text codec ${e.text}`),f.length&&(d.excludeUntil=1/0,this.logger_(`excluding ${d.id} for unsupported: ${f.join(", ")}`))})}excludeIncompatibleVariants_(a){let b=[],c=this.main().playlists,d=gV(al(a)),e=gW(d),f=d.video&&al(d.video)[0]||null,g=d.audio&&al(d.audio)[0]||null;Object.keys(c).forEach(a=>{let d=c[a];if(-1!==b.indexOf(d.id)||d.excludeUntil===1/0)return;b.push(d.id);let h=[],i=gX(this.mainPlaylistLoader_.main,d),j=gW(i);if(i.audio||i.video){if(j!==e&&h.push(`codec count "${j}" !== "${e}"`),!this.sourceUpdater_.canChangeType()){let a=i.video&&al(i.video)[0]||null,b=i.audio&&al(i.audio)[0]||null;a&&f&&a.type.toLowerCase()!==f.type.toLowerCase()&&h.push(`video codec "${a.type}" !== "${f.type}"`),b&&g&&b.type.toLowerCase()!==g.type.toLowerCase()&&h.push(`audio codec "${b.type}" !== "${g.type}"`)}h.length&&(d.excludeUntil=1/0,this.logger_(`excluding ${d.id}: ${h.join(" && ")}`))}})}updateAdCues_(a){let b=0,c=this.seekable();c.length&&(b=c.start(0)),ir(a,this.cueTagsTrack_,b)}goalBufferLength(){let a=this.tech_.currentTime(),b=ho.GOAL_BUFFER_LENGTH,c=ho.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,ho.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)}bufferLowWaterLine(){let a=this.tech_.currentTime(),b=ho.BUFFER_LOW_WATER_LINE,c=ho.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,ho.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,ho.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,this.bufferBasedABR?e:d)}bufferHighWaterLine(){return ho.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(a){hV(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:a,dateRanges:b})=>{let c=a.metadataTrack_;if(!c)return;let d=S.default.WebKitDataCue||S.default.VTTCue;b.forEach(a=>{for(let b of Object.keys(a)){if(hU.has(b))continue;let e=new d(a.startTime,a.endTime,"");e.id=a.id,e.type="com.apple.quicktime.HLS",e.value={key:hT[b],data:a[b]},("scte35Out"===b||"scte35In"===b)&&(e.value.data=new Uint8Array(e.value.data.match(/[\da-f]{2}/gi)).buffer),c.addCue(e)}a.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:a})}addMetadataToTextTrack(a,b,c){let d=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();hV(this.inbandTextTracks_,a,this.tech_),(({inbandTextTracks:a,metadataArray:b,timestampOffset:c,videoDuration:d})=>{if(!b)return;let e=S.default.WebKitDataCue||S.default.VTTCue,f=a.metadataTrack_;if(!f||(b.forEach(a=>{let b=a.cueTime+c;"number"!=typeof b||S.default.isNaN(b)||b<0||!(b<1/0)||a.frames&&a.frames.length&&a.frames.forEach(a=>{let c=new e(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,hS(c),f.addCue(c)})}),!f.cues||!f.cues.length))return;let g=f.cues,h=[];for(let a=0;a<g.length;a++)g[a]&&h.push(g[a]);let i=h.reduce((a,b)=>{let c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),j=Object.keys(i).sort((a,b)=>Number(a)-Number(b));j.forEach((a,b)=>{let c=i[a],e=isFinite(d)?d:a,f=Number(j[b+1])||e;c.forEach(a=>{a.endTime=f})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:d,videoDuration:c})}pathwayAttribute_(a){return a.attributes["PATHWAY-ID"]||a.attributes.serviceLocation}initContentSteeringController_(){let a=this.main();if(a.contentSteering){for(let b of a.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(b));if(this.contentSteeringController_.assignTagProperties(a.uri,a.contentSteering),this.contentSteeringController_.queryBeforeStart)return void this.contentSteeringController_.requestSteeringManifest(!0);this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(a=>{this.contentSteeringController_.on(a,a=>{this.trigger((0,W.default)({},a))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{let a=this.main(),b=this.contentSteeringController_.didDASHTagChange(a.uri,a.contentSteering),c=()=>{let b=this.contentSteeringController_.getAvailablePathways(),c=[];for(let d of a.playlists){let a=d.attributes.serviceLocation;if(a&&(c.push(a),!b.has(a)))return!0}return!c.length&&!!b.size};(b||c())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){let a=this.contentSteeringController_.getPathway();if(!a)return;this.handlePathwayClones_();let b=this.main().playlists,c=new Set,d=!1;Object.keys(b).forEach(e=>{let f=b[e],g=this.pathwayAttribute_(f),h=g&&a!==g;f.excludeUntil!==1/0||"content-steering"!==f.lastExcludeReason_||h||(delete f.excludeUntil,delete f.lastExcludeReason_,d=!0);let i=!f.excludeUntil&&f.excludeUntil!==1/0;!c.has(f.id)&&h&&i&&(c.add(f.id),f.excludeUntil=1/0,f.lastExcludeReason_="content-steering",this.logger_(`excluding ${f.id} for ${f.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(b=>{let c=this.mediaTypes_[b];if(c.activePlaylistLoader){let b=c.activePlaylistLoader.media_;b&&b.attributes.serviceLocation!==a&&(d=!0)}}),d&&this.changeSegmentPathway_()}handlePathwayClones_(){let a=this.main().playlists,b=this.contentSteeringController_.currentPathwayClones,c=this.contentSteeringController_.nextPathwayClones;if(b&&b.size||c&&c.size){for(let[a,d]of b.entries())c.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(d),this.contentSteeringController_.excludePathway(a));for(let[d,e]of c.entries()){let c=b.get(d);if(!c){a.filter(a=>a.attributes["PATHWAY-ID"]===e["BASE-ID"]).forEach(a=>{this.mainPlaylistLoader_.addClonePathway(e,a)}),this.contentSteeringController_.addAvailablePathway(d);continue}this.equalPathwayClones_(c,e)||(this.mainPlaylistLoader_.updateOrDeleteClone(e,!0),this.contentSteeringController_.addAvailablePathway(d))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...c])))}}equalPathwayClones_(a,b){if(a["BASE-ID"]!==b["BASE-ID"]||a.ID!==b.ID||a["URI-REPLACEMENT"].HOST!==b["URI-REPLACEMENT"].HOST)return!1;let c=a["URI-REPLACEMENT"].PARAMS,d=b["URI-REPLACEMENT"].PARAMS;for(let a in c)if(c[a]!==d[a])return!1;for(let a in d)if(c[a]!==d[a])return!1;return!0}changeSegmentPathway_(){let a=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(a,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let a=0,b="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(c=>{let d=this.mainPlaylistLoader_.getKeyIdSet(c);d&&d.size&&d.forEach(d=>{let e="usable",f=this.keyStatusMap_.has(d)&&this.keyStatusMap_.get(d)===e,g=c.lastExcludeReason_===b&&c.excludeUntil===1/0;f?f&&g&&(delete c.excludeUntil,delete c.lastExcludeReason_,this.logger_(`enabling playlist ${c.id} because key ID ${d} is ${e}`)):(c.excludeUntil!==1/0&&c.lastExcludeReason_!==b&&(c.excludeUntil=1/0,c.lastExcludeReason_=b,this.logger_(`excluding playlist ${c.id} because the key ID ${d} doesn't exist in the keyStatusMap or is not ${e}`)),a++)})}),a>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(a=>{let c=a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height<720,d=a.excludeUntil===1/0&&a.lastExcludeReason_===b;c&&d&&(delete a.excludeUntil,f4.log.warn(`enabling non-HD playlist ${a.id} because all playlists were excluded due to ${b} key IDs`))})}addKeyStatus_(a,b){let c=("string"==typeof a?a:Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${b}' with key ID ${c} added to the keyStatusMap`),this.keyStatusMap_.set(c,b)}updatePlaylistByKeyStatus(a,b){this.addKeyStatus_(a,b),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class iO{constructor(a,b,c){const{playlistController_:d}=a,e=d.fastQualityChange_.bind(d);if(b.attributes){const a=b.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=b.attributes.BANDWIDTH,this.frameRate=b.attributes["FRAME-RATE"]}this.codecs=gX(d.main(),b),this.playlist=b,this.id=c,this.enabled=((a,b,c)=>d=>{let e=a.main.playlists[b],f=gC(e),g=gD(e);if(void 0===d)return g;d?delete e.disabled:e.disabled=!0;let h={renditionInfo:{id:b,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:"fast-quality"};return d===g||f||(d?(c(e),a.trigger({type:"renditionenabled",metadata:h})):a.trigger({type:"renditiondisabled",metadata:h})),d})(a.playlists,b.id,e)}}let iP=function(a){a.representations=()=>{let b=a.playlistController_.main(),c=gI(b)?a.playlistController_.getAudioTrackPlaylists_():b.playlists;return c?c.filter(a=>!gC(a)).map((b,c)=>new iO(a,b,b.id)):[]}},iQ=["seeking","seeked","pause","playing","error"];class iR extends f4.EventTarget{constructor(a){super(),this.playlistController_=a.playlistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=gb("PlaybackWatcher"),this.logger_("initialize");const b=()=>this.monitorCurrentTime_(),c=()=>this.monitorCurrentTime_(),d=()=>this.techWaiting_(),e=()=>this.resetTimeUpdate_(),f=this.playlistController_,g=["main","subtitle","audio"],h={};g.forEach(a=>{h[a]={reset:()=>this.resetSegmentDownloads_(a),updateend:()=>this.checkSegmentDownloads_(a)},f[`${a}SegmentLoader_`].on("appendsdone",h[a].updateend),f[`${a}SegmentLoader_`].on("playlistupdate",h[a].reset),this.tech_.on(["seeked","seeking"],h[a].reset)});const i=a=>{["main","audio"].forEach(b=>{f[`${b}SegmentLoader_`][a]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),i("off"))},this.clearSeekingAppendCheck_=()=>i("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),i("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",d),this.tech_.on(iQ,e),this.tech_.on("canplay",c),this.tech_.one("play",b),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",d),this.tech_.off(iQ,e),this.tech_.off("canplay",c),this.tech_.off("play",b),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),g.forEach(a=>{f[`${a}SegmentLoader_`].off("appendsdone",h[a].updateend),f[`${a}SegmentLoader_`].off("playlistupdate",h[a].reset),this.tech_.off(["seeked","seeking"],h[a].reset)}),this.checkCurrentTimeTimeout_&&S.default.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&S.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=S.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(a){let b=this.playlistController_[`${a}SegmentLoader_`];this[`${a}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${a} loader`),this[`${a}StalledDownloads_`]=0,this[`${a}Buffered_`]=b.buffered_()}checkSegmentDownloads_(a){let b=this.playlistController_,c=b[`${a}SegmentLoader_`],d=c.buffered_(),e=gn(this[`${a}Buffered_`],d);if(this[`${a}Buffered_`]=d,e){b.trigger({type:"bufferedrangeschanged",metadata:{bufferedRanges:d}}),this.resetSegmentDownloads_(a);return}this[`${a}StalledDownloads_`]++,this.logger_(`found #${this[`${a}StalledDownloads_`]} ${a} appends that did not increase buffer (possible stalled download)`,{playlistId:c.playlist_&&c.playlist_.id,buffered:gm(d)}),this[`${a}StalledDownloads_`]<10||(this.logger_(`${a} loader stalled download exclusion`),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:`vhs-${a}-download-exclusion`}),"subtitle"!==a&&b.excludePlaylist({error:{message:`Excessive ${a} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;let a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+gf>=b.end(b.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&a===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(a===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(gd([this.lastRecordedTime,a]));let b={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:b}),this.consecutiveUpdates=0,this.lastRecordedTime=a}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){let a;if(!this.tech_.seeking())return!1;let b=this.seekable(),c=this.tech_.currentTime();if(this.afterSeekableWindow_(b,c,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(a=b.end(b.length-1)),this.beforeSeekableWindow_(b,c)){let c=b.start(0);a=c+(c===b.end(0)?0:gf)}if(void 0!==a)return this.logger_(`Trying to seek outside of seekable at time ${c} with seekable range ${gl(b)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;let d=this.playlistController_.sourceUpdater_,e=this.tech_.buffered(),f=d.audioBuffer?d.audioBuffered():null,g=d.videoBuffer?d.videoBuffered():null,h=this.media(),i=h.partTargetDuration?h.partTargetDuration:(h.targetDuration-ge)*2,j=[f,g];for(let a=0;a<j.length;a++)if(j[a]&&gp(j[a],c)<i)return!1;let k=gi(e,c);return 0!==k.length&&(a=k.start(0)+gf,this.logger_(`Buffered region starts (${k.start(0)})  just beyond seek point (${c}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;let a=this.tech_.currentTime(),b=gh(this.tech_.buffered(),a);if(b.length&&a+3<=b.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.logger_(`Stopped at ${a} while inside a buffered region [${b.start(0)} -> ${b.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){let a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(a,b)){let c=a.end(a.length-1);return this.logger_(`Fell out of live window at time ${b}. Seeking to live point (seekable end) ${c}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}let c=this.tech_.vhs.playlistController_.sourceUpdater_,d=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:c.audioBuffered(),videoBuffered:c.videoBuffered(),currentTime:b}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;let e=gi(d,b);return e.length>0&&(this.logger_(`Stopped at ${b} and seeking to ${e.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(b),!0)}afterSeekableWindow_(a,b,c,d=!1){if(!a.length)return!1;let e=a.end(a.length-1)+gf,f=!c.endList,g="number"==typeof c.partTargetDuration;return f&&(g||d)&&(e=a.end(a.length-1)+3*c.targetDuration),b>e}beforeSeekableWindow_(a,b){return!!(a.length&&a.start(0)>0&&b<a.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:a,audioBuffered:b,currentTime:c}){let d;if(a){if(a.length&&b.length){let e=gh(a,c-3),f=gh(a,c),g=gh(b,c);g.length&&!f.length&&e.length&&(d={start:e.end(0),end:g.end(0)})}else gi(a,c).length||(d=this.gapFromVideoUnderflow_(a,c));return!!d&&(this.logger_(`Encountered a gap in video from ${d.start} to ${d.end}. Seeking to current time ${c}`),!0)}}skipTheGap_(a){let b=this.tech_.buffered(),c=this.tech_.currentTime(),d=gi(b,c);if(this.resetTimeUpdate_(),0===d.length||c!==a)return;this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+ge);let e={gapInfo:{from:c,to:d.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:e}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(a,b){let c=gj(a);for(let a=0;a<c.length;a++){let d=c.start(a),e=c.end(a);if(b-d<4&&b-d>2)return{start:d,end:e}}return null}}let iS={errorInterval:30,getSource(a){return a(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},iT=function(a,b){let c=0,d=0,e=gc(iS,b);a.ready(()=>{a.trigger({type:"usage",name:"vhs-error-reload-initialized"})});let f=function(){d&&a.currentTime(d)},g=function(b){null!=b&&(d=a.duration()!==1/0&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"vhs-error-reload"}),a.play())},h=function(){return Date.now()-c<1e3*e.errorInterval?void a.trigger({type:"usage",name:"vhs-error-reload-canceled"}):e.getSource&&"function"==typeof e.getSource?(c=Date.now(),e.getSource.call(a,g)):void f4.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},i=function(){a.off("loadedmetadata",f),a.off("error",h),a.off("dispose",i)};a.on("error",h),a.on("dispose",i),a.reloadSourceOnError=function(b){i(),iT(a,b)}};var iU="3.17.2";let iV={PlaylistLoader:g4,Playlist:gJ,utils:hf,STANDARD_PLAYLIST_SELECTOR:hN,INITIAL_PLAYLIST_SELECTOR:function(){let a=this.playlists.main.playlists.filter(gJ.isEnabled);return hK(a,(a,b)=>hL(a,b)),a.filter(a=>!!gX(this.playlists.main,a).video)[0]||null},lastBandwidthSelector:hN,movingAverageBandwidthSelector:function(a){let b=-1,c=-1;if(a<0||a>1)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let d=this.useDevicePixelRatio&&S.default.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(d=this.customPixelRatio),b<0&&(b=this.systemBandwidth,c=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth),hM({main:this.playlists.main,bandwidth:b,playerWidth:parseInt(hJ(this.tech_.el(),"width"),10)*d,playerHeight:parseInt(hJ(this.tech_.el(),"height"),10)*d,playerObjectFit:this.usePlayerObjectFit?hJ(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},comparePlaylistBandwidth:hL,comparePlaylistResolution:function(a,b){let c,d;return(a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width),c=c||S.default.Number.MAX_VALUE,b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),c===(d=d||S.default.Number.MAX_VALUE)&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH)?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:g6()};Object.keys(ho).forEach(a=>{Object.defineProperty(iV,a,{get:()=>(f4.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`),ho[a]),set(b){(f4.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`),"number"!=typeof b||b<0)?f4.log.warn(`value of Vhs.${a} must be greater than or equal to 0`):ho[a]=b}})});let iW="videojs-vhs",iX=function(a,b){let c=b.media(),d=-1;for(let b=0;b<a.length;b++)if(a[b].id===c.id){d=b;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})},iY=function(a,b){b.representations().forEach(b=>{a.addQualityLevel(b)}),iX(a,b.playlists)};iV.canPlaySource=function(){return f4.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};let iZ=()=>{if(!S.default.localStorage)return null;let a=S.default.localStorage.getItem(iW);if(!a)return null;try{return JSON.parse(a)}catch(a){return null}},i$=(a,b)=>{a._requestCallbackSet||(a._requestCallbackSet=new Set),a._requestCallbackSet.add(b)},i_=(a,b)=>{a._responseCallbackSet||(a._responseCallbackSet=new Set),a._responseCallbackSet.add(b)},i0=(a,b)=>{a._requestCallbackSet&&(a._requestCallbackSet.delete(b),a._requestCallbackSet.size||delete a._requestCallbackSet)},i1=(a,b)=>{a._responseCallbackSet&&(a._responseCallbackSet.delete(b),a._responseCallbackSet.size||delete a._responseCallbackSet)};iV.supportsNativeHls=function(){if(!T.default||!T.default.createElement)return!1;let a=T.default.createElement("video");return!!f4.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),iV.supportsNativeDash=!!T.default&&!!T.default.createElement&&!!f4.getTech("Html5").isSupported()&&/maybe|probably/i.test(T.default.createElement("video").canPlayType("application/dash+xml")),iV.supportsTypeNatively=a=>"hls"===a?iV.supportsNativeHls:"dash"===a&&iV.supportsNativeDash,iV.isSupported=function(){return f4.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},iV.xhr.onRequest=function(a){i$(iV.xhr,a)},iV.xhr.onResponse=function(a){i_(iV.xhr,a)},iV.xhr.offRequest=function(a){i0(iV.xhr,a)},iV.xhr.offResponse=function(a){i1(iV.xhr,a)};let i2=f4.getComponent("Component");class i3 extends i2{constructor(a,b,c){if(super(b,c.vhs),"number"==typeof c.initialBandwidth&&(this.options_.bandwidth=c.initialBandwidth),this.logger_=gb("VhsHandler"),b.options_&&b.options_.playerId){const a=f4.getPlayer(b.options_.playerId);this.player_=a}if(this.tech_=b,this.source_=a,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&b.overrideNativeAudioTracks&&b.overrideNativeVideoTracks)b.overrideNativeAudioTracks(!0),b.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(b.featuresNativeVideoTracks||b.featuresNativeAudioTracks))throw Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(T.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],a=>{let b=T.default.fullscreenElement||T.default.webkitFullscreenElement||T.default.mozFullScreenElement||T.default.msFullscreenElement;b&&b.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(a={}){if(this.options_=gc(this.options_,a),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=void 0===this.options_.useNetworkInformationApi||this.options_.useNetworkInformationApi,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){let a=iZ();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=ho.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===ho.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(a=>{void 0!==this.source_[a]&&(this.options_[a]=this.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;let b=this.options_.customPixelRatio;"number"==typeof b&&b>=0&&(this.customPixelRatio=b)}setOptions(a={}){this.setOptions_(a)}src(a,b){var c;if(!a)return;this.setOptions_(),this.options_.src=0===(c=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(c.substring(c.indexOf(",")+1)):c,this.options_.tech=this.tech_,this.options_.externVhs=iV,this.options_.sourceType=au(b),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new iN(this.options_);let d=gc({liveRangeSafeTimeDelta:gf},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new iR(d),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{let a=f4.players[this.tech_.options_.playerId],b=this.playlistController_.error;"object"!=typeof b||b.code?"string"==typeof b&&(b={message:b,code:3}):b.code=3,a.error(b)});let e=this.options_.bufferBasedABR?iV.movingAverageBandwidthSelector(.55):iV.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):e.bind(this),this.playlistController_.selectInitialPlaylist=iV.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth,b=S.default.navigator.connection||S.default.navigator.mozConnection||S.default.navigator.webkitConnection;if(this.options_.useNetworkInformationApi&&b){let c=1e3*b.downlink*1e3;a=c>=1e7&&a>=1e7?Math.max(a,c):c}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set(){f4.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>gm(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>gm(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(a=>{if(!S.default.localStorage)return;let b=iZ();b=b?gc(b,a):a;try{S.default.localStorage.setItem(iW,JSON.stringify(b))}catch(a){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{iP(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=S.default.URL.createObjectURL(this.playlistController_.mediaSource),(f4.browser.IS_ANY_SAFARI||f4.browser.IS_IOS)&&this.options_.overrideNative&&"hls"===this.options_.sourceType&&"function"==typeof this.tech_.addSourceElement?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){let a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:a,sourceKeySystems:b,audioMedia:c,mainPlaylists:d})=>{let e,f;if(!a.eme.initializeMediaKeys)return Promise.resolve();let g=(e=c?d.concat([c]):d,f=Object.keys(b),e.reduce((a,b)=>{if(!b.contentProtection)return a;let c=f.reduce((a,c)=>{let d=b.contentProtection[c];return d&&d.pssh&&(a[c]={pssh:d.pssh}),a},{});return Object.keys(c).length&&a.push(c),a},[])),h=[],i=[];return g.forEach(b=>{i.push(new Promise((b,c)=>{a.tech_.one("keysessioncreated",b)})),h.push(new Promise((c,d)=>{a.eme.initializeMediaKeys({keySystems:b},a=>{a?d(a):c()})}))}),Promise.race([Promise.all(h),Promise.race(i)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(a=>{this.logger_("error while creating EME key session",a),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){let a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,b=(({player:a,sourceKeySystems:b,media:c,audioMedia:d})=>{let e=((a,b,c)=>{if(!a)return a;let d={};b&&b.attributes&&b.attributes.CODECS&&(d=gV(al(b.attributes.CODECS))),c&&c.attributes&&c.attributes.CODECS&&(d.audio=c.attributes.CODECS);let e=ao(d.video),f=ao(d.audio),g={};for(let c in a)g[c]={},f&&(g[c].audioContentType=f),e&&(g[c].videoContentType=e),b.contentProtection&&b.contentProtection[c]&&b.contentProtection[c].pssh&&(g[c].pssh=b.contentProtection[c].pssh),"string"==typeof a[c]&&(g[c].url=a[c]);return gc(a,g)})(b,c,d);return!!e&&(a.currentSource().keySystems=e,!e||!!a.eme||(f4.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});(this.player_.tech_.on("keystatuschange",a=>{this.playlistController_.updatePlaylistByKeyStatus(a.keyId,a.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),b)?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){let a=f4.players[this.tech_.options_.playerId];a&&a.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=a.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{iY(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{iX(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":iU,"mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return ik.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(a){this.playlistController_.setCurrentTime(a)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&S.default.URL.revokeObjectURL&&(S.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(a,b){return(({playlist:a,time:b,callback:c})=>{if(!c)throw Error("getProgramTime: callback must be provided");if(!a||void 0===b)return c({message:"getProgramTime: playlist and time must be provided"});let d=((a,b)=>{let c;if(!b||!b.segments||0===b.segments.length)return null;let d=0;for(let e=0;e<b.segments.length&&!(a<=(d=(c=b.segments[e]).videoTimingInfo?c.videoTimingInfo.transmuxedPresentationEnd:d+c.duration));e++);let e=b.segments[b.segments.length-1];if(e.videoTimingInfo&&e.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>d){if(a>d+.25*e.duration)return null;c=e}return{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:d-c.duration,type:c.videoTimingInfo?"accurate":"estimate"}})(b,a);if(!d)return c({message:"valid programTime was not found"});if("estimate"===d.type)return c({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:d.estimatedStart});let e={mediaSeconds:b},f=((a,b)=>{if(!b.dateTimeObject)return null;let c=b.videoTimingInfo.transmuxerPrependedSeconds,d=b.videoTimingInfo.transmuxedPresentationStart;return new Date(b.dateTimeObject.getTime()+1e3*(a-(d+c)))})(b,d.segment);return f&&(e.programDateTime=f.toISOString()),c(null,e)})({playlist:this.playlistController_.media(),time:a,callback:b})}seekToProgramTime(a,b,c=!0,d=2){return hg({programTime:a,playlist:this.playlistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}setupXhrHooks_(){this.xhr.onRequest=a=>{i$(this.xhr,a)},this.xhr.onResponse=a=>{i_(this.xhr,a)},this.xhr.offRequest=a=>{i0(this.xhr,a)},this.xhr.offResponse=a=>{i1(this.xhr,a)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(a=>{this.playlistController_.on(a,a=>{this.player_.trigger((0,W.default)({},a))})}),["gapjumped","playedrangeschanged"].forEach(a=>{this.playbackWatcher_.on(a,a=>{this.player_.trigger((0,W.default)({},a))})})}}let i4={name:"videojs-http-streaming",VERSION:iU,canHandleSource(a,b={}){let c=gc(f4.options,b);return(!!c.vhs.experimentalUseMMS||!!ap("avc1.4d400d,mp4a.40.2",!1))&&i4.canPlayType(a.type,c)},handleSource:(a,b,c={})=>(b.vhs=new i3(a,b,gc(f4.options,c)),b.vhs.xhr=g6(),b.vhs.setupXhrHooks_(),b.vhs.src(a.src,a.type),b.vhs),canPlayType(a,b){let c=au(a);if(!c)return"";let d=i4.getOverrideNative(b);return!iV.supportsTypeNatively(c)||d?"maybe":""},getOverrideNative(a={}){let{vhs:b={}}=a,c=!(f4.browser.IS_ANY_SAFARI||f4.browser.IS_IOS),{overrideNative:d=c}=b;return d}};ap("avc1.4d400d,mp4a.40.2",!0)&&f4.getTech("Html5").registerSourceHandler(i4,0),f4.VhsHandler=i3,f4.VhsSourceHandler=i4,f4.Vhs=iV,f4.use||f4.registerComponent("Vhs",iV),f4.options.vhs=f4.options.vhs||{},f4.getPlugin&&f4.getPlugin("reloadSourceOnError")||f4.registerPlugin("reloadSourceOnError",function(a){iT(this,a)});let{Title:i5,Text:i6}=s.Typography,{Option:i7}=t.Select,i8=({video:a})=>{let b=(0,l.useRef)(null),c=(0,l.useRef)(null),[d,e]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[h,i]=(0,l.useState)(1),[j,s]=(0,l.useState)(1),[x,y]=(0,l.useState)(0),[z,B]=(0,l.useState)(0),[D,F]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!b.current)return;let d={autoplay:!1,controls:!0,responsive:!0,fluid:!0,sources:[{src:a.url,type:a.format}]};c.current=f4(b.current,d,()=>{console.log("Player is ready")});let f=c.current;return f.on("play",()=>e(!0)),f.on("pause",()=>e(!1)),f.on("timeupdate",()=>{y(f.currentTime()||0),B(f.duration()||0)}),()=>{f&&f.dispose()}},[a.url,a.format]);let H=a=>{i(a);let b=c.current;b&&b.volume(a)},J=a=>{s(a);let b=c.current;b&&b.playbackRate(a)},L=a=>{y(a);let b=c.current;b&&b.currentTime(a)},N=a=>{let b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%60);return b>0?`${b}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${c}:${d.toString().padStart(2,"0")}`};return(0,k.jsxs)("div",{children:[(0,k.jsxs)(n.Row,{justify:"space-between",align:"middle",style:{marginBottom:24},children:[(0,k.jsxs)(o.Col,{children:[(0,k.jsxs)(i5,{level:2,children:[(0,k.jsx)(P.VideoCameraOutlined,{})," Video Player"]}),(0,k.jsxs)(i6,{type:"secondary",children:["Playing: ",a.name]})]}),(0,k.jsx)(o.Col,{children:(0,k.jsxs)(r.Space,{children:[(0,k.jsx)(w.Tag,{icon:(0,k.jsx)(Q.ClockCircleOutlined,{}),color:"blue",children:a.startTime}),(0,k.jsx)(w.Tag,{icon:(0,k.jsx)(R.CheckCircleOutlined,{}),color:"green",children:a.cameraName})]})})]}),(0,k.jsx)(m.Card,{children:(0,k.jsxs)(n.Row,{gutter:16,children:[(0,k.jsxs)(o.Col,{span:18,children:[(0,k.jsx)("div",{"data-vjs-player":!0,children:(0,k.jsx)("div",{ref:b})}),(0,k.jsxs)("div",{style:{marginTop:16,padding:"16px 0"},children:[(0,k.jsxs)(n.Row,{align:"middle",gutter:16,children:[(0,k.jsx)(o.Col,{children:(0,k.jsx)(p.Button,{icon:d?(0,k.jsx)(C,{}):(0,k.jsx)(A,{}),onClick:()=>{let a=c.current;a&&(d?a.pause():a.play())},type:"primary"})}),(0,k.jsx)(o.Col,{flex:"auto",children:(0,k.jsx)(q.default,{min:0,max:z,value:x,onChange:L,tooltip:{formatter:a=>void 0!==a?N(a):""}})}),(0,k.jsx)(o.Col,{children:(0,k.jsxs)(i6,{type:"secondary",children:[N(x)," / ",N(z)]})})]}),(0,k.jsxs)(n.Row,{align:"middle",gutter:16,style:{marginTop:16},children:[(0,k.jsx)(o.Col,{children:(0,k.jsxs)(r.Space,{children:[(0,k.jsx)(p.Button,{icon:(0,k.jsx)(E,{}),onClick:()=>L(x-10),children:"-10s"}),(0,k.jsx)(p.Button,{icon:(0,k.jsx)(G,{}),onClick:()=>L(x+10),children:"+10s"})]})}),(0,k.jsx)(o.Col,{children:(0,k.jsxs)(r.Space,{children:[(0,k.jsx)(M,{}),(0,k.jsx)(q.default,{min:0,max:1,step:.1,value:h,onChange:H,style:{width:100}})]})}),(0,k.jsx)(o.Col,{children:(0,k.jsx)(r.Space,{children:(0,k.jsxs)(t.Select,{value:j,onChange:J,style:{width:100},children:[(0,k.jsx)(i7,{value:.5,children:"0.5x"}),(0,k.jsx)(i7,{value:1,children:"1x"}),(0,k.jsx)(i7,{value:1.5,children:"1.5x"}),(0,k.jsx)(i7,{value:2,children:"2x"})]})})}),(0,k.jsx)(o.Col,{children:(0,k.jsx)(p.Button,{icon:f?(0,k.jsx)(K,{}):(0,k.jsx)(I,{}),onClick:()=>{let a=c.current;a&&(f?a.exitFullscreen():a.requestFullscreen(),g(!f))}})}),(0,k.jsx)(o.Col,{children:(0,k.jsx)(p.Button,{icon:(0,k.jsx)(O,{}),onClick:()=>F(!0)})})]})]})]}),(0,k.jsxs)(o.Col,{span:6,children:[(0,k.jsx)(m.Card,{title:"Video Info",size:"small",children:(0,k.jsxs)(r.Space,{direction:"vertical",style:{width:"100%"},children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"Camera:"}),(0,k.jsxs)(i6,{children:[" ",a.cameraName]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"Start Time:"}),(0,k.jsxs)(i6,{children:[" ",a.startTime]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"End Time:"}),(0,k.jsxs)(i6,{children:[" ",a.endTime]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"Duration:"}),(0,k.jsxs)(i6,{children:[" ",N(a.duration)]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"Size:"}),(0,k.jsxs)(i6,{children:[" ",(a.size/1048576).toFixed(2)," MB"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{strong:!0,children:"Format:"}),(0,k.jsxs)(i6,{children:[" ",a.format.toUpperCase()]})]})]})}),(0,k.jsx)(m.Card,{title:"Playback Settings",size:"small",style:{marginTop:16},children:(0,k.jsxs)(r.Space,{direction:"vertical",style:{width:"100%"},children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{children:"Volume"}),(0,k.jsx)(q.default,{min:0,max:1,step:.1,value:h,onChange:H})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{children:"Playback Speed"}),(0,k.jsxs)(t.Select,{value:j,onChange:J,style:{width:"100%"},children:[(0,k.jsx)(i7,{value:.5,children:"0.5x"}),(0,k.jsx)(i7,{value:1,children:"1x"}),(0,k.jsx)(i7,{value:1.5,children:"1.5x"}),(0,k.jsx)(i7,{value:2,children:"2x"})]})]})]})})]})]})}),(0,k.jsx)(v.Modal,{title:"Video Settings",open:D,onCancel:()=>F(!1),footer:[(0,k.jsx)(p.Button,{onClick:()=>F(!1),children:"Close"},"close")],children:(0,k.jsxs)(r.Space,{direction:"vertical",style:{width:"100%"},children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{children:"Volume"}),(0,k.jsx)(q.default,{min:0,max:1,step:.1,value:h,onChange:H})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{children:"Playback Speed"}),(0,k.jsxs)(t.Select,{value:j,onChange:J,style:{width:"100%"},children:[(0,k.jsx)(i7,{value:.5,children:"0.5x"}),(0,k.jsx)(i7,{value:1,children:"1x"}),(0,k.jsx)(i7,{value:1.5,children:"1.5x"}),(0,k.jsx)(i7,{value:2,children:"2x"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(i6,{children:"Auto-play"}),(0,k.jsx)(u.default,{defaultChecked:!0})]})]})})]})};a.s(["default",0,()=>(0,k.jsx)(i8,{video:{id:1,name:"Test Video",cameraId:1,cameraName:"Entrance Cam 1",startTime:"2023-12-01 10:00:00",endTime:"2023-12-01 11:00:00",duration:3600,size:1024e3,format:"mp4",url:"https://example.com/test-video.mp4",thumbnailUrl:""}})],12868)}];

//# sourceMappingURL=_20d37e61._.js.map