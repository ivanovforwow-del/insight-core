module.exports=[327387,a=>{"use strict";var b=a.i(262032);a.s(["Modal",()=>b.default])},292310,a=>{"use strict";var b=a.i(210095);a.s(["DatePicker",()=>b.default])},971306,a=>{"use strict";var b=a.i(603591);a.s(["Table",()=>b.default])},27730,a=>{"use strict";var b=a.i(549396);a.s(["Select",()=>b.default])},255565,a=>{"use strict";var b=a.i(140529);a.s(["Card",()=>b.default])},835371,a=>{"use strict";var b=a.i(158501);a.s(["Typography",()=>b.default])},276130,a=>{"use strict";var b=a.i(731821);a.s(["Space",()=>b.default])},268186,a=>{"use strict";var b=a.i(392100);a.s(["Tag",()=>b.default])},925125,470671,a=>{"use strict";var b=a.i(624771);a.s(["Row",()=>b.default],925125);var c=a.i(283330);a.s(["Col",()=>c.default],470671)},749281,a=>{"use strict";var b=a.i(312238);a.s(["Button",()=>b.default])},828864,a=>{"use strict";var b=a.i(502888);a.s(["EyeOutlined",()=>b.default])},891487,a=>{"use strict";var b=a.i(433217),c=a.i(370025),d=a.i(937927),e=a.i(457792);let f="/events",g=async a=>(await e.default.get(f,{params:a})).data,h=async a=>(await e.default.get(`${f}/stats`,{params:a})).data,i=async(a,b)=>(await e.default.patch(`${f}/${a}/status`,{resolved:b})).data,j=async a=>{await e.default.delete(`${f}/${a}`)},k={all:["events"],lists:()=>[...k.all,"list"],list:a=>[...k.lists(),a],details:()=>[...k.all,"detail"],detail:a=>[...k.details(),a],recent:a=>[...k.all,"recent",a],byCamera:(a,b)=>[...k.all,"byCamera",a,b],stats:a=>[...k.all,"stats",a]};a.s(["useDeleteEvent",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>j(a),onSuccess:()=>{a.invalidateQueries({queryKey:k.lists()})}})},"useEvents",0,a=>(0,b.useQuery)({queryKey:k.list(a),queryFn:()=>g(a),staleTime:3e4}),"useEventsStats",0,a=>(0,b.useQuery)({queryKey:k.stats(a),queryFn:()=>h(a),staleTime:3e5}),"useUpdateEventStatus",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,resolved:b})=>i(a,b),onSuccess:(b,{id:c})=>{a.invalidateQueries({queryKey:k.detail(c)}),a.invalidateQueries({queryKey:k.lists()})}})}],891487)},524007,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(255565),e=a.i(971306),f=a.i(835371),g=a.i(276130),h=a.i(268186),i=a.i(749281),j=a.i(327387),k=a.i(292310),l=a.i(27730),m=a.i(183772),n=a.i(164267),o=a.i(925125),p=a.i(470671),q=a.i(210998),r=a.i(828864),s=a.i(735408),t=a.i(215336),u=a.i(930879),v=a.i(418213),w=a.i(891487);let{Title:x}=f.Typography,{RangePicker:y}=k.DatePicker,{Option:z}=l.Select,A=({initialFilters:a={}})=>{let[k,A]=c.default.useState(!1),[B,C]=c.default.useState(a),[D,E]=c.default.useState(null),{data:F={data:[],total:0,page:1,limit:10},isLoading:G}=(0,w.useEvents)(B);(0,w.useUpdateEventStatus)(),(0,w.useDeleteEvent)();let H={low:"green",medium:"orange",high:"red",critical:"red"},I={Person:"#1890ff",Car:"#52c41a",Truck:"#faad14",Bag:"#f5222d",Bicycle:"#722ed1"},J=[{title:"ID",dataIndex:"id",key:"id",sorter:(a,b)=>a.id-b.id},{title:"Rule",dataIndex:["metadata","rule"],key:"rule",sorter:(a,b)=>(a.metadata?.rule||"").localeCompare(b.metadata?.rule||"")},{title:"Camera",dataIndex:"cameraName",key:"cameraName",sorter:(a,b)=>a.cameraName.localeCompare(b.cameraName)},{title:"Object",dataIndex:"objectType",key:"objectType",render:a=>(0,b.jsx)(h.Tag,{color:I[a]||"default",children:a}),sorter:(a,b)=>a.objectType.localeCompare(b.objectType)},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",sorter:(a,b)=>(0,v.default)(a.timestamp).diff((0,v.default)(b.timestamp))},{title:"Confidence",dataIndex:"confidence",key:"confidence",render:a=>`${(100*a).toFixed(1)}%`,sorter:(a,b)=>a.confidence-b.confidence},{title:"Severity",dataIndex:"severity",key:"severity",render:a=>(0,b.jsx)(h.Tag,{color:H[a],children:a.toUpperCase()}),sorter:(a,b)=>a.severity.localeCompare(b.severity),filters:[{text:"Low",value:"low"},{text:"Medium",value:"medium"},{text:"High",value:"high"},{text:"Critical",value:"critical"}],onFilter:(a,b)=>b.severity===a},{title:"Status",key:"resolved",render:(a,c)=>(0,b.jsx)(n.Badge,{status:c.metadata?.resolved?"success":"error",text:c.metadata?.resolved?"Resolved":"Pending"}),filters:[{text:"Resolved",value:!0},{text:"Pending",value:!1}],onFilter:(a,b)=>b.metadata?.resolved===a},{title:"Actions",key:"actions",render:(a,c)=>(0,b.jsxs)(g.Space,{size:"middle",children:[(0,b.jsx)(i.Button,{type:"link",icon:(0,b.jsx)(r.EyeOutlined,{}),onClick:()=>E(c),children:"View"}),(0,b.jsx)(i.Button,{type:"link",icon:(0,b.jsx)(u.DownloadOutlined,{}),onClick:()=>K(c),children:"Clip"})]})}],K=a=>{console.log("Download clip for event:",a)},L=a=>{C({...B,...a})};return(0,b.jsxs)("div",{style:{padding:"24px"},children:[(0,b.jsxs)(o.Row,{justify:"space-between",align:"middle",style:{marginBottom:24},children:[(0,b.jsx)(p.Col,{children:(0,b.jsxs)(x,{level:2,children:[(0,b.jsx)(q.AlertOutlined,{})," Events"]})}),(0,b.jsx)(p.Col,{children:(0,b.jsxs)(g.Space,{children:[(0,b.jsx)(y,{onChange:(a,b)=>{if(a)L({startDate:b[0],endDate:b[1]});else{let a={...B};delete a.startDate,delete a.endDate,C(a)}}}),(0,b.jsx)(i.Button,{icon:(0,b.jsx)(s.FilterOutlined,{}),onClick:()=>A(!k),children:"Filters"})]})})]}),k&&(0,b.jsx)(d.Card,{style:{marginBottom:24},children:(0,b.jsxs)(o.Row,{gutter:16,children:[(0,b.jsx)(p.Col,{span:8,children:(0,b.jsxs)(l.Select,{style:{width:"100%"},placeholder:"Filter by camera",onChange:a=>L({cameraId:a}),allowClear:!0,children:[(0,b.jsx)(z,{value:"Entrance Cam 1",children:"Entrance Cam 1"}),(0,b.jsx)(z,{value:"Parking Cam 2",children:"Parking Cam 2"}),(0,b.jsx)(z,{value:"Gate Cam 3",children:"Gate Cam 3"}),(0,b.jsx)(z,{value:"Warehouse Cam 1",children:"Warehouse Cam 1"}),(0,b.jsx)(z,{value:"Perimeter Cam 4",children:"Perimeter Cam 4"})]})}),(0,b.jsx)(p.Col,{span:8,children:(0,b.jsxs)(l.Select,{style:{width:"100%"},placeholder:"Filter by object type",onChange:a=>L({objectType:a}),allowClear:!0,children:[(0,b.jsx)(z,{value:"Person",children:"Person"}),(0,b.jsx)(z,{value:"Car",children:"Car"}),(0,b.jsx)(z,{value:"Truck",children:"Truck"}),(0,b.jsx)(z,{value:"Bag",children:"Bag"}),(0,b.jsx)(z,{value:"Bicycle",children:"Bicycle"})]})}),(0,b.jsx)(p.Col,{span:8,children:(0,b.jsx)(m.Input,{placeholder:"Search events...",prefix:(0,b.jsx)(t.SearchOutlined,{}),onChange:a=>L({search:a.target.value})})})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(e.Table,{columns:J,dataSource:F.data,loading:G,rowKey:"id",pagination:{pageSize:F.limit,total:F.total,current:F.page,onChange:(a,b)=>C({...B,page:a,limit:b})},scroll:{x:1200}})}),(0,b.jsx)(j.Modal,{title:"Event Details",open:!!D,onCancel:()=>E(null),footer:[(0,b.jsx)(i.Button,{onClick:()=>E(null),children:"Close"},"close")],children:D&&(0,b.jsxs)("div",{children:[(0,b.jsx)(f.Typography.Title,{level:4,children:D.cameraName}),(0,b.jsxs)(f.Typography.Paragraph,{children:[(0,b.jsx)("strong",{children:"Object:"})," ",D.objectType]}),(0,b.jsxs)(f.Typography.Paragraph,{children:[(0,b.jsx)("strong",{children:"Timestamp:"})," ",D.timestamp]}),(0,b.jsxs)(f.Typography.Paragraph,{children:[(0,b.jsx)("strong",{children:"Confidence:"})," ",(100*D.confidence).toFixed(1),"%"]}),(0,b.jsxs)(f.Typography.Paragraph,{children:[(0,b.jsx)("strong",{children:"Severity:"})," ",D.severity.toUpperCase()]}),(0,b.jsxs)(f.Typography.Paragraph,{children:[(0,b.jsx)("strong",{children:"Status:"})," ",D.metadata?.resolved?"Resolved":"Pending"]})]})})]})};a.s(["default",0,()=>(0,b.jsx)(A,{})],524007)}];

//# sourceMappingURL=_a2827414._.js.map